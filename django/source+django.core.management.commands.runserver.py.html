<!DOCTYPE html><html><head><meta charset=utf-8><title>django.core.management.commands.runserver</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9656; apps</a> </li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9656; contrib</a> </li><li><a href=django.core.html>&#9662; core</a> </li><li><ul><li><a href=django.core.asgi.html>&#9656; asgi</a> </li><li><a href=django.core.cache.html>&#9656; cache</a> </li><li><a href=django.core.checks.html>&#9656; checks</a> </li><li><a href=django.core.exceptions.html>&#9656; exceptions</a> </li><li><a href=django.core.files.html>&#9656; files</a> </li><li><a href=django.core.handlers.html>&#9656; handlers</a> </li><li><a href=django.core.mail.html>&#9656; mail</a> </li><li><a href=django.core.management.html>&#9662; management</a> </li><li><ul><li><a href=django.core.management.base.html>&#9656; base</a> </li><li><a href=django.core.management.color.html>&#9656; color</a> </li><li><a href=django.core.management.commands.html>&#9662; commands</a> </li><li><ul><li><a href=django.core.management.commands.check.html>&#9656; check</a> </li><li><a href=django.core.management.commands.compilemessages.html>&#9656; compilemessages</a> </li><li><a href=django.core.management.commands.createcachetable.html>&#9656; createcachetable</a> </li><li><a href=django.core.management.commands.dbshell.html>&#9656; dbshell</a> </li><li><a href=django.core.management.commands.diffsettings.html>&#9656; diffsettings</a> </li><li><a href=django.core.management.commands.dumpdata.html>&#9656; dumpdata</a> </li><li><a href=django.core.management.commands.flush.html>&#9656; flush</a> </li><li><a href=django.core.management.commands.inspectdb.html>&#9656; inspectdb</a> </li><li><a href=django.core.management.commands.loaddata.html>&#9656; loaddata</a> </li><li><a href=django.core.management.commands.makemessages.html>&#9656; makemessages</a> </li><li><a href=django.core.management.commands.makemigrations.html>&#9656; makemigrations</a> </li><li><a href=django.core.management.commands.migrate.html>&#9656; migrate</a> </li><li><div class=select><a href=django.core.management.commands.runserver.html>&#9662; runserver</a> </div></li><li><ul><li><a href=django.core.management.commands.runserver.Command.html> <i>class</i> Command</a> </li></ul></li><li><a href=django.core.management.commands.sendtestemail.html>&#9656; sendtestemail</a> </li><li><a href=django.core.management.commands.shell.html>&#9656; shell</a> </li><li><a href=django.core.management.commands.showmigrations.html>&#9656; showmigrations</a> </li><li><a href=django.core.management.commands.sqlflush.html>&#9656; sqlflush</a> </li><li><a href=django.core.management.commands.sqlmigrate.html>&#9656; sqlmigrate</a> </li><li><a href=django.core.management.commands.sqlsequencereset.html>&#9656; sqlsequencereset</a> </li><li><a href=django.core.management.commands.squashmigrations.html>&#9656; squashmigrations</a> </li><li><a href=django.core.management.commands.startapp.html>&#9656; startapp</a> </li><li><a href=django.core.management.commands.startproject.html>&#9656; startproject</a> </li><li><a href=django.core.management.commands.test.html>&#9656; test</a> </li><li><a href=django.core.management.commands.testserver.html>&#9656; testserver</a> </li></ul></li><li><a href=django.core.management.sql.html>&#9656; sql</a> </li><li><a href=django.core.management.templates.html>&#9656; templates</a> </li><li><a href=django.core.management.utils.html>&#9656; utils</a> </li><li><a href=django.core.management.ManagementUtility.html> <i>class</i> ManagementUtility</a> </li></ul></li><li><a href=django.core.paginator.html>&#9656; paginator</a> </li><li><a href=django.core.serializers.html>&#9656; serializers</a> </li><li><a href=django.core.servers.html>&#9656; servers</a> </li><li><a href=django.core.signals.html>&#9656; signals</a> </li><li><a href=django.core.signing.html>&#9656; signing</a> </li><li><a href=django.core.validators.html>&#9656; validators</a> </li><li><a href=django.core.wsgi.html>&#9656; wsgi</a> </li></ul></li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9656; test</a> </li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Source code django/core/management/commands/runserver.py</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.core.html>core</a>.<a class=symbol href=django.core.management.html>management</a>.<a class=symbol href=django.core.management.commands.html>commands</a>.<a class=symbol href=django.core.management.commands.runserver.html>runserver</a></div><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre></div></td><td class=code><div class=highlight><pre><span></span><a name=line-1></a><span class=kn>import</span> <span class=nn>errno</span>
<a name=line-2></a><span class=kn>import</span> <span class=nn>os</span>
<a name=line-3></a><span class=kn>import</span> <span class=nn>re</span>
<a name=line-4></a><span class=kn>import</span> <span class=nn>socket</span>
<a name=line-5></a><span class=kn>import</span> <span class=nn>sys</span>
<a name=line-6></a><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<a name=line-7></a>
<a name=line-8></a><span class=kn>from</span> <span class=nn>django.conf</span> <span class=kn>import</span> <span class=n>settings</span>
<a name=line-9></a><span class=kn>from</span> <span class=nn>django.core.management.base</span> <span class=kn>import</span> <span class=n>BaseCommand</span><span class=p>,</span> <span class=n>CommandError</span>
<a name=line-10></a><span class=kn>from</span> <span class=nn>django.core.servers.basehttp</span> <span class=kn>import</span> <span class=p>(</span>
<a name=line-11></a>    <span class=n>WSGIServer</span><span class=p>,</span> <span class=n>get_internal_wsgi_application</span><span class=p>,</span> <span class=n>run</span><span class=p>,</span>
<a name=line-12></a><span class=p>)</span>
<a name=line-13></a><span class=kn>from</span> <span class=nn>django.utils</span> <span class=kn>import</span> <span class=n>autoreload</span>
<a name=line-14></a><span class=kn>from</span> <span class=nn>django.utils.regex_helper</span> <span class=kn>import</span> <span class=n>_lazy_re_compile</span>
<a name=line-15></a>
<a name=line-16></a><span class=n>naiveip_re</span> <span class=o>=</span> <span class=n>_lazy_re_compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;&quot;&quot;^(?:</span>
<a name=line-17></a><span class=s2>(?P&lt;addr&gt;</span>
<a name=line-18></a><span class=s2>    (?P&lt;ipv4&gt;\d{1,3}(?:\.\d{1,3})</span><span class=si>{3}</span><span class=s2>) |         # IPv4 address</span>
<a name=line-19></a><span class=s2>    (?P&lt;ipv6&gt;\[[a-fA-F0-9:]+\]) |               # IPv6 address</span>
<a name=line-20></a><span class=s2>    (?P&lt;fqdn&gt;[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*) # FQDN</span>
<a name=line-21></a><span class=s2>):)?(?P&lt;port&gt;\d+)$&quot;&quot;&quot;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>X</span><span class=p>)</span>
<a name=line-22></a>
<a name=line-23></a>
<a name=line-24></a><span class=k>class</span> <span class=nc>Command</span><span class=p>(</span><span class=n>BaseCommand</span><span class=p>):</span>
<a name=line-25></a>    <span class=n>help</span> <span class=o>=</span> <span class=s2>&quot;Starts a lightweight Web server for development.&quot;</span>
<a name=line-26></a>
<a name=line-27></a>    <span class=c1># Validation is called explicitly each time the server is reloaded.</span>
<a name=line-28></a>    <span class=n>requires_system_checks</span> <span class=o>=</span> <span class=p>[]</span>
<a name=line-29></a>    <span class=n>stealth_options</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;shutdown_message&#39;</span><span class=p>,)</span>
<a name=line-30></a>
<a name=line-31></a>    <span class=n>default_addr</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1&#39;</span>
<a name=line-32></a>    <span class=n>default_addr_ipv6</span> <span class=o>=</span> <span class=s1>&#39;::1&#39;</span>
<a name=line-33></a>    <span class=n>default_port</span> <span class=o>=</span> <span class=s1>&#39;8000&#39;</span>
<a name=line-34></a>    <span class=n>protocol</span> <span class=o>=</span> <span class=s1>&#39;http&#39;</span>
<a name=line-35></a>    <span class=n>server_cls</span> <span class=o>=</span> <span class=n>WSGIServer</span>
<a name=line-36></a>
<a name=line-37></a>    <span class=k>def</span> <span class=nf>add_arguments</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parser</span><span class=p>):</span>
<a name=line-38></a>        <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span>
<a name=line-39></a>            <span class=s1>&#39;addrport&#39;</span><span class=p>,</span> <span class=n>nargs</span><span class=o>=</span><span class=s1>&#39;?&#39;</span><span class=p>,</span>
<a name=line-40></a>            <span class=n>help</span><span class=o>=</span><span class=s1>&#39;Optional port number, or ipaddr:port&#39;</span>
<a name=line-41></a>        <span class=p>)</span>
<a name=line-42></a>        <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span>
<a name=line-43></a>            <span class=s1>&#39;--ipv6&#39;</span><span class=p>,</span> <span class=s1>&#39;-6&#39;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;store_true&#39;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s1>&#39;use_ipv6&#39;</span><span class=p>,</span>
<a name=line-44></a>            <span class=n>help</span><span class=o>=</span><span class=s1>&#39;Tells Django to use an IPv6 address.&#39;</span><span class=p>,</span>
<a name=line-45></a>        <span class=p>)</span>
<a name=line-46></a>        <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span>
<a name=line-47></a>            <span class=s1>&#39;--nothreading&#39;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;store_false&#39;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s1>&#39;use_threading&#39;</span><span class=p>,</span>
<a name=line-48></a>            <span class=n>help</span><span class=o>=</span><span class=s1>&#39;Tells Django to NOT use threading.&#39;</span><span class=p>,</span>
<a name=line-49></a>        <span class=p>)</span>
<a name=line-50></a>        <span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span>
<a name=line-51></a>            <span class=s1>&#39;--noreload&#39;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s1>&#39;store_false&#39;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s1>&#39;use_reloader&#39;</span><span class=p>,</span>
<a name=line-52></a>            <span class=n>help</span><span class=o>=</span><span class=s1>&#39;Tells Django to NOT use the auto-reloader.&#39;</span><span class=p>,</span>
<a name=line-53></a>        <span class=p>)</span>
<a name=line-54></a>
<a name=line-55></a>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>):</span>
<a name=line-56></a>        <span class=k>if</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;no_color&#39;</span><span class=p>]:</span>
<a name=line-57></a>            <span class=c1># We rely on the environment because it&#39;s currently the only</span>
<a name=line-58></a>            <span class=c1># way to reach WSGIRequestHandler. This seems an acceptable</span>
<a name=line-59></a>            <span class=c1># compromise considering `runserver` runs indefinitely.</span>
<a name=line-60></a>            <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;DJANGO_COLORS&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;nocolor&quot;</span>
<a name=line-61></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a name=line-62></a>
<a name=line-63></a>    <span class=k>def</span> <span class=nf>get_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>):</span>
<a name=line-64></a>        <span class=sd>&quot;&quot;&quot;Return the default WSGI handler for the runner.&quot;&quot;&quot;</span>
<a name=line-65></a>        <span class=k>return</span> <span class=n>get_internal_wsgi_application</span><span class=p>()</span>
<a name=line-66></a>
<a name=line-67></a>    <span class=k>def</span> <span class=nf>handle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>):</span>
<a name=line-68></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>settings</span><span class=o>.</span><span class=n>DEBUG</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>settings</span><span class=o>.</span><span class=n>ALLOWED_HOSTS</span><span class=p>:</span>
<a name=line-69></a>            <span class=k>raise</span> <span class=n>CommandError</span><span class=p>(</span><span class=s1>&#39;You must set settings.ALLOWED_HOSTS if DEBUG is False.&#39;</span><span class=p>)</span>
<a name=line-70></a>
<a name=line-71></a>        <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;use_ipv6&#39;</span><span class=p>]</span>
<a name=line-72></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>socket</span><span class=o>.</span><span class=n>has_ipv6</span><span class=p>:</span>
<a name=line-73></a>            <span class=k>raise</span> <span class=n>CommandError</span><span class=p>(</span><span class=s1>&#39;Your Python does not support IPv6.&#39;</span><span class=p>)</span>
<a name=line-74></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_raw_ipv6</span> <span class=o>=</span> <span class=kc>False</span>
<a name=line-75></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;addrport&#39;</span><span class=p>]:</span>
<a name=line-76></a>            <span class=bp>self</span><span class=o>.</span><span class=n>addr</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
<a name=line-77></a>            <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_port</span>
<a name=line-78></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-79></a>            <span class=n>m</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>naiveip_re</span><span class=p>,</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;addrport&#39;</span><span class=p>])</span>
<a name=line-80></a>            <span class=k>if</span> <span class=n>m</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-81></a>                <span class=k>raise</span> <span class=n>CommandError</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=si>%s</span><span class=s1>&quot; is not a valid port number &#39;</span>
<a name=line-82></a>                                   <span class=s1>&#39;or address:port pair.&#39;</span> <span class=o>%</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;addrport&#39;</span><span class=p>])</span>
<a name=line-83></a>            <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>,</span> <span class=n>_ipv4</span><span class=p>,</span> <span class=n>_ipv6</span><span class=p>,</span> <span class=n>_fqdn</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>groups</span><span class=p>()</span>
<a name=line-84></a>            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=o>.</span><span class=n>isdigit</span><span class=p>():</span>
<a name=line-85></a>                <span class=k>raise</span> <span class=n>CommandError</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%r</span><span class=s2> is not a valid port number.&quot;</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>
<a name=line-86></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>:</span>
<a name=line-87></a>                <span class=k>if</span> <span class=n>_ipv6</span><span class=p>:</span>
<a name=line-88></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>addr</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<a name=line-89></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span> <span class=o>=</span> <span class=kc>True</span>
<a name=line-90></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>_raw_ipv6</span> <span class=o>=</span> <span class=kc>True</span>
<a name=line-91></a>                <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>_fqdn</span><span class=p>:</span>
<a name=line-92></a>                    <span class=k>raise</span> <span class=n>CommandError</span><span class=p>(</span><span class=s1>&#39;&quot;</span><span class=si>%s</span><span class=s1>&quot; is not a valid IPv6 address.&#39;</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>)</span>
<a name=line-93></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>:</span>
<a name=line-94></a>            <span class=bp>self</span><span class=o>.</span><span class=n>addr</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_addr_ipv6</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_addr</span>
<a name=line-95></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_raw_ipv6</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span>
<a name=line-96></a>        <span class=bp>self</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a name=line-97></a>
<a name=line-98></a>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>):</span>
<a name=line-99></a>        <span class=sd>&quot;&quot;&quot;Run the server, using the autoreloader if needed.&quot;&quot;&quot;</span>
<a name=line-100></a>        <span class=n>use_reloader</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;use_reloader&#39;</span><span class=p>]</span>
<a name=line-101></a>
<a name=line-102></a>        <span class=k>if</span> <span class=n>use_reloader</span><span class=p>:</span>
<a name=line-103></a>            <span class=n>autoreload</span><span class=o>.</span><span class=n>run_with_reloader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>inner_run</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a name=line-104></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-105></a>            <span class=bp>self</span><span class=o>.</span><span class=n>inner_run</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a name=line-106></a>
<a name=line-107></a>    <span class=k>def</span> <span class=nf>inner_run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>):</span>
<a name=line-108></a>        <span class=c1># If an exception was silenced in ManagementUtility.execute in order</span>
<a name=line-109></a>        <span class=c1># to be raised in the child process, raise it now.</span>
<a name=line-110></a>        <span class=n>autoreload</span><span class=o>.</span><span class=n>raise_last_exception</span><span class=p>()</span>
<a name=line-111></a>
<a name=line-112></a>        <span class=n>threading</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s1>&#39;use_threading&#39;</span><span class=p>]</span>
<a name=line-113></a>        <span class=c1># &#39;shutdown_message&#39; is a stealth option.</span>
<a name=line-114></a>        <span class=n>shutdown_message</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;shutdown_message&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
<a name=line-115></a>        <span class=n>quit_command</span> <span class=o>=</span> <span class=s1>&#39;CTRL-BREAK&#39;</span> <span class=k>if</span> <span class=n>sys</span><span class=o>.</span><span class=n>platform</span> <span class=o>==</span> <span class=s1>&#39;win32&#39;</span> <span class=k>else</span> <span class=s1>&#39;CONTROL-C&#39;</span>
<a name=line-116></a>
<a name=line-117></a>        <span class=bp>self</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&quot;Performing system checks...</span><span class=se>\n\n</span><span class=s2>&quot;</span><span class=p>)</span>
<a name=line-118></a>        <span class=bp>self</span><span class=o>.</span><span class=n>check</span><span class=p>(</span><span class=n>display_num_errors</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a name=line-119></a>        <span class=c1># Need to check migrations here, so can&#39;t use the</span>
<a name=line-120></a>        <span class=c1># requires_migrations_check attribute.</span>
<a name=line-121></a>        <span class=bp>self</span><span class=o>.</span><span class=n>check_migrations</span><span class=p>()</span>
<a name=line-122></a>        <span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%B </span><span class=si>%d</span><span class=s1>, %Y - </span><span class=si>%X</span><span class=s1>&#39;</span><span class=p>)</span>
<a name=line-123></a>        <span class=bp>self</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>now</span><span class=p>)</span>
<a name=line-124></a>        <span class=bp>self</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>((</span>
<a name=line-125></a>            <span class=s2>&quot;Django version </span><span class=si>%(version)s</span><span class=s2>, using settings </span><span class=si>%(settings)r</span><span class=se>\n</span><span class=s2>&quot;</span>
<a name=line-126></a>            <span class=s2>&quot;Starting development server at </span><span class=si>%(protocol)s</span><span class=s2>://</span><span class=si>%(addr)s</span><span class=s2>:</span><span class=si>%(port)s</span><span class=s2>/</span><span class=se>\n</span><span class=s2>&quot;</span>
<a name=line-127></a>            <span class=s2>&quot;Quit the server with </span><span class=si>%(quit_command)s</span><span class=s2>.&quot;</span>
<a name=line-128></a>        <span class=p>)</span> <span class=o>%</span> <span class=p>{</span>
<a name=line-129></a>            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_version</span><span class=p>(),</span>
<a name=line-130></a>            <span class=s2>&quot;settings&quot;</span><span class=p>:</span> <span class=n>settings</span><span class=o>.</span><span class=n>SETTINGS_MODULE</span><span class=p>,</span>
<a name=line-131></a>            <span class=s2>&quot;protocol&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>protocol</span><span class=p>,</span>
<a name=line-132></a>            <span class=s2>&quot;addr&quot;</span><span class=p>:</span> <span class=s1>&#39;[</span><span class=si>%s</span><span class=s1>]&#39;</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_raw_ipv6</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>,</span>
<a name=line-133></a>            <span class=s2>&quot;port&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
<a name=line-134></a>            <span class=s2>&quot;quit_command&quot;</span><span class=p>:</span> <span class=n>quit_command</span><span class=p>,</span>
<a name=line-135></a>        <span class=p>})</span>
<a name=line-136></a>
<a name=line-137></a>        <span class=k>try</span><span class=p>:</span>
<a name=line-138></a>            <span class=n>handler</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_handler</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span>
<a name=line-139></a>            <span class=n>run</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>addr</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>),</span> <span class=n>handler</span><span class=p>,</span>
<a name=line-140></a>                <span class=n>ipv6</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>use_ipv6</span><span class=p>,</span> <span class=n>threading</span><span class=o>=</span><span class=n>threading</span><span class=p>,</span> <span class=n>server_cls</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>server_cls</span><span class=p>)</span>
<a name=line-141></a>        <span class=k>except</span> <span class=ne>OSError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a name=line-142></a>            <span class=c1># Use helpful error messages instead of ugly tracebacks.</span>
<a name=line-143></a>            <span class=n>ERRORS</span> <span class=o>=</span> <span class=p>{</span>
<a name=line-144></a>                <span class=n>errno</span><span class=o>.</span><span class=n>EACCES</span><span class=p>:</span> <span class=s2>&quot;You don&#39;t have permission to access that port.&quot;</span><span class=p>,</span>
<a name=line-145></a>                <span class=n>errno</span><span class=o>.</span><span class=n>EADDRINUSE</span><span class=p>:</span> <span class=s2>&quot;That port is already in use.&quot;</span><span class=p>,</span>
<a name=line-146></a>                <span class=n>errno</span><span class=o>.</span><span class=n>EADDRNOTAVAIL</span><span class=p>:</span> <span class=s2>&quot;That IP address can&#39;t be assigned to.&quot;</span><span class=p>,</span>
<a name=line-147></a>            <span class=p>}</span>
<a name=line-148></a>            <span class=k>try</span><span class=p>:</span>
<a name=line-149></a>                <span class=n>error_text</span> <span class=o>=</span> <span class=n>ERRORS</span><span class=p>[</span><span class=n>e</span><span class=o>.</span><span class=n>errno</span><span class=p>]</span>
<a name=line-150></a>            <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
<a name=line-151></a>                <span class=n>error_text</span> <span class=o>=</span> <span class=n>e</span>
<a name=line-152></a>            <span class=bp>self</span><span class=o>.</span><span class=n>stderr</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&quot;Error: </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>error_text</span><span class=p>)</span>
<a name=line-153></a>            <span class=c1># Need to use an OS exit because sys.exit doesn&#39;t work in a thread</span>
<a name=line-154></a>            <span class=n>os</span><span class=o>.</span><span class=n>_exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a name=line-155></a>        <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
<a name=line-156></a>            <span class=k>if</span> <span class=n>shutdown_message</span><span class=p>:</span>
<a name=line-157></a>                <span class=bp>self</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>shutdown_message</span><span class=p>)</span>
<a name=line-158></a>            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</pre></div></td></tr></table><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>