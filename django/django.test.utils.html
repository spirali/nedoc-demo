<!DOCTYPE html><html><head><meta charset=utf-8><title>django.test.utils</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9656; apps</a> </li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9656; contrib</a> </li><li><a href=django.core.html>&#9656; core</a> </li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9662; test</a> </li><li><ul><li><a href=django.test.client.html>&#9656; client</a> </li><li><a href=django.test.html.html>&#9656; html</a> </li><li><a href=django.test.runner.html>&#9656; runner</a> </li><li><a href=django.test.selenium.html>&#9656; selenium</a> </li><li><a href=django.test.signals.html>&#9656; signals</a> </li><li><a href=django.test.testcases.html>&#9656; testcases</a> </li><li><div class=select><a href=django.test.utils.html>&#9662; utils</a> </div></li><li><ul><li><a href=django.test.utils.Approximate.html> <i>class</i> Approximate</a> </li><li><a href=django.test.utils.CaptureQueriesContext.html> <i>class</i> CaptureQueriesContext</a> </li><li><a href=django.test.utils.ContextList.html> <i>class</i> ContextList</a> </li><li><a href=django.test.utils.LoggingCaptureMixin.html> <i>class</i> LoggingCaptureMixin</a> </li><li><a href=django.test.utils.NullTimeKeeper.html> <i>class</i> NullTimeKeeper</a> </li><li><a href=django.test.utils.TestContextDecorator.html> <i>class</i> TestContextDecorator</a> </li><li><a href=django.test.utils.TimeKeeper.html> <i>class</i> TimeKeeper</a> </li><li><a href=django.test.utils.ignore_warnings.html> <i>class</i> ignore_warnings</a> </li><li><a href=django.test.utils.isolate_apps.html> <i>class</i> isolate_apps</a> </li><li><a href=django.test.utils.modify_settings.html> <i>class</i> modify_settings</a> </li><li><a href=django.test.utils.override_script_prefix.html> <i>class</i> override_script_prefix</a> </li><li><a href=django.test.utils.override_settings.html> <i>class</i> override_settings</a> </li><li><a href=django.test.utils.override_system_checks.html> <i>class</i> override_system_checks</a> </li></ul></li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Module utils</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.test.html>test</a>.<a class=symbol href=django.test.utils.html>utils</a></div><a class=sourcelink href=source+django.test.utils.py.html>source</a> <a class=sourcelink href=django.test.utils.html>link</a><h2>Classes</h2><ul class=deflst><li> <div> <span class=def>class <a class=symbol href=django.test.utils.Approximate.html>Approximate</a></span> </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.CaptureQueriesContext.html>CaptureQueriesContext</a></span> </div><div class=docline> Context manager that captures queries executed by the specified connection. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.ContextList.html>ContextList</a></span> </div><div class=docline> A wrapper that provides direct key access to context items contained in a list of context objects. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.LoggingCaptureMixin.html>LoggingCaptureMixin</a></span> </div><div class=docline> Capture the output from the &#39;django&#39; logger and store it on the class&#39;s logger_output attribute. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.NullTimeKeeper.html>NullTimeKeeper</a></span> </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.TestContextDecorator.html>TestContextDecorator</a></span> </div><div class=docline> A base class that can either be used as a context manager during tests or as a test function or unittest.TestCase subclass decorator to perform temporary alterations. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.TimeKeeper.html>TimeKeeper</a></span> </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.ignore_warnings.html>ignore_warnings</a></span> </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.isolate_apps.html>isolate_apps</a></span> </div><div class=docline> Act as either a decorator or a context manager to register models defined in its wrapped context to an isolated registry. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.modify_settings.html>modify_settings</a></span> </div><div class=docline> Like override_settings, but makes it possible to append, prepend, or remove items instead of redefining the entire list. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.override_script_prefix.html>override_script_prefix</a></span> </div><div class=docline> Decorator or context manager to temporary override the script prefix. </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.override_settings.html>override_settings</a></span> </div><div class=docline> Act as either a decorator or a context manager. If it&#39;s a decorator, take a </div></li><li> <div> <span class=def>class <a class=symbol href=django.test.utils.override_system_checks.html>override_system_checks</a></span> </div><div class=docline> Act as a decorator. Override list of registered system checks. Useful when you override `INSTALLED_APPS`, e.g. if you exclude `auth` app, you also need to exclude its system checks. </div></li></ul><h2>Functions</h2><ul class=deflst><li><div class=fn><a id=f_captured_output></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_captured_output>captured_output</a>(<span class=args>stream_name</span>) <span class=label>@contextmanager</span></span><div class=docline> Return a context manager used by captured_stdout/stdin/stderr that temporarily replaces the sys stream *stream_name* with a StringIO. </div></div><div class=fdetail id=fn_captured_output><div class=decl><div class=def><i> @contextmanager<br></i><span class=kw>def</span> captured_output(<span class=args>stream_name</span>) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-705>source</a> <a class=sourcelink href=django.test.utils.html#f_captured_output>link</a></div><pre>Note: This function and the following ``captured_std*`` are copied
      from CPython&#39;s ``test.support`` module.</pre></div></div></li><li><div class=fn><a id=f_captured_stderr></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_captured_stderr>captured_stderr</a>(<span class=args></span>) </span><div class=docline> Capture the output of sys.stderr: </div></div><div class=fdetail id=fn_captured_stderr><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-729>source</a> <a class=sourcelink href=django.test.utils.html#f_captured_stderr>link</a></div><pre>with captured_stderr() as stderr:
           print(&#34;hello&#34;, file=sys.stderr)
       self.assertEqual(stderr.getvalue(), &#34;hello
&#34;)</pre></div></div></li><li><div class=fn><a id=f_captured_stdin></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_captured_stdin>captured_stdin</a>(<span class=args></span>) </span><div class=docline> Capture the input to sys.stdin: </div></div><div class=fdetail id=fn_captured_stdin><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-739>source</a> <a class=sourcelink href=django.test.utils.html#f_captured_stdin>link</a></div><pre>with captured_stdin() as stdin:
           stdin.write(&#39;hello
&#39;)
           stdin.seek(0)
           # call test code that consumes from sys.stdin
           captured = input()
       self.assertEqual(captured, &#34;hello&#34;)</pre></div></div></li><li><div class=fn><a id=f_captured_stdout></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_captured_stdout>captured_stdout</a>(<span class=args></span>) </span><div class=docline> Capture the output of sys.stdout: </div></div><div class=fdetail id=fn_captured_stdout><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-719>source</a> <a class=sourcelink href=django.test.utils.html#f_captured_stdout>link</a></div><pre>with captured_stdout() as stdout:
           print(&#34;hello&#34;)
       self.assertEqual(stdout.getvalue(), &#34;hello
&#34;)</pre></div></div></li><li><div class=fn><a id=f_compare_xml></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_compare_xml>compare_xml</a>(<span class=args>want, got</span>) </span><div class=docline> Try to do a &#39;xml-comparison&#39; of want and got. Plain string comparison </div></div><div class=fdetail id=fn_compare_xml><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-547>source</a> <a class=sourcelink href=django.test.utils.html#f_compare_xml>link</a></div><pre>doesn&#39;t always work because, for example, attribute ordering should not be
important. Ignore comment nodes, processing instructions, document type
node, and leading and trailing whitespaces.

Based on https://github.com/lxml/lxml/blob/master/src/lxml/doctestcompare.py</pre><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.testcases.html>django.test.testcases</a>. </li></ul></div></div></li><li><div class=fn><a id=f_dependency_ordered></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_dependency_ordered>dependency_ordered</a>(<span class=args>test_databases, dependencies</span>) </span><div class=docline> Reorder test_databases into an order that honors the dependencies described in TEST[DEPENDENCIES]. </div></div><div class=fdetail id=fn_dependency_ordered><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-208>source</a> <a class=sourcelink href=django.test.utils.html#f_dependency_ordered>link</a></div></div></div></li><li><div class=fn><a id=f_extend_sys_path></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_extend_sys_path>extend_sys_path</a>(<span class=args>*paths</span>) <span class=label>@contextmanager</span></span><div class=docline> Context manager to temporarily add paths to sys.path. </div></div><div class=fdetail id=fn_extend_sys_path><div class=decl><div class=def><i> @contextmanager<br></i><span class=kw>def</span> extend_sys_path(<span class=args>*paths</span>) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-684>source</a> <a class=sourcelink href=django.test.utils.html#f_extend_sys_path>link</a></div></div></div></li><li><div class=fn><a id=f_freeze_time></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_freeze_time>freeze_time</a>(<span class=args>t</span>) <span class=label>@contextmanager</span></span><div class=docline> Context manager to temporarily freeze time.time(). This temporarily </div></div><div class=fdetail id=fn_freeze_time><div class=decl><div class=def><i> @contextmanager<br></i><span class=kw>def</span> freeze_time(<span class=args>t</span>) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-753>source</a> <a class=sourcelink href=django.test.utils.html#f_freeze_time>link</a></div><pre>modifies the time function of the time module. Modules which import the
time function directly (e.g. `from time import time`) won&#39;t be affected
This isn&#39;t meant as a public API, but helps reduce some repetitive code in
Django&#39;s test suite.</pre></div></div></li><li><div class=fn><a id=f_get_runner></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=django.test.utils.html#f_get_runner>get_runner</a>(<span class=args>settings, test_runner_class=None</span>) </span></div><div class=fdetail id=fn_get_runner><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-310>source</a> <a class=sourcelink href=django.test.utils.html#f_get_runner>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.core.management.commands.test.html>django.core.management.commands.test</a>. </li></ul></div></div></li><li><div class=fn><a id=f_get_unique_databases_and_mirrors></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_get_unique_databases_and_mirrors>get_unique_databases_and_mirrors</a>(<span class=args>aliases=None</span>) </span><div class=docline> Figure out which databases actually need to be created. </div></div><div class=fdetail id=fn_get_unique_databases_and_mirrors><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-250>source</a> <a class=sourcelink href=django.test.utils.html#f_get_unique_databases_and_mirrors>link</a></div><pre>Deduplicate entries in DATABASES that correspond the same database or are
configured as test mirrors.

Return two values:
- test_databases: ordered mapping of signatures to (name, list of aliases)
                  where all aliases share the same underlying database.
- mirrored_aliases: mapping of mirror aliases to original aliases.</pre></div></div></li><li><div class=fn><a id=f_instrumented_test_render></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_instrumented_test_render>instrumented_test_render</a>(<span class=args>self, context</span>) </span><div class=docline> An instrumented Template render method, providing a signal that can be intercepted by the test Client. </div></div><div class=fdetail id=fn_instrumented_test_render><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-93>source</a> <a class=sourcelink href=django.test.utils.html#f_instrumented_test_render>link</a></div></div></div></li><li><div class=fn><a id=f_isolate_lru_cache></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_isolate_lru_cache>isolate_lru_cache</a>(<span class=args>lru_cache_object</span>) <span class=label>@contextmanager</span></span><div class=docline> Clear the cache of an LRU cache object on entering and exiting. </div></div><div class=fdetail id=fn_isolate_lru_cache><div class=decl><div class=def><i> @contextmanager<br></i><span class=kw>def</span> isolate_lru_cache(<span class=args>lru_cache_object</span>) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-695>source</a> <a class=sourcelink href=django.test.utils.html#f_isolate_lru_cache>link</a></div></div></div></li><li><div class=fn><a id=f_register_lookup></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_register_lookup>register_lookup</a>(<span class=args>field, *lookups, lookup_name=None</span>) <span class=label>@contextmanager</span></span><div class=docline> Context manager to temporarily register lookups on a model field using lookup_name (or the lookup&#39;s lookup_name if not provided). </div></div><div class=fdetail id=fn_register_lookup><div class=decl><div class=def><i> @contextmanager<br></i><span class=kw>def</span> register_lookup( <div class=args style="padding-left: 2em">field,</div><div class=args style="padding-left: 2em">*lookups,</div><div class=args style="padding-left: 2em">lookup_name=<i>None</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-886>source</a> <a class=sourcelink href=django.test.utils.html#f_register_lookup>link</a></div></div></div></li><li><div class=fn><a id=f_require_jinja2></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_require_jinja2>require_jinja2</a>(<span class=args>test_func</span>) </span><div class=docline> Decorator to enable a Jinja2 template engine in addition to the regular Django template engine for a test or skip it if Jinja2 isn&#39;t available. </div></div><div class=fdetail id=fn_require_jinja2><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-769>source</a> <a class=sourcelink href=django.test.utils.html#f_require_jinja2>link</a></div></div></div></li><li><div class=fn><a id=f_setup_databases></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_setup_databases>setup_databases</a>(<span class=args>verbosity, interactive, *, time_keeper=None, keepdb=False, debug_sql=False, ...</span>) </span><div class=docline> Create the test databases. </div></div><div class=fdetail id=fn_setup_databases><div class=decl><div class=def><span class=kw>def</span> setup_databases( <div class=args style="padding-left: 2em">verbosity,</div><div class=args style="padding-left: 2em">interactive,</div><div class=args style="padding-left: 2em">*,</div><div class=args style="padding-left: 2em">time_keeper=<i>None</i>,</div><div class=args style="padding-left: 2em">keepdb=<i>False</i>,</div><div class=args style="padding-left: 2em">debug_sql=<i>False</i>,</div><div class=args style="padding-left: 2em">parallel=<i>0</i>,</div><div class=args style="padding-left: 2em">aliases=<i>None</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-158>source</a> <a class=sourcelink href=django.test.utils.html#f_setup_databases>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.runner.html>django.test.runner</a> as _setup_databases. </li></ul></div></div></li><li><div class=fn><a id=f_setup_test_environment></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_setup_test_environment>setup_test_environment</a>(<span class=args>debug=None</span>) </span><div class=docline> Perform global pre-test setup, such as installing the instrumented template renderer and setting the email backend to the locmem email backend. </div></div><div class=fdetail id=fn_setup_test_environment><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-106>source</a> <a class=sourcelink href=django.test.utils.html#f_setup_test_environment>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.runner.html>django.test.runner</a>. </li></ul></div></div></li><li><div class=fn><a id=f_tag></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_tag>tag</a>(<span class=args>*tags</span>) </span><div class=docline> Decorator to add tags to a test class or method. </div></div><div class=fdetail id=fn_tag><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-874>source</a> <a class=sourcelink href=django.test.utils.html#f_tag>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.selenium.html>django.test.selenium</a>. </li><li> Imported in <a class=symbol href=django.test.html>django.test</a>. </li></ul></div></div></li><li><div class=fn><a id=f_teardown_databases></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_teardown_databases>teardown_databases</a>(<span class=args>old_config, verbosity, parallel=0, keepdb=False</span>) </span><div class=docline> Destroy all the non-mirror databases. </div></div><div class=fdetail id=fn_teardown_databases><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-296>source</a> <a class=sourcelink href=django.test.utils.html#f_teardown_databases>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.runner.html>django.test.runner</a> as _teardown_databases. </li></ul></div></div></li><li><div class=fn><a id=f_teardown_test_environment></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=django.test.utils.html#f_teardown_test_environment>teardown_test_environment</a>(<span class=args></span>) </span><div class=docline> Perform any global post-test teardown, such as restoring the original template renderer and restoring the email sending functions. </div></div><div class=fdetail id=fn_teardown_test_environment><div class=idnt><a class=sourcelink href=source+django.test.utils.py.html#line-142>source</a> <a class=sourcelink href=django.test.utils.html#f_teardown_test_environment>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=django.test.runner.html>django.test.runner</a>. </li></ul></div></div></li></ul><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>