<!DOCTYPE html><html><head><meta charset=utf-8><title>django.contrib.gis.feeds</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9656; apps</a> </li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9662; contrib</a> </li><li><ul><li><a href=django.contrib.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.admindocs.html>&#9656; admindocs</a> </li><li><a href=django.contrib.auth.html>&#9656; auth</a> </li><li><a href=django.contrib.contenttypes.html>&#9656; contenttypes</a> </li><li><a href=django.contrib.flatpages.html>&#9656; flatpages</a> </li><li><a href=django.contrib.gis.html>&#9662; gis</a> </li><li><ul><li><a href=django.contrib.gis.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.gis.apps.html>&#9656; apps</a> </li><li><a href=django.contrib.gis.db.html>&#9656; db</a> </li><li><div class=select><a href=django.contrib.gis.feeds.html>&#9662; feeds</a> </div></li><li><ul><li><a href=django.contrib.gis.feeds.Feed.html> <i>class</i> Feed</a> </li><li><a href=django.contrib.gis.feeds.GeoAtom1Feed.html> <i>class</i> GeoAtom1Feed</a> </li><li><a href=django.contrib.gis.feeds.GeoFeedMixin.html> <i>class</i> GeoFeedMixin</a> </li><li><a href=django.contrib.gis.feeds.GeoRSSFeed.html> <i>class</i> GeoRSSFeed</a> </li><li><a href=django.contrib.gis.feeds.W3CGeoFeed.html> <i>class</i> W3CGeoFeed</a> </li></ul></li><li><a href=django.contrib.gis.forms.html>&#9656; forms</a> </li><li><a href=django.contrib.gis.gdal.html>&#9656; gdal</a> </li><li><a href=django.contrib.gis.geoip2.html>&#9656; geoip2</a> </li><li><a href=django.contrib.gis.geometry.html>&#9656; geometry</a> </li><li><a href=django.contrib.gis.geos.html>&#9656; geos</a> </li><li><a href=django.contrib.gis.management.html>&#9656; management</a> </li><li><a href=django.contrib.gis.measure.html>&#9656; measure</a> </li><li><a href=django.contrib.gis.ptr.html>&#9656; ptr</a> </li><li><a href=django.contrib.gis.serializers.html>&#9656; serializers</a> </li><li><a href=django.contrib.gis.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.contrib.gis.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.gis.utils.html>&#9656; utils</a> </li><li><a href=django.contrib.gis.views.html>&#9656; views</a> </li></ul></li><li><a href=django.contrib.humanize.html>&#9656; humanize</a> </li><li><a href=django.contrib.messages.html>&#9656; messages</a> </li><li><a href=django.contrib.postgres.html>&#9656; postgres</a> </li><li><a href=django.contrib.redirects.html>&#9656; redirects</a> </li><li><a href=django.contrib.sessions.html>&#9656; sessions</a> </li><li><a href=django.contrib.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.sites.html>&#9656; sites</a> </li><li><a href=django.contrib.staticfiles.html>&#9656; staticfiles</a> </li><li><a href=django.contrib.syndication.html>&#9656; syndication</a> </li></ul></li><li><a href=django.core.html>&#9656; core</a> </li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9656; test</a> </li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Source code django/contrib/gis/feeds.py</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.contrib.html>contrib</a>.<a class=symbol href=django.contrib.gis.html>gis</a>.<a class=symbol href=django.contrib.gis.feeds.html>feeds</a></div><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre></div></td><td class=code><div class=highlight><pre><span></span><a name=line-1></a><span class=kn>from</span> <span class=nn>django.contrib.syndication.views</span> <span class=kn>import</span> <span class=n>Feed</span> <span class=k>as</span> <span class=n>BaseFeed</span>
<a name=line-2></a><span class=kn>from</span> <span class=nn>django.utils.feedgenerator</span> <span class=kn>import</span> <span class=n>Atom1Feed</span><span class=p>,</span> <span class=n>Rss201rev2Feed</span>
<a name=line-3></a>
<a name=line-4></a>
<a name=line-5></a><span class=k>class</span> <span class=nc>GeoFeedMixin</span><span class=p>:</span>
<a name=line-6></a>    <span class=sd>&quot;&quot;&quot;</span>
<a name=line-7></a><span class=sd>    This mixin provides the necessary routines for SyndicationFeed subclasses</span>
<a name=line-8></a><span class=sd>    to produce simple GeoRSS or W3C Geo elements.</span>
<a name=line-9></a><span class=sd>    &quot;&quot;&quot;</span>
<a name=line-10></a>
<a name=line-11></a>    <span class=k>def</span> <span class=nf>georss_coords</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>coords</span><span class=p>):</span>
<a name=line-12></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-13></a><span class=sd>        In GeoRSS coordinate pairs are ordered by lat/lon and separated by</span>
<a name=line-14></a><span class=sd>        a single white space. Given a tuple of coordinates, return a string</span>
<a name=line-15></a><span class=sd>        GeoRSS representation.</span>
<a name=line-16></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-17></a>        <span class=k>return</span> <span class=s1>&#39; &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%f</span><span class=s1> </span><span class=si>%f</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>coord</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>coord</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=k>for</span> <span class=n>coord</span> <span class=ow>in</span> <span class=n>coords</span><span class=p>)</span>
<a name=line-18></a>
<a name=line-19></a>    <span class=k>def</span> <span class=nf>add_georss_point</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>,</span> <span class=n>coords</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<a name=line-20></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-21></a><span class=sd>        Adds a GeoRSS point with the given coords using the given handler.</span>
<a name=line-22></a><span class=sd>        Handles the differences between simple GeoRSS and the more popular</span>
<a name=line-23></a><span class=sd>        W3C Geo specification.</span>
<a name=line-24></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-25></a>        <span class=k>if</span> <span class=n>w3c_geo</span><span class=p>:</span>
<a name=line-26></a>            <span class=n>lon</span><span class=p>,</span> <span class=n>lat</span> <span class=o>=</span> <span class=n>coords</span><span class=p>[:</span><span class=mi>2</span><span class=p>]</span>
<a name=line-27></a>            <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;geo:lat&#39;</span><span class=p>,</span> <span class=s1>&#39;</span><span class=si>%f</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=n>lat</span><span class=p>)</span>
<a name=line-28></a>            <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;geo:lon&#39;</span><span class=p>,</span> <span class=s1>&#39;</span><span class=si>%f</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=n>lon</span><span class=p>)</span>
<a name=line-29></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-30></a>            <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;georss:point&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>georss_coords</span><span class=p>((</span><span class=n>coords</span><span class=p>,)))</span>
<a name=line-31></a>
<a name=line-32></a>    <span class=k>def</span> <span class=nf>add_georss_element</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<a name=line-33></a>        <span class=sd>&quot;&quot;&quot;Add a GeoRSS XML element using the given item and handler.&quot;&quot;&quot;</span>
<a name=line-34></a>        <span class=c1># Getting the Geometry object.</span>
<a name=line-35></a>        <span class=n>geom</span> <span class=o>=</span> <span class=n>item</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;geometry&#39;</span><span class=p>)</span>
<a name=line-36></a>        <span class=k>if</span> <span class=n>geom</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-37></a>            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>geom</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
<a name=line-38></a>                <span class=c1># Special case if a tuple/list was passed in.  The tuple may be</span>
<a name=line-39></a>                <span class=c1># a point or a box</span>
<a name=line-40></a>                <span class=n>box_coords</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-41></a>                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>geom</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
<a name=line-42></a>                    <span class=c1># Box: ( (X0, Y0), (X1, Y1) )</span>
<a name=line-43></a>                    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>geom</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a name=line-44></a>                        <span class=n>box_coords</span> <span class=o>=</span> <span class=n>geom</span>
<a name=line-45></a>                    <span class=k>else</span><span class=p>:</span>
<a name=line-46></a>                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s1>&#39;Only should be two sets of coordinates.&#39;</span><span class=p>)</span>
<a name=line-47></a>                <span class=k>else</span><span class=p>:</span>
<a name=line-48></a>                    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>geom</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a name=line-49></a>                        <span class=c1># Point: (X, Y)</span>
<a name=line-50></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_point</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>geom</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=n>w3c_geo</span><span class=p>)</span>
<a name=line-51></a>                    <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>geom</span><span class=p>)</span> <span class=o>==</span> <span class=mi>4</span><span class=p>:</span>
<a name=line-52></a>                        <span class=c1># Box: (X0, Y0, X1, Y1)</span>
<a name=line-53></a>                        <span class=n>box_coords</span> <span class=o>=</span> <span class=p>(</span><span class=n>geom</span><span class=p>[:</span><span class=mi>2</span><span class=p>],</span> <span class=n>geom</span><span class=p>[</span><span class=mi>2</span><span class=p>:])</span>
<a name=line-54></a>                    <span class=k>else</span><span class=p>:</span>
<a name=line-55></a>                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s1>&#39;Only should be 2 or 4 numeric elements.&#39;</span><span class=p>)</span>
<a name=line-56></a>                <span class=c1># If a GeoRSS box was given via tuple.</span>
<a name=line-57></a>                <span class=k>if</span> <span class=n>box_coords</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-58></a>                    <span class=k>if</span> <span class=n>w3c_geo</span><span class=p>:</span>
<a name=line-59></a>                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s1>&#39;Cannot use simple GeoRSS box in W3C Geo feeds.&#39;</span><span class=p>)</span>
<a name=line-60></a>                    <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;georss:box&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>georss_coords</span><span class=p>(</span><span class=n>box_coords</span><span class=p>))</span>
<a name=line-61></a>            <span class=k>else</span><span class=p>:</span>
<a name=line-62></a>                <span class=c1># Getting the lowercase geometry type.</span>
<a name=line-63></a>                <span class=n>gtype</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>geom</span><span class=o>.</span><span class=n>geom_type</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
<a name=line-64></a>                <span class=k>if</span> <span class=n>gtype</span> <span class=o>==</span> <span class=s1>&#39;point&#39;</span><span class=p>:</span>
<a name=line-65></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_point</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>geom</span><span class=o>.</span><span class=n>coords</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=n>w3c_geo</span><span class=p>)</span>
<a name=line-66></a>                <span class=k>else</span><span class=p>:</span>
<a name=line-67></a>                    <span class=k>if</span> <span class=n>w3c_geo</span><span class=p>:</span>
<a name=line-68></a>                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s1>&#39;W3C Geo only supports Point geometries.&#39;</span><span class=p>)</span>
<a name=line-69></a>                    <span class=c1># For formatting consistent w/the GeoRSS simple standard:</span>
<a name=line-70></a>                    <span class=c1># http://georss.org/1.0#simple</span>
<a name=line-71></a>                    <span class=k>if</span> <span class=n>gtype</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;linestring&#39;</span><span class=p>,</span> <span class=s1>&#39;linearring&#39;</span><span class=p>):</span>
<a name=line-72></a>                        <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;georss:line&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>georss_coords</span><span class=p>(</span><span class=n>geom</span><span class=o>.</span><span class=n>coords</span><span class=p>))</span>
<a name=line-73></a>                    <span class=k>elif</span> <span class=n>gtype</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;polygon&#39;</span><span class=p>,):</span>
<a name=line-74></a>                        <span class=c1># Only support the exterior ring.</span>
<a name=line-75></a>                        <span class=n>handler</span><span class=o>.</span><span class=n>addQuickElement</span><span class=p>(</span><span class=s1>&#39;georss:polygon&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>georss_coords</span><span class=p>(</span><span class=n>geom</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>coords</span><span class=p>))</span>
<a name=line-76></a>                    <span class=k>else</span><span class=p>:</span>
<a name=line-77></a>                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s1>&#39;Geometry type &quot;</span><span class=si>%s</span><span class=s1>&quot; not supported.&#39;</span> <span class=o>%</span> <span class=n>geom</span><span class=o>.</span><span class=n>geom_type</span><span class=p>)</span>
<a name=line-78></a>
<a name=line-79></a>
<a name=line-80></a><span class=c1># ### SyndicationFeed subclasses ###</span>
<a name=line-81></a><span class=k>class</span> <span class=nc>GeoRSSFeed</span><span class=p>(</span><span class=n>Rss201rev2Feed</span><span class=p>,</span> <span class=n>GeoFeedMixin</span><span class=p>):</span>
<a name=line-82></a>    <span class=k>def</span> <span class=nf>rss_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-83></a>        <span class=n>attrs</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>rss_attributes</span><span class=p>()</span>
<a name=line-84></a>        <span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;xmlns:georss&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;http://www.georss.org/georss&#39;</span>
<a name=line-85></a>        <span class=k>return</span> <span class=n>attrs</span>
<a name=line-86></a>
<a name=line-87></a>    <span class=k>def</span> <span class=nf>add_item_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<a name=line-88></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_item_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
<a name=line-89></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
<a name=line-90></a>
<a name=line-91></a>    <span class=k>def</span> <span class=nf>add_root_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>):</span>
<a name=line-92></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_root_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
<a name=line-93></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>feed</span><span class=p>)</span>
<a name=line-94></a>
<a name=line-95></a>
<a name=line-96></a><span class=k>class</span> <span class=nc>GeoAtom1Feed</span><span class=p>(</span><span class=n>Atom1Feed</span><span class=p>,</span> <span class=n>GeoFeedMixin</span><span class=p>):</span>
<a name=line-97></a>    <span class=k>def</span> <span class=nf>root_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-98></a>        <span class=n>attrs</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>root_attributes</span><span class=p>()</span>
<a name=line-99></a>        <span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;xmlns:georss&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;http://www.georss.org/georss&#39;</span>
<a name=line-100></a>        <span class=k>return</span> <span class=n>attrs</span>
<a name=line-101></a>
<a name=line-102></a>    <span class=k>def</span> <span class=nf>add_item_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<a name=line-103></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_item_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
<a name=line-104></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
<a name=line-105></a>
<a name=line-106></a>    <span class=k>def</span> <span class=nf>add_root_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>):</span>
<a name=line-107></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_root_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
<a name=line-108></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>feed</span><span class=p>)</span>
<a name=line-109></a>
<a name=line-110></a>
<a name=line-111></a><span class=k>class</span> <span class=nc>W3CGeoFeed</span><span class=p>(</span><span class=n>Rss201rev2Feed</span><span class=p>,</span> <span class=n>GeoFeedMixin</span><span class=p>):</span>
<a name=line-112></a>    <span class=k>def</span> <span class=nf>rss_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-113></a>        <span class=n>attrs</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>rss_attributes</span><span class=p>()</span>
<a name=line-114></a>        <span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;xmlns:geo&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;http://www.w3.org/2003/01/geo/wgs84_pos#&#39;</span>
<a name=line-115></a>        <span class=k>return</span> <span class=n>attrs</span>
<a name=line-116></a>
<a name=line-117></a>    <span class=k>def</span> <span class=nf>add_item_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<a name=line-118></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_item_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
<a name=line-119></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>item</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a name=line-120></a>
<a name=line-121></a>    <span class=k>def</span> <span class=nf>add_root_elements</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>):</span>
<a name=line-122></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>add_root_elements</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
<a name=line-123></a>        <span class=bp>self</span><span class=o>.</span><span class=n>add_georss_element</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>feed</span><span class=p>,</span> <span class=n>w3c_geo</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a name=line-124></a>
<a name=line-125></a>
<a name=line-126></a><span class=c1># ### Feed subclass ###</span>
<a name=line-127></a><span class=k>class</span> <span class=nc>Feed</span><span class=p>(</span><span class=n>BaseFeed</span><span class=p>):</span>
<a name=line-128></a>    <span class=sd>&quot;&quot;&quot;</span>
<a name=line-129></a><span class=sd>    This is a subclass of the `Feed` from `django.contrib.syndication`.</span>
<a name=line-130></a><span class=sd>    This allows users to define a `geometry(obj)` and/or `item_geometry(item)`</span>
<a name=line-131></a><span class=sd>    methods on their own subclasses so that geo-referenced information may</span>
<a name=line-132></a><span class=sd>    placed in the feed.</span>
<a name=line-133></a><span class=sd>    &quot;&quot;&quot;</span>
<a name=line-134></a>    <span class=n>feed_type</span> <span class=o>=</span> <span class=n>GeoRSSFeed</span>
<a name=line-135></a>
<a name=line-136></a>    <span class=k>def</span> <span class=nf>feed_extra_kwargs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>):</span>
<a name=line-137></a>        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;geometry&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_dynamic_attr</span><span class=p>(</span><span class=s1>&#39;geometry&#39;</span><span class=p>,</span> <span class=n>obj</span><span class=p>)}</span>
<a name=line-138></a>
<a name=line-139></a>    <span class=k>def</span> <span class=nf>item_extra_kwargs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<a name=line-140></a>        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;geometry&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_dynamic_attr</span><span class=p>(</span><span class=s1>&#39;item_geometry&#39;</span><span class=p>,</span> <span class=n>item</span><span class=p>)}</span>
</pre></div></td></tr></table><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>