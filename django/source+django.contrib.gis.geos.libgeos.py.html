<!DOCTYPE html><html><head><meta charset=utf-8><title>django.contrib.gis.geos.libgeos</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9656; apps</a> </li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9662; contrib</a> </li><li><ul><li><a href=django.contrib.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.admindocs.html>&#9656; admindocs</a> </li><li><a href=django.contrib.auth.html>&#9656; auth</a> </li><li><a href=django.contrib.contenttypes.html>&#9656; contenttypes</a> </li><li><a href=django.contrib.flatpages.html>&#9656; flatpages</a> </li><li><a href=django.contrib.gis.html>&#9662; gis</a> </li><li><ul><li><a href=django.contrib.gis.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.gis.apps.html>&#9656; apps</a> </li><li><a href=django.contrib.gis.db.html>&#9656; db</a> </li><li><a href=django.contrib.gis.feeds.html>&#9656; feeds</a> </li><li><a href=django.contrib.gis.forms.html>&#9656; forms</a> </li><li><a href=django.contrib.gis.gdal.html>&#9656; gdal</a> </li><li><a href=django.contrib.gis.geoip2.html>&#9656; geoip2</a> </li><li><a href=django.contrib.gis.geometry.html>&#9656; geometry</a> </li><li><a href=django.contrib.gis.geos.html>&#9662; geos</a> </li><li><ul><li><a href=django.contrib.gis.geos.base.html>&#9656; base</a> </li><li><a href=django.contrib.gis.geos.collections.html>&#9656; collections</a> </li><li><a href=django.contrib.gis.geos.coordseq.html>&#9656; coordseq</a> </li><li><a href=django.contrib.gis.geos.error.html>&#9656; error</a> </li><li><a href=django.contrib.gis.geos.factory.html>&#9656; factory</a> </li><li><a href=django.contrib.gis.geos.geometry.html>&#9656; geometry</a> </li><li><a href=django.contrib.gis.geos.io.html>&#9656; io</a> </li><li><div class=select><a href=django.contrib.gis.geos.libgeos.html>&#9662; libgeos</a> </div></li><li><ul><li><a href=django.contrib.gis.geos.libgeos.GEOSContextHandle_t.html> <i>class</i> GEOSContextHandle_t</a> </li><li><a href=django.contrib.gis.geos.libgeos.GEOSCoordSeq_t.html> <i>class</i> GEOSCoordSeq_t</a> </li><li><a href=django.contrib.gis.geos.libgeos.GEOSFuncFactory.html> <i>class</i> GEOSFuncFactory</a> </li><li><a href=django.contrib.gis.geos.libgeos.GEOSGeom_t.html> <i>class</i> GEOSGeom_t</a> </li><li><a href=django.contrib.gis.geos.libgeos.GEOSPrepGeom_t.html> <i>class</i> GEOSPrepGeom_t</a> </li></ul></li><li><a href=django.contrib.gis.geos.linestring.html>&#9656; linestring</a> </li><li><a href=django.contrib.gis.geos.mutable_list.html>&#9656; mutable_list</a> </li><li><a href=django.contrib.gis.geos.point.html>&#9656; point</a> </li><li><a href=django.contrib.gis.geos.polygon.html>&#9656; polygon</a> </li><li><a href=django.contrib.gis.geos.prepared.html>&#9656; prepared</a> </li><li><a href=django.contrib.gis.geos.prototypes.html>&#9656; prototypes</a> </li></ul></li><li><a href=django.contrib.gis.management.html>&#9656; management</a> </li><li><a href=django.contrib.gis.measure.html>&#9656; measure</a> </li><li><a href=django.contrib.gis.ptr.html>&#9656; ptr</a> </li><li><a href=django.contrib.gis.serializers.html>&#9656; serializers</a> </li><li><a href=django.contrib.gis.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.contrib.gis.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.gis.utils.html>&#9656; utils</a> </li><li><a href=django.contrib.gis.views.html>&#9656; views</a> </li></ul></li><li><a href=django.contrib.humanize.html>&#9656; humanize</a> </li><li><a href=django.contrib.messages.html>&#9656; messages</a> </li><li><a href=django.contrib.postgres.html>&#9656; postgres</a> </li><li><a href=django.contrib.redirects.html>&#9656; redirects</a> </li><li><a href=django.contrib.sessions.html>&#9656; sessions</a> </li><li><a href=django.contrib.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.sites.html>&#9656; sites</a> </li><li><a href=django.contrib.staticfiles.html>&#9656; staticfiles</a> </li><li><a href=django.contrib.syndication.html>&#9656; syndication</a> </li></ul></li><li><a href=django.core.html>&#9656; core</a> </li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9656; test</a> </li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Source code django/contrib/gis/geos/libgeos.py</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.contrib.html>contrib</a>.<a class=symbol href=django.contrib.gis.html>gis</a>.<a class=symbol href=django.contrib.gis.geos.html>geos</a>.<a class=symbol href=django.contrib.gis.geos.libgeos.html>libgeos</a></div><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172</pre></div></td><td class=code><div class=highlight><pre><span></span><a name=line-1></a><span class=sd>&quot;&quot;&quot;</span>
<a name=line-2></a><span class=sd> This module houses the ctypes initialization procedures, as well</span>
<a name=line-3></a><span class=sd> as the notice and error handler function callbacks (get called</span>
<a name=line-4></a><span class=sd> when an error occurs in GEOS).</span>
<a name=line-5></a>
<a name=line-6></a><span class=sd> This module also houses GEOS Pointer utilities, including</span>
<a name=line-7></a><span class=sd> get_pointer_arr(), and GEOM_PTR.</span>
<a name=line-8></a><span class=sd>&quot;&quot;&quot;</span>
<a name=line-9></a><span class=kn>import</span> <span class=nn>logging</span>
<a name=line-10></a><span class=kn>import</span> <span class=nn>os</span>
<a name=line-11></a><span class=kn>from</span> <span class=nn>ctypes</span> <span class=kn>import</span> <span class=n>CDLL</span><span class=p>,</span> <span class=n>CFUNCTYPE</span><span class=p>,</span> <span class=n>POINTER</span><span class=p>,</span> <span class=n>Structure</span><span class=p>,</span> <span class=n>c_char_p</span>
<a name=line-12></a><span class=kn>from</span> <span class=nn>ctypes.util</span> <span class=kn>import</span> <span class=n>find_library</span>
<a name=line-13></a>
<a name=line-14></a><span class=kn>from</span> <span class=nn>django.core.exceptions</span> <span class=kn>import</span> <span class=n>ImproperlyConfigured</span>
<a name=line-15></a><span class=kn>from</span> <span class=nn>django.utils.functional</span> <span class=kn>import</span> <span class=n>SimpleLazyObject</span><span class=p>,</span> <span class=n>cached_property</span>
<a name=line-16></a><span class=kn>from</span> <span class=nn>django.utils.version</span> <span class=kn>import</span> <span class=n>get_version_tuple</span>
<a name=line-17></a>
<a name=line-18></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s1>&#39;django.contrib.gis&#39;</span><span class=p>)</span>
<a name=line-19></a>
<a name=line-20></a>
<a name=line-21></a><span class=k>def</span> <span class=nf>load_geos</span><span class=p>():</span>
<a name=line-22></a>    <span class=c1># Custom library path set?</span>
<a name=line-23></a>    <span class=k>try</span><span class=p>:</span>
<a name=line-24></a>        <span class=kn>from</span> <span class=nn>django.conf</span> <span class=kn>import</span> <span class=n>settings</span>
<a name=line-25></a>        <span class=n>lib_path</span> <span class=o>=</span> <span class=n>settings</span><span class=o>.</span><span class=n>GEOS_LIBRARY_PATH</span>
<a name=line-26></a>    <span class=k>except</span> <span class=p>(</span><span class=ne>AttributeError</span><span class=p>,</span> <span class=ne>ImportError</span><span class=p>,</span> <span class=n>ImproperlyConfigured</span><span class=p>,</span> <span class=ne>OSError</span><span class=p>):</span>
<a name=line-27></a>        <span class=n>lib_path</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-28></a>
<a name=line-29></a>    <span class=c1># Setting the appropriate names for the GEOS-C library.</span>
<a name=line-30></a>    <span class=k>if</span> <span class=n>lib_path</span><span class=p>:</span>
<a name=line-31></a>        <span class=n>lib_names</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-32></a>    <span class=k>elif</span> <span class=n>os</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;nt&#39;</span><span class=p>:</span>
<a name=line-33></a>        <span class=c1># Windows NT libraries</span>
<a name=line-34></a>        <span class=n>lib_names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;geos_c&#39;</span><span class=p>,</span> <span class=s1>&#39;libgeos_c-1&#39;</span><span class=p>]</span>
<a name=line-35></a>    <span class=k>elif</span> <span class=n>os</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;posix&#39;</span><span class=p>:</span>
<a name=line-36></a>        <span class=c1># *NIX libraries</span>
<a name=line-37></a>        <span class=n>lib_names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;geos_c&#39;</span><span class=p>,</span> <span class=s1>&#39;GEOS&#39;</span><span class=p>]</span>
<a name=line-38></a>    <span class=k>else</span><span class=p>:</span>
<a name=line-39></a>        <span class=k>raise</span> <span class=ne>ImportError</span><span class=p>(</span><span class=s1>&#39;Unsupported OS &quot;</span><span class=si>%s</span><span class=s1>&quot;&#39;</span> <span class=o>%</span> <span class=n>os</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
<a name=line-40></a>
<a name=line-41></a>    <span class=c1># Using the ctypes `find_library` utility to find the path to the GEOS</span>
<a name=line-42></a>    <span class=c1># shared library.  This is better than manually specifying each library name</span>
<a name=line-43></a>    <span class=c1># and extension (e.g., libgeos_c.[so|so.1|dylib].).</span>
<a name=line-44></a>    <span class=k>if</span> <span class=n>lib_names</span><span class=p>:</span>
<a name=line-45></a>        <span class=k>for</span> <span class=n>lib_name</span> <span class=ow>in</span> <span class=n>lib_names</span><span class=p>:</span>
<a name=line-46></a>            <span class=n>lib_path</span> <span class=o>=</span> <span class=n>find_library</span><span class=p>(</span><span class=n>lib_name</span><span class=p>)</span>
<a name=line-47></a>            <span class=k>if</span> <span class=n>lib_path</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-48></a>                <span class=k>break</span>
<a name=line-49></a>
<a name=line-50></a>    <span class=c1># No GEOS library could be found.</span>
<a name=line-51></a>    <span class=k>if</span> <span class=n>lib_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-52></a>        <span class=k>raise</span> <span class=ne>ImportError</span><span class=p>(</span>
<a name=line-53></a>            <span class=s1>&#39;Could not find the GEOS library (tried &quot;</span><span class=si>%s</span><span class=s1>&quot;). &#39;</span>
<a name=line-54></a>            <span class=s1>&#39;Try setting GEOS_LIBRARY_PATH in your settings.&#39;</span> <span class=o>%</span>
<a name=line-55></a>            <span class=s1>&#39;&quot;, &quot;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>lib_names</span><span class=p>)</span>
<a name=line-56></a>        <span class=p>)</span>
<a name=line-57></a>    <span class=c1># Getting the GEOS C library.  The C interface (CDLL) is used for</span>
<a name=line-58></a>    <span class=c1># both *NIX and Windows.</span>
<a name=line-59></a>    <span class=c1># See the GEOS C API source code for more details on the library function calls:</span>
<a name=line-60></a>    <span class=c1># https://geos.osgeo.org/doxygen/geos__c_8h_source.html</span>
<a name=line-61></a>    <span class=n>_lgeos</span> <span class=o>=</span> <span class=n>CDLL</span><span class=p>(</span><span class=n>lib_path</span><span class=p>)</span>
<a name=line-62></a>    <span class=c1># Here we set up the prototypes for the initGEOS_r and finishGEOS_r</span>
<a name=line-63></a>    <span class=c1># routines.  These functions aren&#39;t actually called until they are</span>
<a name=line-64></a>    <span class=c1># attached to a GEOS context handle -- this actually occurs in</span>
<a name=line-65></a>    <span class=c1># geos/prototypes/threadsafe.py.</span>
<a name=line-66></a>    <span class=n>_lgeos</span><span class=o>.</span><span class=n>initGEOS_r</span><span class=o>.</span><span class=n>restype</span> <span class=o>=</span> <span class=n>CONTEXT_PTR</span>
<a name=line-67></a>    <span class=n>_lgeos</span><span class=o>.</span><span class=n>finishGEOS_r</span><span class=o>.</span><span class=n>argtypes</span> <span class=o>=</span> <span class=p>[</span><span class=n>CONTEXT_PTR</span><span class=p>]</span>
<a name=line-68></a>    <span class=c1># Set restype for compatibility across 32 and 64-bit platforms.</span>
<a name=line-69></a>    <span class=n>_lgeos</span><span class=o>.</span><span class=n>GEOSversion</span><span class=o>.</span><span class=n>restype</span> <span class=o>=</span> <span class=n>c_char_p</span>
<a name=line-70></a>    <span class=k>return</span> <span class=n>_lgeos</span>
<a name=line-71></a>
<a name=line-72></a>
<a name=line-73></a><span class=c1># The notice and error handler C function callback definitions.</span>
<a name=line-74></a><span class=c1># Supposed to mimic the GEOS message handler (C below):</span>
<a name=line-75></a><span class=c1>#  typedef void (*GEOSMessageHandler)(const char *fmt, ...);</span>
<a name=line-76></a><span class=n>NOTICEFUNC</span> <span class=o>=</span> <span class=n>CFUNCTYPE</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=n>c_char_p</span><span class=p>,</span> <span class=n>c_char_p</span><span class=p>)</span>
<a name=line-77></a>
<a name=line-78></a>
<a name=line-79></a><span class=k>def</span> <span class=nf>notice_h</span><span class=p>(</span><span class=n>fmt</span><span class=p>,</span> <span class=n>lst</span><span class=p>):</span>
<a name=line-80></a>    <span class=n>fmt</span><span class=p>,</span> <span class=n>lst</span> <span class=o>=</span> <span class=n>fmt</span><span class=o>.</span><span class=n>decode</span><span class=p>(),</span> <span class=n>lst</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
<a name=line-81></a>    <span class=k>try</span><span class=p>:</span>
<a name=line-82></a>        <span class=n>warn_msg</span> <span class=o>=</span> <span class=n>fmt</span> <span class=o>%</span> <span class=n>lst</span>
<a name=line-83></a>    <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
<a name=line-84></a>        <span class=n>warn_msg</span> <span class=o>=</span> <span class=n>fmt</span>
<a name=line-85></a>    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s1>&#39;GEOS_NOTICE: </span><span class=si>%s</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>warn_msg</span><span class=p>)</span>
<a name=line-86></a>
<a name=line-87></a>
<a name=line-88></a><span class=n>notice_h</span> <span class=o>=</span> <span class=n>NOTICEFUNC</span><span class=p>(</span><span class=n>notice_h</span><span class=p>)</span>
<a name=line-89></a>
<a name=line-90></a><span class=n>ERRORFUNC</span> <span class=o>=</span> <span class=n>CFUNCTYPE</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=n>c_char_p</span><span class=p>,</span> <span class=n>c_char_p</span><span class=p>)</span>
<a name=line-91></a>
<a name=line-92></a>
<a name=line-93></a><span class=k>def</span> <span class=nf>error_h</span><span class=p>(</span><span class=n>fmt</span><span class=p>,</span> <span class=n>lst</span><span class=p>):</span>
<a name=line-94></a>    <span class=n>fmt</span><span class=p>,</span> <span class=n>lst</span> <span class=o>=</span> <span class=n>fmt</span><span class=o>.</span><span class=n>decode</span><span class=p>(),</span> <span class=n>lst</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
<a name=line-95></a>    <span class=k>try</span><span class=p>:</span>
<a name=line-96></a>        <span class=n>err_msg</span> <span class=o>=</span> <span class=n>fmt</span> <span class=o>%</span> <span class=n>lst</span>
<a name=line-97></a>    <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
<a name=line-98></a>        <span class=n>err_msg</span> <span class=o>=</span> <span class=n>fmt</span>
<a name=line-99></a>    <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s1>&#39;GEOS_ERROR: </span><span class=si>%s</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>err_msg</span><span class=p>)</span>
<a name=line-100></a>
<a name=line-101></a>
<a name=line-102></a><span class=n>error_h</span> <span class=o>=</span> <span class=n>ERRORFUNC</span><span class=p>(</span><span class=n>error_h</span><span class=p>)</span>
<a name=line-103></a>
<a name=line-104></a><span class=c1># #### GEOS Geometry C data structures, and utility functions. ####</span>
<a name=line-105></a>
<a name=line-106></a>
<a name=line-107></a><span class=c1># Opaque GEOS geometry structures, used for GEOM_PTR and CS_PTR</span>
<a name=line-108></a><span class=k>class</span> <span class=nc>GEOSGeom_t</span><span class=p>(</span><span class=n>Structure</span><span class=p>):</span>
<a name=line-109></a>    <span class=k>pass</span>
<a name=line-110></a>
<a name=line-111></a>
<a name=line-112></a><span class=k>class</span> <span class=nc>GEOSPrepGeom_t</span><span class=p>(</span><span class=n>Structure</span><span class=p>):</span>
<a name=line-113></a>    <span class=k>pass</span>
<a name=line-114></a>
<a name=line-115></a>
<a name=line-116></a><span class=k>class</span> <span class=nc>GEOSCoordSeq_t</span><span class=p>(</span><span class=n>Structure</span><span class=p>):</span>
<a name=line-117></a>    <span class=k>pass</span>
<a name=line-118></a>
<a name=line-119></a>
<a name=line-120></a><span class=k>class</span> <span class=nc>GEOSContextHandle_t</span><span class=p>(</span><span class=n>Structure</span><span class=p>):</span>
<a name=line-121></a>    <span class=k>pass</span>
<a name=line-122></a>
<a name=line-123></a>
<a name=line-124></a><span class=c1># Pointers to opaque GEOS geometry structures.</span>
<a name=line-125></a><span class=n>GEOM_PTR</span> <span class=o>=</span> <span class=n>POINTER</span><span class=p>(</span><span class=n>GEOSGeom_t</span><span class=p>)</span>
<a name=line-126></a><span class=n>PREPGEOM_PTR</span> <span class=o>=</span> <span class=n>POINTER</span><span class=p>(</span><span class=n>GEOSPrepGeom_t</span><span class=p>)</span>
<a name=line-127></a><span class=n>CS_PTR</span> <span class=o>=</span> <span class=n>POINTER</span><span class=p>(</span><span class=n>GEOSCoordSeq_t</span><span class=p>)</span>
<a name=line-128></a><span class=n>CONTEXT_PTR</span> <span class=o>=</span> <span class=n>POINTER</span><span class=p>(</span><span class=n>GEOSContextHandle_t</span><span class=p>)</span>
<a name=line-129></a>
<a name=line-130></a>
<a name=line-131></a><span class=n>lgeos</span> <span class=o>=</span> <span class=n>SimpleLazyObject</span><span class=p>(</span><span class=n>load_geos</span><span class=p>)</span>
<a name=line-132></a>
<a name=line-133></a>
<a name=line-134></a><span class=k>class</span> <span class=nc>GEOSFuncFactory</span><span class=p>:</span>
<a name=line-135></a>    <span class=sd>&quot;&quot;&quot;</span>
<a name=line-136></a><span class=sd>    Lazy loading of GEOS functions.</span>
<a name=line-137></a><span class=sd>    &quot;&quot;&quot;</span>
<a name=line-138></a>    <span class=n>argtypes</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-139></a>    <span class=n>restype</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-140></a>    <span class=n>errcheck</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-141></a>
<a name=line-142></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func_name</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>restype</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>errcheck</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>argtypes</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a name=line-143></a>        <span class=bp>self</span><span class=o>.</span><span class=n>func_name</span> <span class=o>=</span> <span class=n>func_name</span>
<a name=line-144></a>        <span class=k>if</span> <span class=n>restype</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-145></a>            <span class=bp>self</span><span class=o>.</span><span class=n>restype</span> <span class=o>=</span> <span class=n>restype</span>
<a name=line-146></a>        <span class=k>if</span> <span class=n>errcheck</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-147></a>            <span class=bp>self</span><span class=o>.</span><span class=n>errcheck</span> <span class=o>=</span> <span class=n>errcheck</span>
<a name=line-148></a>        <span class=k>if</span> <span class=n>argtypes</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-149></a>            <span class=bp>self</span><span class=o>.</span><span class=n>argtypes</span> <span class=o>=</span> <span class=n>argtypes</span>
<a name=line-150></a>
<a name=line-151></a>    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
<a name=line-152></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span>
<a name=line-153></a>
<a name=line-154></a>    <span class=nd>@cached_property</span>
<a name=line-155></a>    <span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-156></a>        <span class=kn>from</span> <span class=nn>django.contrib.gis.geos.prototypes.threadsafe</span> <span class=kn>import</span> <span class=n>GEOSFunc</span>
<a name=line-157></a>        <span class=n>func</span> <span class=o>=</span> <span class=n>GEOSFunc</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>func_name</span><span class=p>)</span>
<a name=line-158></a>        <span class=n>func</span><span class=o>.</span><span class=n>argtypes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>argtypes</span> <span class=ow>or</span> <span class=p>[]</span>
<a name=line-159></a>        <span class=n>func</span><span class=o>.</span><span class=n>restype</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>restype</span>
<a name=line-160></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>errcheck</span><span class=p>:</span>
<a name=line-161></a>            <span class=n>func</span><span class=o>.</span><span class=n>errcheck</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>errcheck</span>
<a name=line-162></a>        <span class=k>return</span> <span class=n>func</span>
<a name=line-163></a>
<a name=line-164></a>
<a name=line-165></a><span class=k>def</span> <span class=nf>geos_version</span><span class=p>():</span>
<a name=line-166></a>    <span class=sd>&quot;&quot;&quot;Return the string version of the GEOS library.&quot;&quot;&quot;</span>
<a name=line-167></a>    <span class=k>return</span> <span class=n>lgeos</span><span class=o>.</span><span class=n>GEOSversion</span><span class=p>()</span>
<a name=line-168></a>
<a name=line-169></a>
<a name=line-170></a><span class=k>def</span> <span class=nf>geos_version_tuple</span><span class=p>():</span>
<a name=line-171></a>    <span class=sd>&quot;&quot;&quot;Return the GEOS version as a tuple (major, minor, subminor).&quot;&quot;&quot;</span>
<a name=line-172></a>    <span class=k>return</span> <span class=n>get_version_tuple</span><span class=p>(</span><span class=n>geos_version</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</pre></div></td></tr></table><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>