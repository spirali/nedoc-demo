<!DOCTYPE html><html><head><meta charset=utf-8><title>django.contrib.gis.geos.linestring</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9656; apps</a> </li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9662; contrib</a> </li><li><ul><li><a href=django.contrib.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.admindocs.html>&#9656; admindocs</a> </li><li><a href=django.contrib.auth.html>&#9656; auth</a> </li><li><a href=django.contrib.contenttypes.html>&#9656; contenttypes</a> </li><li><a href=django.contrib.flatpages.html>&#9656; flatpages</a> </li><li><a href=django.contrib.gis.html>&#9662; gis</a> </li><li><ul><li><a href=django.contrib.gis.admin.html>&#9656; admin</a> </li><li><a href=django.contrib.gis.apps.html>&#9656; apps</a> </li><li><a href=django.contrib.gis.db.html>&#9656; db</a> </li><li><a href=django.contrib.gis.feeds.html>&#9656; feeds</a> </li><li><a href=django.contrib.gis.forms.html>&#9656; forms</a> </li><li><a href=django.contrib.gis.gdal.html>&#9656; gdal</a> </li><li><a href=django.contrib.gis.geoip2.html>&#9656; geoip2</a> </li><li><a href=django.contrib.gis.geometry.html>&#9656; geometry</a> </li><li><a href=django.contrib.gis.geos.html>&#9662; geos</a> </li><li><ul><li><a href=django.contrib.gis.geos.base.html>&#9656; base</a> </li><li><a href=django.contrib.gis.geos.collections.html>&#9656; collections</a> </li><li><a href=django.contrib.gis.geos.coordseq.html>&#9656; coordseq</a> </li><li><a href=django.contrib.gis.geos.error.html>&#9656; error</a> </li><li><a href=django.contrib.gis.geos.factory.html>&#9656; factory</a> </li><li><a href=django.contrib.gis.geos.geometry.html>&#9656; geometry</a> </li><li><a href=django.contrib.gis.geos.io.html>&#9656; io</a> </li><li><a href=django.contrib.gis.geos.libgeos.html>&#9656; libgeos</a> </li><li><div class=select><a href=django.contrib.gis.geos.linestring.html>&#9662; linestring</a> </div></li><li><ul><li><a href=django.contrib.gis.geos.linestring.LineString.html> <i>class</i> LineString</a> </li><li><a href=django.contrib.gis.geos.linestring.LinearRing.html> <i>class</i> LinearRing</a> </li></ul></li><li><a href=django.contrib.gis.geos.mutable_list.html>&#9656; mutable_list</a> </li><li><a href=django.contrib.gis.geos.point.html>&#9656; point</a> </li><li><a href=django.contrib.gis.geos.polygon.html>&#9656; polygon</a> </li><li><a href=django.contrib.gis.geos.prepared.html>&#9656; prepared</a> </li><li><a href=django.contrib.gis.geos.prototypes.html>&#9656; prototypes</a> </li></ul></li><li><a href=django.contrib.gis.management.html>&#9656; management</a> </li><li><a href=django.contrib.gis.measure.html>&#9656; measure</a> </li><li><a href=django.contrib.gis.ptr.html>&#9656; ptr</a> </li><li><a href=django.contrib.gis.serializers.html>&#9656; serializers</a> </li><li><a href=django.contrib.gis.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.contrib.gis.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.gis.utils.html>&#9656; utils</a> </li><li><a href=django.contrib.gis.views.html>&#9656; views</a> </li></ul></li><li><a href=django.contrib.humanize.html>&#9656; humanize</a> </li><li><a href=django.contrib.messages.html>&#9656; messages</a> </li><li><a href=django.contrib.postgres.html>&#9656; postgres</a> </li><li><a href=django.contrib.redirects.html>&#9656; redirects</a> </li><li><a href=django.contrib.sessions.html>&#9656; sessions</a> </li><li><a href=django.contrib.sitemaps.html>&#9656; sitemaps</a> </li><li><a href=django.contrib.sites.html>&#9656; sites</a> </li><li><a href=django.contrib.staticfiles.html>&#9656; staticfiles</a> </li><li><a href=django.contrib.syndication.html>&#9656; syndication</a> </li></ul></li><li><a href=django.core.html>&#9656; core</a> </li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9656; test</a> </li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Source code django/contrib/gis/geos/linestring.py</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.contrib.html>contrib</a>.<a class=symbol href=django.contrib.gis.html>gis</a>.<a class=symbol href=django.contrib.gis.geos.html>geos</a>.<a class=symbol href=django.contrib.gis.geos.linestring.html>linestring</a></div><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre></div></td><td class=code><div class=highlight><pre><span></span><a name=line-1></a><span class=kn>from</span> <span class=nn>django.contrib.gis.geos</span> <span class=kn>import</span> <span class=n>prototypes</span> <span class=k>as</span> <span class=n>capi</span>
<a name=line-2></a><span class=kn>from</span> <span class=nn>django.contrib.gis.geos.coordseq</span> <span class=kn>import</span> <span class=n>GEOSCoordSeq</span>
<a name=line-3></a><span class=kn>from</span> <span class=nn>django.contrib.gis.geos.error</span> <span class=kn>import</span> <span class=n>GEOSException</span>
<a name=line-4></a><span class=kn>from</span> <span class=nn>django.contrib.gis.geos.geometry</span> <span class=kn>import</span> <span class=n>GEOSGeometry</span><span class=p>,</span> <span class=n>LinearGeometryMixin</span>
<a name=line-5></a><span class=kn>from</span> <span class=nn>django.contrib.gis.geos.point</span> <span class=kn>import</span> <span class=n>Point</span>
<a name=line-6></a><span class=kn>from</span> <span class=nn>django.contrib.gis.shortcuts</span> <span class=kn>import</span> <span class=n>numpy</span>
<a name=line-7></a>
<a name=line-8></a>
<a name=line-9></a><span class=k>class</span> <span class=nc>LineString</span><span class=p>(</span><span class=n>LinearGeometryMixin</span><span class=p>,</span> <span class=n>GEOSGeometry</span><span class=p>):</span>
<a name=line-10></a>    <span class=n>_init_func</span> <span class=o>=</span> <span class=n>capi</span><span class=o>.</span><span class=n>create_linestring</span>
<a name=line-11></a>    <span class=n>_minlength</span> <span class=o>=</span> <span class=mi>2</span>
<a name=line-12></a>    <span class=n>has_cs</span> <span class=o>=</span> <span class=kc>True</span>
<a name=line-13></a>
<a name=line-14></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a name=line-15></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-16></a><span class=sd>        Initialize on the given sequence -- may take lists, tuples, NumPy arrays</span>
<a name=line-17></a><span class=sd>        of X,Y pairs, or Point objects.  If Point objects are used, ownership is</span>
<a name=line-18></a><span class=sd>        _not_ transferred to the LineString object.</span>
<a name=line-19></a>
<a name=line-20></a><span class=sd>        Examples:</span>
<a name=line-21></a><span class=sd>         ls = LineString((1, 1), (2, 2))</span>
<a name=line-22></a><span class=sd>         ls = LineString([(1, 1), (2, 2)])</span>
<a name=line-23></a><span class=sd>         ls = LineString(array([(1, 1), (2, 2)]))</span>
<a name=line-24></a><span class=sd>         ls = LineString(Point(1, 1), Point(2, 2))</span>
<a name=line-25></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-26></a>        <span class=c1># If only one argument provided, set the coords array appropriately</span>
<a name=line-27></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-28></a>            <span class=n>coords</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<a name=line-29></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-30></a>            <span class=n>coords</span> <span class=o>=</span> <span class=n>args</span>
<a name=line-31></a>
<a name=line-32></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>coords</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>))</span> <span class=ow>or</span> <span class=n>numpy</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>coords</span><span class=p>,</span> <span class=n>numpy</span><span class=o>.</span><span class=n>ndarray</span><span class=p>)):</span>
<a name=line-33></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Invalid initialization input for LineStrings.&#39;</span><span class=p>)</span>
<a name=line-34></a>
<a name=line-35></a>        <span class=c1># If SRID was passed in with the keyword arguments</span>
<a name=line-36></a>        <span class=n>srid</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;srid&#39;</span><span class=p>)</span>
<a name=line-37></a>
<a name=line-38></a>        <span class=n>ncoords</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>coords</span><span class=p>)</span>
<a name=line-39></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>ncoords</span><span class=p>:</span>
<a name=line-40></a>            <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_init_func</span><span class=p>(</span><span class=kc>None</span><span class=p>),</span> <span class=n>srid</span><span class=o>=</span><span class=n>srid</span><span class=p>)</span>
<a name=line-41></a>            <span class=k>return</span>
<a name=line-42></a>
<a name=line-43></a>        <span class=k>if</span> <span class=n>ncoords</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>_minlength</span><span class=p>:</span>
<a name=line-44></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a name=line-45></a>                <span class=s1>&#39;</span><span class=si>%s</span><span class=s1> requires at least </span><span class=si>%d</span><span class=s1> points, got </span><span class=si>%s</span><span class=s1>.&#39;</span> <span class=o>%</span> <span class=p>(</span>
<a name=line-46></a>                    <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
<a name=line-47></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>_minlength</span><span class=p>,</span>
<a name=line-48></a>                    <span class=n>ncoords</span><span class=p>,</span>
<a name=line-49></a>                <span class=p>)</span>
<a name=line-50></a>            <span class=p>)</span>
<a name=line-51></a>
<a name=line-52></a>        <span class=n>numpy_coords</span> <span class=o>=</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>coords</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>))</span>
<a name=line-53></a>        <span class=k>if</span> <span class=n>numpy_coords</span><span class=p>:</span>
<a name=line-54></a>            <span class=n>shape</span> <span class=o>=</span> <span class=n>coords</span><span class=o>.</span><span class=n>shape</span>  <span class=c1># Using numpy&#39;s shape.</span>
<a name=line-55></a>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>shape</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
<a name=line-56></a>                <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Too many dimensions.&#39;</span><span class=p>)</span>
<a name=line-57></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_checkdim</span><span class=p>(</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<a name=line-58></a>            <span class=n>ndim</span> <span class=o>=</span> <span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<a name=line-59></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-60></a>            <span class=c1># Getting the number of coords and the number of dimensions -- which</span>
<a name=line-61></a>            <span class=c1>#  must stay the same, e.g., no LineString((1, 2), (1, 2, 3)).</span>
<a name=line-62></a>            <span class=n>ndim</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-63></a>            <span class=c1># Incrementing through each of the coordinates and verifying</span>
<a name=line-64></a>            <span class=k>for</span> <span class=n>coord</span> <span class=ow>in</span> <span class=n>coords</span><span class=p>:</span>
<a name=line-65></a>                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>coord</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=n>Point</span><span class=p>)):</span>
<a name=line-66></a>                    <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Each coordinate should be a sequence (list or tuple)&#39;</span><span class=p>)</span>
<a name=line-67></a>
<a name=line-68></a>                <span class=k>if</span> <span class=n>ndim</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-69></a>                    <span class=n>ndim</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>coord</span><span class=p>)</span>
<a name=line-70></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>_checkdim</span><span class=p>(</span><span class=n>ndim</span><span class=p>)</span>
<a name=line-71></a>                <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>coord</span><span class=p>)</span> <span class=o>!=</span> <span class=n>ndim</span><span class=p>:</span>
<a name=line-72></a>                    <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Dimension mismatch.&#39;</span><span class=p>)</span>
<a name=line-73></a>
<a name=line-74></a>        <span class=c1># Creating a coordinate sequence object because it is easier to</span>
<a name=line-75></a>        <span class=c1># set the points using its methods.</span>
<a name=line-76></a>        <span class=n>cs</span> <span class=o>=</span> <span class=n>GEOSCoordSeq</span><span class=p>(</span><span class=n>capi</span><span class=o>.</span><span class=n>create_cs</span><span class=p>(</span><span class=n>ncoords</span><span class=p>,</span> <span class=n>ndim</span><span class=p>),</span> <span class=n>z</span><span class=o>=</span><span class=nb>bool</span><span class=p>(</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>3</span><span class=p>))</span>
<a name=line-77></a>        <span class=n>point_setter</span> <span class=o>=</span> <span class=n>cs</span><span class=o>.</span><span class=n>_set_point_3d</span> <span class=k>if</span> <span class=n>ndim</span> <span class=o>==</span> <span class=mi>3</span> <span class=k>else</span> <span class=n>cs</span><span class=o>.</span><span class=n>_set_point_2d</span>
<a name=line-78></a>
<a name=line-79></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>ncoords</span><span class=p>):</span>
<a name=line-80></a>            <span class=k>if</span> <span class=n>numpy_coords</span><span class=p>:</span>
<a name=line-81></a>                <span class=n>point_coords</span> <span class=o>=</span> <span class=n>coords</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=p>:]</span>
<a name=line-82></a>            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>coords</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>Point</span><span class=p>):</span>
<a name=line-83></a>                <span class=n>point_coords</span> <span class=o>=</span> <span class=n>coords</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>tuple</span>
<a name=line-84></a>            <span class=k>else</span><span class=p>:</span>
<a name=line-85></a>                <span class=n>point_coords</span> <span class=o>=</span> <span class=n>coords</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
<a name=line-86></a>            <span class=n>point_setter</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>point_coords</span><span class=p>)</span>
<a name=line-87></a>
<a name=line-88></a>        <span class=c1># Calling the base geometry initialization with the returned pointer</span>
<a name=line-89></a>        <span class=c1>#  from the function.</span>
<a name=line-90></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_init_func</span><span class=p>(</span><span class=n>cs</span><span class=o>.</span><span class=n>ptr</span><span class=p>),</span> <span class=n>srid</span><span class=o>=</span><span class=n>srid</span><span class=p>)</span>
<a name=line-91></a>
<a name=line-92></a>    <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-93></a>        <span class=s2>&quot;Allow iteration over this LineString.&quot;</span>
<a name=line-94></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=p>)):</span>
<a name=line-95></a>            <span class=k>yield</span> <span class=bp>self</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
<a name=line-96></a>
<a name=line-97></a>    <span class=k>def</span> <span class=fm>__len__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-98></a>        <span class=s2>&quot;Return the number of points in this LineString.&quot;</span>
<a name=line-99></a>        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=p>)</span>
<a name=line-100></a>
<a name=line-101></a>    <span class=k>def</span> <span class=nf>_get_single_external</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>):</span>
<a name=line-102></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>
<a name=line-103></a>
<a name=line-104></a>    <span class=n>_get_single_internal</span> <span class=o>=</span> <span class=n>_get_single_external</span>
<a name=line-105></a>
<a name=line-106></a>    <span class=k>def</span> <span class=nf>_set_list</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>items</span><span class=p>):</span>
<a name=line-107></a>        <span class=n>ndim</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>dims</span>
<a name=line-108></a>        <span class=n>hasz</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>hasz</span>  <span class=c1># I don&#39;t understand why these are different</span>
<a name=line-109></a>        <span class=n>srid</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>srid</span>
<a name=line-110></a>
<a name=line-111></a>        <span class=c1># create a new coordinate sequence and populate accordingly</span>
<a name=line-112></a>        <span class=n>cs</span> <span class=o>=</span> <span class=n>GEOSCoordSeq</span><span class=p>(</span><span class=n>capi</span><span class=o>.</span><span class=n>create_cs</span><span class=p>(</span><span class=n>length</span><span class=p>,</span> <span class=n>ndim</span><span class=p>),</span> <span class=n>z</span><span class=o>=</span><span class=n>hasz</span><span class=p>)</span>
<a name=line-113></a>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>c</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>items</span><span class=p>):</span>
<a name=line-114></a>            <span class=n>cs</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>c</span>
<a name=line-115></a>
<a name=line-116></a>        <span class=n>ptr</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_init_func</span><span class=p>(</span><span class=n>cs</span><span class=o>.</span><span class=n>ptr</span><span class=p>)</span>
<a name=line-117></a>        <span class=k>if</span> <span class=n>ptr</span><span class=p>:</span>
<a name=line-118></a>            <span class=n>capi</span><span class=o>.</span><span class=n>destroy_geom</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>ptr</span><span class=p>)</span>
<a name=line-119></a>            <span class=bp>self</span><span class=o>.</span><span class=n>ptr</span> <span class=o>=</span> <span class=n>ptr</span>
<a name=line-120></a>            <span class=k>if</span> <span class=n>srid</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-121></a>                <span class=bp>self</span><span class=o>.</span><span class=n>srid</span> <span class=o>=</span> <span class=n>srid</span>
<a name=line-122></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_post_init</span><span class=p>()</span>
<a name=line-123></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-124></a>            <span class=c1># can this happen?</span>
<a name=line-125></a>            <span class=k>raise</span> <span class=n>GEOSException</span><span class=p>(</span><span class=s1>&#39;Geometry resulting from slice deletion was invalid.&#39;</span><span class=p>)</span>
<a name=line-126></a>
<a name=line-127></a>    <span class=k>def</span> <span class=nf>_set_single</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<a name=line-128></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=p>[</span><span class=n>index</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
<a name=line-129></a>
<a name=line-130></a>    <span class=k>def</span> <span class=nf>_checkdim</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dim</span><span class=p>):</span>
<a name=line-131></a>        <span class=k>if</span> <span class=n>dim</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
<a name=line-132></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Dimension mismatch.&#39;</span><span class=p>)</span>
<a name=line-133></a>
<a name=line-134></a>    <span class=c1># #### Sequence Properties ####</span>
<a name=line-135></a>    <span class=nd>@property</span>
<a name=line-136></a>    <span class=k>def</span> <span class=nf>tuple</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-137></a>        <span class=s2>&quot;Return a tuple version of the geometry from the coordinate sequence.&quot;</span>
<a name=line-138></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>tuple</span>
<a name=line-139></a>    <span class=n>coords</span> <span class=o>=</span> <span class=nb>tuple</span>
<a name=line-140></a>
<a name=line-141></a>    <span class=k>def</span> <span class=nf>_listarr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>):</span>
<a name=line-142></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-143></a><span class=sd>        Return a sequence (list) corresponding with the given function.</span>
<a name=line-144></a><span class=sd>        Return a numpy array if possible.</span>
<a name=line-145></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-146></a>        <span class=n>lst</span> <span class=o>=</span> <span class=p>[</span><span class=n>func</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=p>))]</span>
<a name=line-147></a>        <span class=k>if</span> <span class=n>numpy</span><span class=p>:</span>
<a name=line-148></a>            <span class=k>return</span> <span class=n>numpy</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>lst</span><span class=p>)</span>  <span class=c1># ARRRR!</span>
<a name=line-149></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-150></a>            <span class=k>return</span> <span class=n>lst</span>
<a name=line-151></a>
<a name=line-152></a>    <span class=nd>@property</span>
<a name=line-153></a>    <span class=k>def</span> <span class=nf>array</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-154></a>        <span class=s2>&quot;Return a numpy array for the LineString.&quot;</span>
<a name=line-155></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_listarr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=fm>__getitem__</span><span class=p>)</span>
<a name=line-156></a>
<a name=line-157></a>    <span class=nd>@property</span>
<a name=line-158></a>    <span class=k>def</span> <span class=nf>x</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-159></a>        <span class=s2>&quot;Return a list or numpy array of the X variable.&quot;</span>
<a name=line-160></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_listarr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>getX</span><span class=p>)</span>
<a name=line-161></a>
<a name=line-162></a>    <span class=nd>@property</span>
<a name=line-163></a>    <span class=k>def</span> <span class=nf>y</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-164></a>        <span class=s2>&quot;Return a list or numpy array of the Y variable.&quot;</span>
<a name=line-165></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_listarr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>getY</span><span class=p>)</span>
<a name=line-166></a>
<a name=line-167></a>    <span class=nd>@property</span>
<a name=line-168></a>    <span class=k>def</span> <span class=nf>z</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-169></a>        <span class=s2>&quot;Return a list or numpy array of the Z variable.&quot;</span>
<a name=line-170></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>hasz</span><span class=p>:</span>
<a name=line-171></a>            <span class=k>return</span> <span class=kc>None</span>
<a name=line-172></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-173></a>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_listarr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>getZ</span><span class=p>)</span>
<a name=line-174></a>
<a name=line-175></a>
<a name=line-176></a><span class=c1># LinearRings are LineStrings used within Polygons.</span>
<a name=line-177></a><span class=k>class</span> <span class=nc>LinearRing</span><span class=p>(</span><span class=n>LineString</span><span class=p>):</span>
<a name=line-178></a>    <span class=n>_minlength</span> <span class=o>=</span> <span class=mi>4</span>
<a name=line-179></a>    <span class=n>_init_func</span> <span class=o>=</span> <span class=n>capi</span><span class=o>.</span><span class=n>create_linearring</span>
<a name=line-180></a>
<a name=line-181></a>    <span class=nd>@property</span>
<a name=line-182></a>    <span class=k>def</span> <span class=nf>is_counterclockwise</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-183></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>empty</span><span class=p>:</span>
<a name=line-184></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a name=line-185></a>                <span class=s1>&#39;Orientation of an empty LinearRing cannot be determined.&#39;</span>
<a name=line-186></a>            <span class=p>)</span>
<a name=line-187></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cs</span><span class=o>.</span><span class=n>is_counterclockwise</span>
</pre></div></td></tr></table><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>