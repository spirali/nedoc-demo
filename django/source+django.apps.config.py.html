<!DOCTYPE html><html><head><meta charset=utf-8><title>django.apps.config</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Django</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=django.html>&#9662; django</a> </li><li><ul><li><a href=django.__main__.html>&#9656; __main__</a> </li><li><a href=django.apps.html>&#9662; apps</a> </li><li><ul><li><div class=select><a href=django.apps.config.html>&#9662; config</a> </div></li><li><ul><li><a href=django.apps.config.AppConfig.html> <i>class</i> AppConfig</a> </li></ul></li><li><a href=django.apps.registry.html>&#9656; registry</a> </li></ul></li><li><a href=django.bin.html>&#9656; bin</a> </li><li><a href=django.conf.html>&#9656; conf</a> </li><li><a href=django.contrib.html>&#9656; contrib</a> </li><li><a href=django.core.html>&#9656; core</a> </li><li><a href=django.db.html>&#9656; db</a> </li><li><a href=django.dispatch.html>&#9656; dispatch</a> </li><li><a href=django.forms.html>&#9656; forms</a> </li><li><a href=django.http.html>&#9656; http</a> </li><li><a href=django.middleware.html>&#9656; middleware</a> </li><li><a href=django.shortcuts.html>&#9656; shortcuts</a> </li><li><a href=django.template.html>&#9656; template</a> </li><li><a href=django.templatetags.html>&#9656; templatetags</a> </li><li><a href=django.test.html>&#9656; test</a> </li><li><a href=django.urls.html>&#9656; urls</a> </li><li><a href=django.utils.html>&#9656; utils</a> </li><li><a href=django.views.html>&#9656; views</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Source code django/apps/config.py</h1><div id=path><a class=symbol href=django.html>django</a>.<a class=symbol href=django.apps.html>apps</a>.<a class=symbol href=django.apps.config.html>config</a></div><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</pre></div></td><td class=code><div class=highlight><pre><span></span><a name=line-1></a><span class=kn>import</span> <span class=nn>inspect</span>
<a name=line-2></a><span class=kn>import</span> <span class=nn>os</span>
<a name=line-3></a><span class=kn>import</span> <span class=nn>warnings</span>
<a name=line-4></a><span class=kn>from</span> <span class=nn>importlib</span> <span class=kn>import</span> <span class=n>import_module</span>
<a name=line-5></a>
<a name=line-6></a><span class=kn>from</span> <span class=nn>django.core.exceptions</span> <span class=kn>import</span> <span class=n>ImproperlyConfigured</span>
<a name=line-7></a><span class=kn>from</span> <span class=nn>django.utils.deprecation</span> <span class=kn>import</span> <span class=n>RemovedInDjango41Warning</span>
<a name=line-8></a><span class=kn>from</span> <span class=nn>django.utils.module_loading</span> <span class=kn>import</span> <span class=n>import_string</span><span class=p>,</span> <span class=n>module_has_submodule</span>
<a name=line-9></a>
<a name=line-10></a><span class=n>APPS_MODULE_NAME</span> <span class=o>=</span> <span class=s1>&#39;apps&#39;</span>
<a name=line-11></a><span class=n>MODELS_MODULE_NAME</span> <span class=o>=</span> <span class=s1>&#39;models&#39;</span>
<a name=line-12></a>
<a name=line-13></a>
<a name=line-14></a><span class=k>class</span> <span class=nc>AppConfig</span><span class=p>:</span>
<a name=line-15></a>    <span class=sd>&quot;&quot;&quot;Class representing a Django application and its configuration.&quot;&quot;&quot;</span>
<a name=line-16></a>
<a name=line-17></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=n>app_module</span><span class=p>):</span>
<a name=line-18></a>        <span class=c1># Full Python path to the application e.g. &#39;django.contrib.admin&#39;.</span>
<a name=line-19></a>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>app_name</span>
<a name=line-20></a>
<a name=line-21></a>        <span class=c1># Root module for the application e.g. &lt;module &#39;django.contrib.admin&#39;</span>
<a name=line-22></a>        <span class=c1># from &#39;django/contrib/admin/__init__.py&#39;&gt;.</span>
<a name=line-23></a>        <span class=bp>self</span><span class=o>.</span><span class=n>module</span> <span class=o>=</span> <span class=n>app_module</span>
<a name=line-24></a>
<a name=line-25></a>        <span class=c1># Reference to the Apps registry that holds this AppConfig. Set by the</span>
<a name=line-26></a>        <span class=c1># registry when it registers the AppConfig instance.</span>
<a name=line-27></a>        <span class=bp>self</span><span class=o>.</span><span class=n>apps</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-28></a>
<a name=line-29></a>        <span class=c1># The following attributes could be defined at the class level in a</span>
<a name=line-30></a>        <span class=c1># subclass, hence the test-and-set pattern.</span>
<a name=line-31></a>
<a name=line-32></a>        <span class=c1># Last component of the Python path to the application e.g. &#39;admin&#39;.</span>
<a name=line-33></a>        <span class=c1># This value must be unique across a Django project.</span>
<a name=line-34></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;label&#39;</span><span class=p>):</span>
<a name=line-35></a>            <span class=bp>self</span><span class=o>.</span><span class=n>label</span> <span class=o>=</span> <span class=n>app_name</span><span class=o>.</span><span class=n>rpartition</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>)[</span><span class=mi>2</span><span class=p>]</span>
<a name=line-36></a>
<a name=line-37></a>        <span class=c1># Human-readable name for the application e.g. &quot;Admin&quot;.</span>
<a name=line-38></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;verbose_name&#39;</span><span class=p>):</span>
<a name=line-39></a>            <span class=bp>self</span><span class=o>.</span><span class=n>verbose_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=o>.</span><span class=n>title</span><span class=p>()</span>
<a name=line-40></a>
<a name=line-41></a>        <span class=c1># Filesystem path to the application directory e.g.</span>
<a name=line-42></a>        <span class=c1># &#39;/path/to/django/contrib/admin&#39;.</span>
<a name=line-43></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;path&#39;</span><span class=p>):</span>
<a name=line-44></a>            <span class=bp>self</span><span class=o>.</span><span class=n>path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_path_from_module</span><span class=p>(</span><span class=n>app_module</span><span class=p>)</span>
<a name=line-45></a>
<a name=line-46></a>        <span class=c1># Module containing models e.g. &lt;module &#39;django.contrib.admin.models&#39;</span>
<a name=line-47></a>        <span class=c1># from &#39;django/contrib/admin/models.py&#39;&gt;. Set by import_models().</span>
<a name=line-48></a>        <span class=c1># None if the application doesn&#39;t have a models module.</span>
<a name=line-49></a>        <span class=bp>self</span><span class=o>.</span><span class=n>models_module</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-50></a>
<a name=line-51></a>        <span class=c1># Mapping of lowercase model names to model classes. Initially set to</span>
<a name=line-52></a>        <span class=c1># None to prevent accidental access before import_models() runs.</span>
<a name=line-53></a>        <span class=bp>self</span><span class=o>.</span><span class=n>models</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-54></a>
<a name=line-55></a>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-56></a>        <span class=k>return</span> <span class=s1>&#39;&lt;</span><span class=si>%s</span><span class=s1>: </span><span class=si>%s</span><span class=s1>&gt;&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>)</span>
<a name=line-57></a>
<a name=line-58></a>    <span class=k>def</span> <span class=nf>_path_from_module</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>module</span><span class=p>):</span>
<a name=line-59></a>        <span class=sd>&quot;&quot;&quot;Attempt to determine app&#39;s filesystem path from its module.&quot;&quot;&quot;</span>
<a name=line-60></a>        <span class=c1># See #21874 for extended discussion of the behavior of this method in</span>
<a name=line-61></a>        <span class=c1># various cases.</span>
<a name=line-62></a>        <span class=c1># Convert paths to list because Python&#39;s _NamespacePath doesn&#39;t support</span>
<a name=line-63></a>        <span class=c1># indexing.</span>
<a name=line-64></a>        <span class=n>paths</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>getattr</span><span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=s1>&#39;__path__&#39;</span><span class=p>,</span> <span class=p>[]))</span>
<a name=line-65></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>paths</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-66></a>            <span class=n>filename</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=s1>&#39;__file__&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<a name=line-67></a>            <span class=k>if</span> <span class=n>filename</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-68></a>                <span class=n>paths</span> <span class=o>=</span> <span class=p>[</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>filename</span><span class=p>)]</span>
<a name=line-69></a>            <span class=k>else</span><span class=p>:</span>
<a name=line-70></a>                <span class=c1># For unknown reasons, sometimes the list returned by __path__</span>
<a name=line-71></a>                <span class=c1># contains duplicates that must be removed (#25246).</span>
<a name=line-72></a>                <span class=n>paths</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>paths</span><span class=p>))</span>
<a name=line-73></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>paths</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-74></a>            <span class=k>raise</span> <span class=n>ImproperlyConfigured</span><span class=p>(</span>
<a name=line-75></a>                <span class=s2>&quot;The app module </span><span class=si>%r</span><span class=s2> has multiple filesystem locations (</span><span class=si>%r</span><span class=s2>); &quot;</span>
<a name=line-76></a>                <span class=s2>&quot;you must configure this app with an AppConfig subclass &quot;</span>
<a name=line-77></a>                <span class=s2>&quot;with a &#39;path&#39; class attribute.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=n>paths</span><span class=p>))</span>
<a name=line-78></a>        <span class=k>elif</span> <span class=ow>not</span> <span class=n>paths</span><span class=p>:</span>
<a name=line-79></a>            <span class=k>raise</span> <span class=n>ImproperlyConfigured</span><span class=p>(</span>
<a name=line-80></a>                <span class=s2>&quot;The app module </span><span class=si>%r</span><span class=s2> has no filesystem location, &quot;</span>
<a name=line-81></a>                <span class=s2>&quot;you must configure this app with an AppConfig subclass &quot;</span>
<a name=line-82></a>                <span class=s2>&quot;with a &#39;path&#39; class attribute.&quot;</span> <span class=o>%</span> <span class=n>module</span><span class=p>)</span>
<a name=line-83></a>        <span class=k>return</span> <span class=n>paths</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<a name=line-84></a>
<a name=line-85></a>    <span class=nd>@classmethod</span>
<a name=line-86></a>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>entry</span><span class=p>):</span>
<a name=line-87></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-88></a><span class=sd>        Factory that creates an app config from an entry in INSTALLED_APPS.</span>
<a name=line-89></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-90></a>        <span class=c1># create() eventually returns app_config_class(app_name, app_module).</span>
<a name=line-91></a>        <span class=n>app_config_class</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-92></a>        <span class=n>app_config_name</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-93></a>        <span class=n>app_name</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-94></a>        <span class=n>app_module</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-95></a>
<a name=line-96></a>        <span class=c1># If import_module succeeds, entry points to the app module.</span>
<a name=line-97></a>        <span class=k>try</span><span class=p>:</span>
<a name=line-98></a>            <span class=n>app_module</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
<a name=line-99></a>        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
<a name=line-100></a>            <span class=k>pass</span>
<a name=line-101></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-102></a>            <span class=c1># If app_module has an apps submodule that defines a single</span>
<a name=line-103></a>            <span class=c1># AppConfig subclass, use it automatically.</span>
<a name=line-104></a>            <span class=c1># To prevent this, an AppConfig subclass can declare a class</span>
<a name=line-105></a>            <span class=c1># variable default = False.</span>
<a name=line-106></a>            <span class=c1># If the apps module defines more than one AppConfig subclass,</span>
<a name=line-107></a>            <span class=c1># the default one can declare default = True.</span>
<a name=line-108></a>            <span class=k>if</span> <span class=n>module_has_submodule</span><span class=p>(</span><span class=n>app_module</span><span class=p>,</span> <span class=n>APPS_MODULE_NAME</span><span class=p>):</span>
<a name=line-109></a>                <span class=n>mod_path</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>.</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>entry</span><span class=p>,</span> <span class=n>APPS_MODULE_NAME</span><span class=p>)</span>
<a name=line-110></a>                <span class=n>mod</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>mod_path</span><span class=p>)</span>
<a name=line-111></a>                <span class=c1># Check if there&#39;s exactly one AppConfig candidate,</span>
<a name=line-112></a>                <span class=c1># excluding those that explicitly define default = False.</span>
<a name=line-113></a>                <span class=n>app_configs</span> <span class=o>=</span> <span class=p>[</span>
<a name=line-114></a>                    <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>candidate</span><span class=p>)</span>
<a name=line-115></a>                    <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>candidate</span> <span class=ow>in</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getmembers</span><span class=p>(</span><span class=n>mod</span><span class=p>,</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>)</span>
<a name=line-116></a>                    <span class=k>if</span> <span class=p>(</span>
<a name=line-117></a>                        <span class=nb>issubclass</span><span class=p>(</span><span class=n>candidate</span><span class=p>,</span> <span class=bp>cls</span><span class=p>)</span> <span class=ow>and</span>
<a name=line-118></a>                        <span class=n>candidate</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>cls</span> <span class=ow>and</span>
<a name=line-119></a>                        <span class=nb>getattr</span><span class=p>(</span><span class=n>candidate</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
<a name=line-120></a>                    <span class=p>)</span>
<a name=line-121></a>                <span class=p>]</span>
<a name=line-122></a>                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>app_configs</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-123></a>                    <span class=n>app_config_class</span> <span class=o>=</span> <span class=n>app_configs</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span>
<a name=line-124></a>                    <span class=n>app_config_name</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>.</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>mod_path</span><span class=p>,</span> <span class=n>app_configs</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span>
<a name=line-125></a>                <span class=k>else</span><span class=p>:</span>
<a name=line-126></a>                    <span class=c1># Check if there&#39;s exactly one AppConfig subclass,</span>
<a name=line-127></a>                    <span class=c1># among those that explicitly define default = True.</span>
<a name=line-128></a>                    <span class=n>app_configs</span> <span class=o>=</span> <span class=p>[</span>
<a name=line-129></a>                        <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>candidate</span><span class=p>)</span>
<a name=line-130></a>                        <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>candidate</span> <span class=ow>in</span> <span class=n>app_configs</span>
<a name=line-131></a>                        <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>candidate</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
<a name=line-132></a>                    <span class=p>]</span>
<a name=line-133></a>                    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>app_configs</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-134></a>                        <span class=n>candidates</span> <span class=o>=</span> <span class=p>[</span><span class=nb>repr</span><span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>app_configs</span><span class=p>]</span>
<a name=line-135></a>                        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a name=line-136></a>                            <span class=s1>&#39;</span><span class=si>%r</span><span class=s1> declares more than one default AppConfig: &#39;</span>
<a name=line-137></a>                            <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>.&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>mod_path</span><span class=p>,</span> <span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>candidates</span><span class=p>))</span>
<a name=line-138></a>                        <span class=p>)</span>
<a name=line-139></a>                    <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>app_configs</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a name=line-140></a>                        <span class=n>app_config_class</span> <span class=o>=</span> <span class=n>app_configs</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span>
<a name=line-141></a>                        <span class=n>app_config_name</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>.</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>mod_path</span><span class=p>,</span> <span class=n>app_configs</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span>
<a name=line-142></a>
<a name=line-143></a>            <span class=c1># If app_module specifies a default_app_config, follow the link.</span>
<a name=line-144></a>            <span class=c1># default_app_config is deprecated, but still takes over the</span>
<a name=line-145></a>            <span class=c1># automatic detection for backwards compatibility during the</span>
<a name=line-146></a>            <span class=c1># deprecation period.</span>
<a name=line-147></a>            <span class=k>try</span><span class=p>:</span>
<a name=line-148></a>                <span class=n>new_entry</span> <span class=o>=</span> <span class=n>app_module</span><span class=o>.</span><span class=n>default_app_config</span>
<a name=line-149></a>            <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
<a name=line-150></a>                <span class=c1># Use the default app config class if we didn&#39;t find anything.</span>
<a name=line-151></a>                <span class=k>if</span> <span class=n>app_config_class</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-152></a>                    <span class=n>app_config_class</span> <span class=o>=</span> <span class=bp>cls</span>
<a name=line-153></a>                    <span class=n>app_name</span> <span class=o>=</span> <span class=n>entry</span>
<a name=line-154></a>            <span class=k>else</span><span class=p>:</span>
<a name=line-155></a>                <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
<a name=line-156></a>                    <span class=s1>&#39;</span><span class=si>%r</span><span class=s1> defines default_app_config = </span><span class=si>%r</span><span class=s1>. &#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>entry</span><span class=p>,</span> <span class=n>new_entry</span><span class=p>)</span>
<a name=line-157></a>                <span class=p>)</span>
<a name=line-158></a>                <span class=k>if</span> <span class=n>new_entry</span> <span class=o>==</span> <span class=n>app_config_name</span><span class=p>:</span>
<a name=line-159></a>                    <span class=n>message</span> <span class=o>+=</span> <span class=p>(</span>
<a name=line-160></a>                        <span class=s1>&#39;Django now detects this configuration automatically. &#39;</span>
<a name=line-161></a>                        <span class=s1>&#39;You can remove default_app_config.&#39;</span>
<a name=line-162></a>                    <span class=p>)</span>
<a name=line-163></a>                <span class=k>else</span><span class=p>:</span>
<a name=line-164></a>                    <span class=n>message</span> <span class=o>+=</span> <span class=p>(</span>
<a name=line-165></a>                        <span class=s2>&quot;However, Django&#39;s automatic detection </span><span class=si>%s</span><span class=s2>. You should &quot;</span>
<a name=line-166></a>                        <span class=s2>&quot;move the default config class to the apps submodule &quot;</span>
<a name=line-167></a>                        <span class=s2>&quot;of your application and, if this module defines &quot;</span>
<a name=line-168></a>                        <span class=s2>&quot;several config classes, mark the default one with &quot;</span>
<a name=line-169></a>                        <span class=s2>&quot;default = True.&quot;</span> <span class=o>%</span> <span class=p>(</span>
<a name=line-170></a>                            <span class=s2>&quot;picked another configuration, </span><span class=si>%r</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>app_config_name</span>
<a name=line-171></a>                            <span class=k>if</span> <span class=n>app_config_name</span>
<a name=line-172></a>                            <span class=k>else</span> <span class=s2>&quot;did not find this configuration&quot;</span>
<a name=line-173></a>                        <span class=p>)</span>
<a name=line-174></a>                    <span class=p>)</span>
<a name=line-175></a>                <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>RemovedInDjango41Warning</span><span class=p>,</span> <span class=n>stacklevel</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a name=line-176></a>                <span class=n>entry</span> <span class=o>=</span> <span class=n>new_entry</span>
<a name=line-177></a>                <span class=n>app_config_class</span> <span class=o>=</span> <span class=kc>None</span>
<a name=line-178></a>
<a name=line-179></a>        <span class=c1># If import_string succeeds, entry is an app config class.</span>
<a name=line-180></a>        <span class=k>if</span> <span class=n>app_config_class</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-181></a>            <span class=k>try</span><span class=p>:</span>
<a name=line-182></a>                <span class=n>app_config_class</span> <span class=o>=</span> <span class=n>import_string</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
<a name=line-183></a>            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
<a name=line-184></a>                <span class=k>pass</span>
<a name=line-185></a>        <span class=c1># If both import_module and import_string failed, it means that entry</span>
<a name=line-186></a>        <span class=c1># doesn&#39;t have a valid value.</span>
<a name=line-187></a>        <span class=k>if</span> <span class=n>app_module</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>app_config_class</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-188></a>            <span class=c1># If the last component of entry starts with an uppercase letter,</span>
<a name=line-189></a>            <span class=c1># then it was likely intended to be an app config class; if not,</span>
<a name=line-190></a>            <span class=c1># an app module. Provide a nice error message in both cases.</span>
<a name=line-191></a>            <span class=n>mod_path</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>cls_name</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=n>rpartition</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span>
<a name=line-192></a>            <span class=k>if</span> <span class=n>mod_path</span> <span class=ow>and</span> <span class=n>cls_name</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>isupper</span><span class=p>():</span>
<a name=line-193></a>                <span class=c1># We could simply re-trigger the string import exception, but</span>
<a name=line-194></a>                <span class=c1># we&#39;re going the extra mile and providing a better error</span>
<a name=line-195></a>                <span class=c1># message for typos in INSTALLED_APPS.</span>
<a name=line-196></a>                <span class=c1># This may raise ImportError, which is the best exception</span>
<a name=line-197></a>                <span class=c1># possible if the module at mod_path cannot be imported.</span>
<a name=line-198></a>                <span class=n>mod</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>mod_path</span><span class=p>)</span>
<a name=line-199></a>                <span class=n>candidates</span> <span class=o>=</span> <span class=p>[</span>
<a name=line-200></a>                    <span class=nb>repr</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
<a name=line-201></a>                    <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>candidate</span> <span class=ow>in</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getmembers</span><span class=p>(</span><span class=n>mod</span><span class=p>,</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>)</span>
<a name=line-202></a>                    <span class=k>if</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>candidate</span><span class=p>,</span> <span class=bp>cls</span><span class=p>)</span> <span class=ow>and</span> <span class=n>candidate</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>cls</span>
<a name=line-203></a>                <span class=p>]</span>
<a name=line-204></a>                <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Module &#39;</span><span class=si>%s</span><span class=s2>&#39; does not contain a &#39;</span><span class=si>%s</span><span class=s2>&#39; class.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>mod_path</span><span class=p>,</span> <span class=n>cls_name</span><span class=p>)</span>
<a name=line-205></a>                <span class=k>if</span> <span class=n>candidates</span><span class=p>:</span>
<a name=line-206></a>                    <span class=n>msg</span> <span class=o>+=</span> <span class=s1>&#39; Choices are: </span><span class=si>%s</span><span class=s1>.&#39;</span> <span class=o>%</span> <span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>candidates</span><span class=p>)</span>
<a name=line-207></a>                <span class=k>raise</span> <span class=ne>ImportError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<a name=line-208></a>            <span class=k>else</span><span class=p>:</span>
<a name=line-209></a>                <span class=c1># Re-trigger the module import exception.</span>
<a name=line-210></a>                <span class=n>import_module</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
<a name=line-211></a>
<a name=line-212></a>        <span class=c1># Check for obvious errors. (This check prevents duck typing, but</span>
<a name=line-213></a>        <span class=c1># it could be removed if it became a problem in practice.)</span>
<a name=line-214></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>app_config_class</span><span class=p>,</span> <span class=n>AppConfig</span><span class=p>):</span>
<a name=line-215></a>            <span class=k>raise</span> <span class=n>ImproperlyConfigured</span><span class=p>(</span>
<a name=line-216></a>                <span class=s2>&quot;&#39;</span><span class=si>%s</span><span class=s2>&#39; isn&#39;t a subclass of AppConfig.&quot;</span> <span class=o>%</span> <span class=n>entry</span><span class=p>)</span>
<a name=line-217></a>
<a name=line-218></a>        <span class=c1># Obtain app name here rather than in AppClass.__init__ to keep</span>
<a name=line-219></a>        <span class=c1># all error checking for entries in INSTALLED_APPS in one place.</span>
<a name=line-220></a>        <span class=k>if</span> <span class=n>app_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a name=line-221></a>            <span class=k>try</span><span class=p>:</span>
<a name=line-222></a>                <span class=n>app_name</span> <span class=o>=</span> <span class=n>app_config_class</span><span class=o>.</span><span class=n>name</span>
<a name=line-223></a>            <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
<a name=line-224></a>                <span class=k>raise</span> <span class=n>ImproperlyConfigured</span><span class=p>(</span>
<a name=line-225></a>                    <span class=s2>&quot;&#39;</span><span class=si>%s</span><span class=s2>&#39; must supply a name attribute.&quot;</span> <span class=o>%</span> <span class=n>entry</span>
<a name=line-226></a>                <span class=p>)</span>
<a name=line-227></a>
<a name=line-228></a>        <span class=c1># Ensure app_name points to a valid module.</span>
<a name=line-229></a>        <span class=k>try</span><span class=p>:</span>
<a name=line-230></a>            <span class=n>app_module</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>app_name</span><span class=p>)</span>
<a name=line-231></a>        <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
<a name=line-232></a>            <span class=k>raise</span> <span class=n>ImproperlyConfigured</span><span class=p>(</span>
<a name=line-233></a>                <span class=s2>&quot;Cannot import &#39;</span><span class=si>%s</span><span class=s2>&#39;. Check that &#39;</span><span class=si>%s</span><span class=s2>.</span><span class=si>%s</span><span class=s2>.name&#39; is correct.&quot;</span> <span class=o>%</span> <span class=p>(</span>
<a name=line-234></a>                    <span class=n>app_name</span><span class=p>,</span>
<a name=line-235></a>                    <span class=n>app_config_class</span><span class=o>.</span><span class=vm>__module__</span><span class=p>,</span>
<a name=line-236></a>                    <span class=n>app_config_class</span><span class=o>.</span><span class=vm>__qualname__</span><span class=p>,</span>
<a name=line-237></a>                <span class=p>)</span>
<a name=line-238></a>            <span class=p>)</span>
<a name=line-239></a>
<a name=line-240></a>        <span class=c1># Entry is a path to an app config class.</span>
<a name=line-241></a>        <span class=k>return</span> <span class=n>app_config_class</span><span class=p>(</span><span class=n>app_name</span><span class=p>,</span> <span class=n>app_module</span><span class=p>)</span>
<a name=line-242></a>
<a name=line-243></a>    <span class=k>def</span> <span class=nf>get_model</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>model_name</span><span class=p>,</span> <span class=n>require_ready</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<a name=line-244></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-245></a><span class=sd>        Return the model with the given case-insensitive model_name.</span>
<a name=line-246></a>
<a name=line-247></a><span class=sd>        Raise LookupError if no model exists with this name.</span>
<a name=line-248></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-249></a>        <span class=k>if</span> <span class=n>require_ready</span><span class=p>:</span>
<a name=line-250></a>            <span class=bp>self</span><span class=o>.</span><span class=n>apps</span><span class=o>.</span><span class=n>check_models_ready</span><span class=p>()</span>
<a name=line-251></a>        <span class=k>else</span><span class=p>:</span>
<a name=line-252></a>            <span class=bp>self</span><span class=o>.</span><span class=n>apps</span><span class=o>.</span><span class=n>check_apps_ready</span><span class=p>()</span>
<a name=line-253></a>        <span class=k>try</span><span class=p>:</span>
<a name=line-254></a>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>models</span><span class=p>[</span><span class=n>model_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()]</span>
<a name=line-255></a>        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
<a name=line-256></a>            <span class=k>raise</span> <span class=ne>LookupError</span><span class=p>(</span>
<a name=line-257></a>                <span class=s2>&quot;App &#39;</span><span class=si>%s</span><span class=s2>&#39; doesn&#39;t have a &#39;</span><span class=si>%s</span><span class=s2>&#39; model.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>,</span> <span class=n>model_name</span><span class=p>))</span>
<a name=line-258></a>
<a name=line-259></a>    <span class=k>def</span> <span class=nf>get_models</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>include_auto_created</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>include_swapped</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<a name=line-260></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-261></a><span class=sd>        Return an iterable of models.</span>
<a name=line-262></a>
<a name=line-263></a><span class=sd>        By default, the following models aren&#39;t included:</span>
<a name=line-264></a>
<a name=line-265></a><span class=sd>        - auto-created models for many-to-many relations without</span>
<a name=line-266></a><span class=sd>          an explicit intermediate table,</span>
<a name=line-267></a><span class=sd>        - models that have been swapped out.</span>
<a name=line-268></a>
<a name=line-269></a><span class=sd>        Set the corresponding keyword argument to True to include such models.</span>
<a name=line-270></a><span class=sd>        Keyword arguments aren&#39;t documented; they&#39;re a private API.</span>
<a name=line-271></a><span class=sd>        &quot;&quot;&quot;</span>
<a name=line-272></a>        <span class=bp>self</span><span class=o>.</span><span class=n>apps</span><span class=o>.</span><span class=n>check_models_ready</span><span class=p>()</span>
<a name=line-273></a>        <span class=k>for</span> <span class=n>model</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>models</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
<a name=line-274></a>            <span class=k>if</span> <span class=n>model</span><span class=o>.</span><span class=n>_meta</span><span class=o>.</span><span class=n>auto_created</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>include_auto_created</span><span class=p>:</span>
<a name=line-275></a>                <span class=k>continue</span>
<a name=line-276></a>            <span class=k>if</span> <span class=n>model</span><span class=o>.</span><span class=n>_meta</span><span class=o>.</span><span class=n>swapped</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>include_swapped</span><span class=p>:</span>
<a name=line-277></a>                <span class=k>continue</span>
<a name=line-278></a>            <span class=k>yield</span> <span class=n>model</span>
<a name=line-279></a>
<a name=line-280></a>    <span class=k>def</span> <span class=nf>import_models</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-281></a>        <span class=c1># Dictionary of models for this app, primarily maintained in the</span>
<a name=line-282></a>        <span class=c1># &#39;all_models&#39; attribute of the Apps this AppConfig is attached to.</span>
<a name=line-283></a>        <span class=bp>self</span><span class=o>.</span><span class=n>models</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>apps</span><span class=o>.</span><span class=n>all_models</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>]</span>
<a name=line-284></a>
<a name=line-285></a>        <span class=k>if</span> <span class=n>module_has_submodule</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>module</span><span class=p>,</span> <span class=n>MODELS_MODULE_NAME</span><span class=p>):</span>
<a name=line-286></a>            <span class=n>models_module_name</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>.</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>MODELS_MODULE_NAME</span><span class=p>)</span>
<a name=line-287></a>            <span class=bp>self</span><span class=o>.</span><span class=n>models_module</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>models_module_name</span><span class=p>)</span>
<a name=line-288></a>
<a name=line-289></a>    <span class=k>def</span> <span class=nf>ready</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a name=line-290></a>        <span class=sd>&quot;&quot;&quot;</span>
<a name=line-291></a><span class=sd>        Override this method in subclasses to run code when Django starts.</span>
<a name=line-292></a><span class=sd>        &quot;&quot;&quot;</span>
</pre></div></td></tr></table><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:04 </p></div></div></body></html>