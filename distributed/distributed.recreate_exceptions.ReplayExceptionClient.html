<!DOCTYPE html><html><head><meta charset=utf-8><title>distributed.recreate_exceptions.ReplayExceptionClient</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Distributed</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=distributed.html>&#9662; distributed</a> </li><li><ul><li><a href=distributed.actor.html>&#9656; actor</a> </li><li><a href=distributed.asyncio.html>&#9656; asyncio</a> </li><li><a href=distributed.batched.html>&#9656; batched</a> </li><li><a href=distributed.bokeh.html>&#9656; bokeh</a> </li><li><a href=distributed.cfexecutor.html>&#9656; cfexecutor</a> </li><li><a href=distributed.cli.html>&#9656; cli</a> </li><li><a href=distributed.client.html>&#9656; client</a> </li><li><a href=distributed.comm.html>&#9656; comm</a> </li><li><a href=distributed.compatibility.html>&#9656; compatibility</a> </li><li><a href=distributed.config.html>&#9656; config</a> </li><li><a href=distributed.core.html>&#9656; core</a> </li><li><a href=distributed.counter.html>&#9656; counter</a> </li><li><a href=distributed.dashboard.html>&#9656; dashboard</a> </li><li><a href=distributed.deploy.html>&#9656; deploy</a> </li><li><a href=distributed.diagnostics.html>&#9656; diagnostics</a> </li><li><a href=distributed.diskutils.html>&#9656; diskutils</a> </li><li><a href=distributed.event.html>&#9656; event</a> </li><li><a href=distributed.http.html>&#9656; http</a> </li><li><a href=distributed.lock.html>&#9656; lock</a> </li><li><a href=distributed.locket.html>&#9656; locket</a> </li><li><a href=distributed.metrics.html>&#9656; metrics</a> </li><li><a href=distributed.nanny.html>&#9656; nanny</a> </li><li><a href=distributed.node.html>&#9656; node</a> </li><li><a href=distributed.preloading.html>&#9656; preloading</a> </li><li><a href=distributed.process.html>&#9656; process</a> </li><li><a href=distributed.proctitle.html>&#9656; proctitle</a> </li><li><a href=distributed.profile.html>&#9656; profile</a> </li><li><a href=distributed.protocol.html>&#9656; protocol</a> </li><li><a href=distributed.publish.html>&#9656; publish</a> </li><li><a href=distributed.pubsub.html>&#9656; pubsub</a> </li><li><a href=distributed.pytest_resourceleaks.html>&#9656; pytest_resourceleaks</a> </li><li><a href=distributed.queues.html>&#9656; queues</a> </li><li><a href=distributed.recreate_exceptions.html>&#9662; recreate_exceptions</a> </li><li><ul><li><div class=select><a href=distributed.recreate_exceptions.ReplayExceptionClient.html> <i>class</i> ReplayExceptionClient</a> </div></li><li><a href=distributed.recreate_exceptions.ReplayExceptionScheduler.html> <i>class</i> ReplayExceptionScheduler</a> </li></ul></li><li><a href=distributed.scheduler.html>&#9656; scheduler</a> </li><li><a href=distributed.security.html>&#9656; security</a> </li><li><a href=distributed.semaphore.html>&#9656; semaphore</a> </li><li><a href=distributed.sizeof.html>&#9656; sizeof</a> </li><li><a href=distributed.stealing.html>&#9656; stealing</a> </li><li><a href=distributed.system.html>&#9656; system</a> </li><li><a href=distributed.system_monitor.html>&#9656; system_monitor</a> </li><li><a href=distributed.tests.html>&#9656; tests</a> </li><li><a href=distributed.threadpoolexecutor.html>&#9656; threadpoolexecutor</a> </li><li><a href=distributed.utils.html>&#9656; utils</a> </li><li><a href=distributed.utils_comm.html>&#9656; utils_comm</a> </li><li><a href=distributed.utils_perf.html>&#9656; utils_perf</a> </li><li><a href=distributed.utils_test.html>&#9656; utils_test</a> </li><li><a href=distributed.variable.html>&#9656; variable</a> </li><li><a href=distributed.versions.html>&#9656; versions</a> </li><li><a href=distributed.worker.html>&#9656; worker</a> </li><li><a href=distributed.worker_client.html>&#9656; worker_client</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Class ReplayExceptionClient</h1><div id=path><a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.recreate_exceptions.html>recreate_exceptions</a>.<a class=symbol href=distributed.recreate_exceptions.ReplayExceptionClient.html>ReplayExceptionClient</a></div><p><div class=docline> A plugin for the client allowing replay of remote exceptions locally </div></p><h2>Declaration</h2><div class=decl><span class=kw>class</span> ReplayExceptionClient</div><a class=sourcelink href=source+distributed.recreate_exceptions.py.html#line-52>source</a> <a class=sourcelink href=distributed.recreate_exceptions.ReplayExceptionClient.html>link</a><h2>Documentation</h2><pre>Adds the following methods (and their async variants)to the given client:

- ``recreate_error_locally``: main user method
- ``get_futures_error``: gets the task, its details and dependencies,
    responsible for failure of the given future.</pre><h2>Methods</h2><ul class=deflst><li><div class=fn><a id=f___init__></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.recreate_exceptions.ReplayExceptionClient.html#f___init__>__init__</a>(<span class=args>self, client</span>) </span></div><div class=fdetail id=fn___init__><div class=idnt><a class=sourcelink href=source+distributed.recreate_exceptions.py.html#line-63>source</a> <a class=sourcelink href=distributed.recreate_exceptions.ReplayExceptionClient.html#f___init__>link</a></div></div></div></li><li><div class=fn><a id=f_get_futures_error></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_get_futures_error>get_futures_error</a>(<span class=args>self, future</span>) </span><div class=docline> Ask the scheduler details of the sub-task of the given failed future </div></div><div class=fdetail id=fn_get_futures_error><div class=idnt><a class=sourcelink href=source+distributed.recreate_exceptions.py.html#line-90>source</a> <a class=sourcelink href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_get_futures_error>link</a></div><pre>When a future evaluates to a status of &#34;error&#34;, i.e., an exception
was raised in a task within its graph, we an get information from
the scheduler. This function gets the details of the specific task
that raised the exception and led to the error, but does not fetch
data from the cluster or execute the function.</pre><h3>Parameters</h3><ul class=params><li><strong>future</strong> : future that failed, having ``status==&#34;error&#34;``, typically <br><pre>after an attempt to ``gather()`` shows a stack-stace.</pre></li></ul><h3>Returns</h3><ul class=params><li></li></ul><h3>See also</h3><pre>ReplayExceptionClient.recreate_error_locally</pre></div></div></li><li><div class=fn><a id=f_recreate_error_locally></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_recreate_error_locally>recreate_error_locally</a>(<span class=args>self, future</span>) </span><div class=docline> For a failed calculation, perform the blamed task locally for debugging. </div></div><div class=fdetail id=fn_recreate_error_locally><div class=idnt><a class=sourcelink href=source+distributed.recreate_exceptions.py.html#line-130>source</a> <a class=sourcelink href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_recreate_error_locally>link</a></div><pre>This operation should be performed after a future (result of ``gather``,
``compute``, etc) comes back with a status of &#34;error&#34;, if the stack-
trace is not informative enough to diagnose the problem. The specific
task (part of the graph pointing to the future) responsible for the
error will be fetched from the scheduler, together with the values of
its inputs. The function will then be executed, so that ``pdb`` can
be used for debugging.</pre><h3>Parameters</h3><ul class=params><li><strong>future</strong> : future or collection that failed <br><pre>The same thing as was given to ``gather``, but came back with
an exception/stack-trace. Can also be a (persisted) dask collection
containing any errored futures.</pre></li></ul><h3>Returns</h3><ul class=params><li> Nothing; the function runs and should raise an exception, allowing </li></ul><h3>Examples</h3><pre>&gt;&gt;&gt; future = c.submit(div, 1, 0)         # doctest: +SKIP
&gt;&gt;&gt; future.status                        # doctest: +SKIP
&#39;error&#39;
&gt;&gt;&gt; c.recreate_error_locally(future)     # doctest: +SKIP
ZeroDivisionError: division by zero

If you&#39;re in IPython you might take this opportunity to use pdb

&gt;&gt;&gt; %pdb                                 # doctest: +SKIP
Automatic pdb calling has been turned ON

&gt;&gt;&gt; c.recreate_error_locally(future)     # doctest: +SKIP
ZeroDivisionError: division by zero
      1 def div(x, y):
----&gt; 2     return x / y
ipdb&gt;</pre></div></div></li><li><div class=fn><a id=f_scheduler></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_scheduler>scheduler</a>(<span class=args>self</span>) <span class=label>@property</span></span></div><div class=fdetail id=fn_scheduler><div class=decl><div class=def><i> @property<br></i><span class=kw>def</span> scheduler(<span class=args><span class=kw>self</span></span>) </div></div><div class=idnt><a class=sourcelink href=source+distributed.recreate_exceptions.py.html#line-73>source</a> <a class=sourcelink href=distributed.recreate_exceptions.ReplayExceptionClient.html#f_scheduler>link</a></div></div></div></li></ul><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:05 </p></div></div></body></html>