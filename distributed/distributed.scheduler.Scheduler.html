<!DOCTYPE html><html><head><meta charset=utf-8><title>distributed.scheduler.Scheduler</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Distributed</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=distributed.html>&#9662; distributed</a> </li><li><ul><li><a href=distributed.actor.html>&#9656; actor</a> </li><li><a href=distributed.asyncio.html>&#9656; asyncio</a> </li><li><a href=distributed.batched.html>&#9656; batched</a> </li><li><a href=distributed.bokeh.html>&#9656; bokeh</a> </li><li><a href=distributed.cfexecutor.html>&#9656; cfexecutor</a> </li><li><a href=distributed.cli.html>&#9656; cli</a> </li><li><a href=distributed.client.html>&#9656; client</a> </li><li><a href=distributed.comm.html>&#9656; comm</a> </li><li><a href=distributed.compatibility.html>&#9656; compatibility</a> </li><li><a href=distributed.config.html>&#9656; config</a> </li><li><a href=distributed.core.html>&#9656; core</a> </li><li><a href=distributed.counter.html>&#9656; counter</a> </li><li><a href=distributed.dashboard.html>&#9656; dashboard</a> </li><li><a href=distributed.deploy.html>&#9656; deploy</a> </li><li><a href=distributed.diagnostics.html>&#9656; diagnostics</a> </li><li><a href=distributed.diskutils.html>&#9656; diskutils</a> </li><li><a href=distributed.event.html>&#9656; event</a> </li><li><a href=distributed.http.html>&#9656; http</a> </li><li><a href=distributed.lock.html>&#9656; lock</a> </li><li><a href=distributed.locket.html>&#9656; locket</a> </li><li><a href=distributed.metrics.html>&#9656; metrics</a> </li><li><a href=distributed.nanny.html>&#9656; nanny</a> </li><li><a href=distributed.node.html>&#9656; node</a> </li><li><a href=distributed.preloading.html>&#9656; preloading</a> </li><li><a href=distributed.process.html>&#9656; process</a> </li><li><a href=distributed.proctitle.html>&#9656; proctitle</a> </li><li><a href=distributed.profile.html>&#9656; profile</a> </li><li><a href=distributed.protocol.html>&#9656; protocol</a> </li><li><a href=distributed.publish.html>&#9656; publish</a> </li><li><a href=distributed.pubsub.html>&#9656; pubsub</a> </li><li><a href=distributed.pytest_resourceleaks.html>&#9656; pytest_resourceleaks</a> </li><li><a href=distributed.queues.html>&#9656; queues</a> </li><li><a href=distributed.recreate_exceptions.html>&#9656; recreate_exceptions</a> </li><li><a href=distributed.scheduler.html>&#9662; scheduler</a> </li><li><ul><li><a href=distributed.scheduler.ClientState.html> <i>class</i> ClientState</a> </li><li><a href=distributed.scheduler.CollectTaskMetaDataPlugin.html> <i>class</i> CollectTaskMetaDataPlugin</a> </li><li><a href=distributed.scheduler.KilledWorker.html> <i>class</i> KilledWorker</a> </li><li><div class=select><a href=distributed.scheduler.Scheduler.html> <i>class</i> Scheduler</a> </div></li><li><a href=distributed.scheduler.TaskGroup.html> <i>class</i> TaskGroup</a> </li><li><a href=distributed.scheduler.TaskPrefix.html> <i>class</i> TaskPrefix</a> </li><li><a href=distributed.scheduler.TaskState.html> <i>class</i> TaskState</a> </li><li><a href=distributed.scheduler.WorkerState.html> <i>class</i> WorkerState</a> </li><li><a href=distributed.scheduler.WorkerStatusPlugin.html> <i>class</i> WorkerStatusPlugin</a> </li></ul></li><li><a href=distributed.security.html>&#9656; security</a> </li><li><a href=distributed.semaphore.html>&#9656; semaphore</a> </li><li><a href=distributed.sizeof.html>&#9656; sizeof</a> </li><li><a href=distributed.stealing.html>&#9656; stealing</a> </li><li><a href=distributed.system.html>&#9656; system</a> </li><li><a href=distributed.system_monitor.html>&#9656; system_monitor</a> </li><li><a href=distributed.tests.html>&#9656; tests</a> </li><li><a href=distributed.threadpoolexecutor.html>&#9656; threadpoolexecutor</a> </li><li><a href=distributed.utils.html>&#9656; utils</a> </li><li><a href=distributed.utils_comm.html>&#9656; utils_comm</a> </li><li><a href=distributed.utils_perf.html>&#9656; utils_perf</a> </li><li><a href=distributed.utils_test.html>&#9656; utils_test</a> </li><li><a href=distributed.variable.html>&#9656; variable</a> </li><li><a href=distributed.versions.html>&#9656; versions</a> </li><li><a href=distributed.worker.html>&#9656; worker</a> </li><li><a href=distributed.worker_client.html>&#9656; worker_client</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Class Scheduler</h1><div id=path><a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.scheduler.html>scheduler</a>.<a class=symbol href=distributed.scheduler.Scheduler.html>Scheduler</a></div><p><div class=docline> Dynamic distributed task scheduler </div></p><h2>Declaration</h2><div class=decl><span class=kw>class</span> Scheduler(<a class=symbol href=distributed.node.ServerNode.html>ServerNode</a>)</div><a class=sourcelink href=source+distributed.scheduler.py.html#line-1007>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html>link</a><h2>Documentation</h2><pre>The scheduler tracks the current state of workers, data, and computations.
The scheduler listens for events and responds by controlling workers
appropriately.  It continuously tries to use the workers to execute an ever
growing dask graph.

All events are handled quickly, in linear time with respect to their input
(which is often of constant size) and generally within a millisecond.  To
accomplish this the scheduler tracks a lot of state.  Every operation
maintains the consistency of this state.

The scheduler communicates with the outside world through Comm objects.
It maintains a consistent and valid view of the world even when listening
to several clients at once.

A Scheduler is typically started either with the ``dask-scheduler``
executable::

     $ dask-scheduler
     Scheduler started at 127.0.0.1:8786

Or within a LocalCluster a Client starts up without connection
information::

    &gt;&gt;&gt; c = Client()  # doctest: +SKIP
    &gt;&gt;&gt; c.cluster.scheduler  # doctest: +SKIP
    Scheduler(...)

Users typically do not interact with the scheduler directly but rather with
the client object ``Client``.

**State**

The scheduler contains the following state variables.  Each variable is
listed along with what it stores and a brief description.

* **tasks:** ``{task key: TaskState}``
    Tasks currently known to the scheduler
* **unrunnable:** ``{TaskState}``
    Tasks in the &#34;no-worker&#34; state

* **workers:** ``{worker key: WorkerState}``
    Workers currently connected to the scheduler
* **idle:** ``{WorkerState}``:
    Set of workers that are not fully utilized
* **saturated:** ``{WorkerState}``:
    Set of workers that are not over-utilized

* **host_info:** ``{hostname: dict}``:
    Information about each worker host

* **clients:** ``{client key: ClientState}``
    Clients currently connected to the scheduler

* **services:** ``{str: port}``:
    Other services running on this scheduler, like Bokeh
* **loop:** ``IOLoop``:
    The running Tornado IOLoop
* **client_comms:** ``{client key: Comm}``
    For each client, a Comm object used to receive task requests and
    report task status updates.
* **stream_comms:** ``{worker key: Comm}``
    For each worker, a Comm object from which we both accept stimuli and
    report results
* **task_duration:** ``{key-prefix: time}``
    Time we expect certain functions to take, e.g. ``{&#39;sum&#39;: 0.25}``</pre><h2>Methods</h2><ul class=deflst><li><div class=fn><a id=f___init__></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f___init__>__init__</a>(<span class=args>self, loop=None, delete_interval=&#34;500ms&#34;, synchronize_worker_interval=&#34;60s&#34;, ...</span>) <span class=label>override</span></span></div><div class=fdetail id=fn___init__><div class=decl><div class=def><span class=kw>def</span> __init__( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">loop=<i>None</i>,</div><div class=args style="padding-left: 2em">delete_interval=<i>"500ms"</i>,</div><div class=args style="padding-left: 2em">synchronize_worker_interval=<i>"60s"</i>,</div><div class=args style="padding-left: 2em">services=<i>None</i>,</div><div class=args style="padding-left: 2em">service_kwargs=<i>None</i>,</div><div class=args style="padding-left: 2em">allowed_failures=<i>None</i>,</div><div class=args style="padding-left: 2em">extensions=<i>None</i>,</div><div class=args style="padding-left: 2em">validate=<i>None</i>,</div><div class=args style="padding-left: 2em">scheduler_file=<i>None</i>,</div><div class=args style="padding-left: 2em">security=<i>None</i>,</div><div class=args style="padding-left: 2em">worker_ttl=<i>None</i>,</div><div class=args style="padding-left: 2em">idle_timeout=<i>None</i>,</div><div class=args style="padding-left: 2em">interface=<i>None</i>,</div><div class=args style="padding-left: 2em">host=<i>None</i>,</div><div class=args style="padding-left: 2em">port=<i>0</i>,</div><div class=args style="padding-left: 2em">protocol=<i>None</i>,</div><div class=args style="padding-left: 2em">dashboard_address=<i>None</i>,</div><div class=args style="padding-left: 2em">dashboard=<i>None</i>,</div><div class=args style="padding-left: 2em">http_prefix=<i>"/"</i>,</div><div class=args style="padding-left: 2em">preload=<i>None</i>,</div><div class=args style="padding-left: 2em">preload_argv=<i>()</i>,</div><div class=args style="padding-left: 2em">plugins=<i>()</i>,</div><div class=args style="padding-left: 2em">**kwargs,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1080>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f___init__>link</a></div><p>This method overrides <a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.core.html>core</a>.<a class=symbol href=distributed.core.Server.html>Server</a>.<a class=symbol href=distributed.core.Server.html#f___init__>__init__</a>.</p></div></div></li><li><div class=fn><a id=f___repr__></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f___repr__>__repr__</a>(<span class=args>self</span>) </span></div><div class=fdetail id=fn___repr__><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1425>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f___repr__>link</a></div></div></div></li><li><div class=fn><a id=f_adaptive_target></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_adaptive_target>adaptive_target</a>(<span class=args>self, comm=None, target_duration=None</span>) </span><div class=docline> Desired number of workers based on the current workload </div></div><div class=fdetail id=fn_adaptive_target><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5424>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_adaptive_target>link</a></div><pre>This looks at the current running tasks and memory use, and returns a
number of desired workers.  This is often used by adaptive scheduling.</pre><h3>Parameters</h3><ul class=params><li><strong>target_duration</strong> : str <br><pre>A desired duration of time for computations to take.  This affects
how rapidly the scheduler will ask to scale.</pre></li></ul><h3>See also</h3><pre>distributed.deploy.Adaptive</pre></div></div></li><li><div class=fn><a id=f_add_keys></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_add_keys>add_keys</a>(<span class=args>self, comm=None, worker=None, keys=()</span>) </span><div class=docline> Learn that a worker has certain keys </div></div><div class=fdetail id=fn_add_keys><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3608>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_add_keys>link</a></div><pre>This should not be used in practice and is mostly here for legacy
reasons.  However, it is sent by workers from time to time.</pre></div></div></li><li><div class=fn><a id=f_add_plugin></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_add_plugin>add_plugin</a>(<span class=args>self, plugin=None, idempotent=False, **kwargs</span>) </span><div class=docline> Add external plugin to scheduler </div></div><div class=fdetail id=fn_add_plugin><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2837>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_add_plugin>link</a></div><pre>See https://distributed.readthedocs.io/en/latest/plugins.html</pre></div></div></li><li><div class=fn><a id=f_add_resources></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_add_resources>add_resources</a>(<span class=args>self, comm=None, worker=None, resources=None</span>) </span></div><div class=fdetail id=fn_add_resources><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5004>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_add_resources>link</a></div></div></div></li><li><div class=fn><a id=f_cancel_key></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_cancel_key>cancel_key</a>(<span class=args>self, key, client, retries=5, force=False</span>) </span><div class=docline> Cancel a particular key and all dependents </div></div><div class=fdetail id=fn_cancel_key><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2375>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_cancel_key>link</a></div></div></div></li><li><div class=fn><a id=f_check_idle></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_check_idle>check_idle</a>(<span class=args>self</span>) </span></div><div class=fdetail id=fn_check_idle><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5410>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_check_idle>link</a></div></div></div></li><li><div class=fn><a id=f_check_idle_saturated></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_check_idle_saturated>check_idle_saturated</a>(<span class=args>self, ws, occ=None</span>) </span><div class=docline> Update the status of the idle and saturated state </div></div><div class=fdetail id=fn_check_idle_saturated><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4906>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_check_idle_saturated>link</a></div><pre>The scheduler keeps track of workers that are ..

-  Saturated: have enough work to stay busy
-  Idle: do not have enough work to stay busy

They are considered saturated if they both have enough tasks to occupy
all of their threads, and if the expected runtime of those tasks is
large enough.

This is useful for load balancing and adaptivity.</pre></div></div></li><li><div class=fn><a id=f_clear_task_state></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_clear_task_state>clear_task_state</a>(<span class=args>self</span>) </span></div><div class=fdetail id=fn_clear_task_state><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2976>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_clear_task_state>link</a></div></div></div></li><li><div class=fn><a id=f_client_desires_keys></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_client_desires_keys>client_desires_keys</a>(<span class=args>self, keys=None, client=None</span>) </span></div><div class=fdetail id=fn_client_desires_keys><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2398>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_client_desires_keys>link</a></div></div></div></li><li><div class=fn><a id=f_client_heartbeat></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_client_heartbeat>client_heartbeat</a>(<span class=args>self, client=None</span>) </span><div class=docline> Handle heartbeats from Client </div></div><div class=fdetail id=fn_client_heartbeat><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2438>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_client_heartbeat>link</a></div></div></div></li><li><div class=fn><a id=f_client_releases_keys></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_client_releases_keys>client_releases_keys</a>(<span class=args>self, keys=None, client=None</span>) </span><div class=docline> Remove keys from client desired list </div></div><div class=fdetail id=fn_client_releases_keys><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2414>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_client_releases_keys>link</a></div></div></div></li><li><div class=fn><a id=f_coerce_address></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_coerce_address>coerce_address</a>(<span class=args>self, addr, resolve=True</span>) </span><div class=docline> Coerce possible input addresses to canonical form. *resolve* can be disabled for testing with fake hostnames. </div></div><div class=fdetail id=fn_coerce_address><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5019>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_coerce_address>link</a></div><pre>Handles strings, tuples, or aliases.</pre></div></div></li><li><div class=fn><a id=f_coerce_hostname></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_coerce_hostname>coerce_hostname</a>(<span class=args>self, host</span>) </span><div class=docline> Coerce the hostname of a worker. </div></div><div class=fdetail id=fn_coerce_hostname><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5041>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_coerce_hostname>link</a></div></div></div></li><li><div class=fn><a id=f_consume_resources></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_consume_resources>consume_resources</a>(<span class=args>self, ts, ws</span>) </span></div><div class=fdetail id=fn_consume_resources><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4990>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_consume_resources>link</a></div></div></div></li><li><div class=fn><a id=f_decide_worker></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_decide_worker>decide_worker</a>(<span class=args>self, ts</span>) </span><div class=docline> Decide on a worker for task *ts*. Return a WorkerState. </div></div><div class=fdetail id=fn_decide_worker><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4100>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_decide_worker>link</a></div></div></div></li><li><div class=fn><a id=f_get_comm_cost></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_get_comm_cost>get_comm_cost</a>(<span class=args>self, ts, ws</span>) </span><div class=docline> Get the estimated communication cost (in s.) to compute the task on the given worker. </div></div><div class=fdetail id=fn_get_comm_cost><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3834>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_comm_cost>link</a></div></div></div></li><li><div class=fn><a id=f_get_has_what></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_has_what>get_has_what</a>(<span class=args>self, comm=None, workers=None</span>) </span></div><div class=fdetail id=fn_get_has_what><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3768>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_has_what>link</a></div></div></div></li><li><div class=fn><a id=f_get_metadata></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_metadata>get_metadata</a>(<span class=args>self, comm=None, keys=None, default=no_default</span>) </span></div><div class=fdetail id=fn_get_metadata><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3882>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_metadata>link</a></div></div></div></li><li><div class=fn><a id=f_get_nbytes></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_nbytes>get_nbytes</a>(<span class=args>self, comm=None, keys=None, summary=True</span>) </span></div><div class=fdetail id=fn_get_nbytes><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3815>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_nbytes>link</a></div></div></div></li><li><div class=fn><a id=f_get_ncores></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_ncores>get_ncores</a>(<span class=args>self, comm=None, workers=None</span>) </span></div><div class=fdetail id=fn_get_ncores><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3780>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_ncores>link</a></div></div></div></li><li><div class=fn><a id=f_get_processing></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_processing>get_processing</a>(<span class=args>self, comm=None, workers=None</span>) </span></div><div class=fdetail id=fn_get_processing><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3746>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_processing>link</a></div></div></div></li><li><div class=fn><a id=f_get_task_duration></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_get_task_duration>get_task_duration</a>(<span class=args>self, ts, default=None</span>) </span><div class=docline> Get the estimated computation cost of the given task (not including any communication cost). </div></div><div class=fdetail id=fn_get_task_duration><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3841>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_task_duration>link</a></div></div></div></li><li><div class=fn><a id=f_get_task_status></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_task_status>get_task_status</a>(<span class=args>self, comm=None, keys=None</span>) </span></div><div class=fdetail id=fn_get_task_status><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3894>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_task_status>link</a></div></div></div></li><li><div class=fn><a id=f_get_task_stream></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_task_stream>get_task_stream</a>(<span class=args>self, comm=None, start=None, stop=None, count=None</span>) </span></div><div class=fdetail id=fn_get_task_stream><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3899>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_task_stream>link</a></div></div></div></li><li><div class=fn><a id=f_get_who_has></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_get_who_has>get_who_has</a>(<span class=args>self, comm=None, keys=None</span>) </span></div><div class=fdetail id=fn_get_who_has><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3755>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_who_has>link</a></div></div></div></li><li><div class=fn><a id=f_get_worker_service_addr></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_get_worker_service_addr>get_worker_service_addr</a>(<span class=args>self, worker, service_name, protocol=False</span>) </span><div class=docline> Get the (host, port) address of the named service on the *worker*. Returns None if the service doesn&#39;t exist. </div></div><div class=fdetail id=fn_get_worker_service_addr><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1445>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_get_worker_service_addr>link</a></div><h3>Parameters</h3><ul class=params><li><strong>worker</strong> : address </li><li><strong>service_name</strong> : str <br><pre>Common services include &#39;bokeh&#39; and &#39;nanny&#39;</pre></li><li><strong>protocol</strong> : boolean <br><pre>Whether or not to include a full address with protocol (True)
or just a (host, port) pair</pre></li></ul></div></div></li><li><div class=fn><a id=f_handle_long_running></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_handle_long_running>handle_long_running</a>(<span class=args>self, key=None, worker=None, compute_duration=None</span>) </span><div class=docline> A task has seceded from the thread pool </div></div><div class=fdetail id=fn_handle_long_running><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2786>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_long_running>link</a></div><pre>We stop the task from being stolen in the future, and change task
duration accounting as if the task has stopped.</pre></div></div></li><li><div class=fn><a id=f_handle_missing_data></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_handle_missing_data>handle_missing_data</a>(<span class=args>self, key=None, errant_worker=None, **kwargs</span>) </span></div><div class=fdetail id=fn_handle_missing_data><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2751>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_missing_data>link</a></div></div></div></li><li><div class=fn><a id=f_handle_release_data></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_handle_release_data>handle_release_data</a>(<span class=args>self, key=None, worker=None, client=None, **msg</span>) </span></div><div class=fdetail id=fn_handle_release_data><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2741>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_release_data>link</a></div></div></div></li><li><div class=fn><a id=f_handle_task_erred></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_handle_task_erred>handle_task_erred</a>(<span class=args>self, key=None, **msg</span>) </span></div><div class=fdetail id=fn_handle_task_erred><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2737>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_task_erred>link</a></div></div></div></li><li><div class=fn><a id=f_handle_task_finished></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_handle_task_finished>handle_task_finished</a>(<span class=args>self, key=None, worker=None, **msg</span>) </span></div><div class=fdetail id=fn_handle_task_finished><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2730>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_task_finished>link</a></div></div></div></li><li><div class=fn><a id=f_handle_uncaught_error></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_handle_uncaught_error>handle_uncaught_error</a>(<span class=args>self, **msg</span>) </span></div><div class=fdetail id=fn_handle_uncaught_error><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2727>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_handle_uncaught_error>link</a></div></div></div></li><li><div class=fn><a id=f_heartbeat_worker></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_heartbeat_worker>heartbeat_worker</a>(<span class=args>self, comm=None, address=None, resolve_address=True, now=None, ...</span>) </span></div><div class=fdetail id=fn_heartbeat_worker><div class=decl><div class=def><span class=kw>def</span> heartbeat_worker( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">comm=<i>None</i>,</div><div class=args style="padding-left: 2em">address=<i>None</i>,</div><div class=args style="padding-left: 2em">resolve_address=<i>True</i>,</div><div class=args style="padding-left: 2em">now=<i>None</i>,</div><div class=args style="padding-left: 2em">resources=<i>None</i>,</div><div class=args style="padding-left: 2em">host_info=<i>None</i>,</div><div class=args style="padding-left: 2em">metrics=<i>None</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1617>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_heartbeat_worker>link</a></div></div></div></li><li><div class=fn><a id=f_identity></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_identity>identity</a>(<span class=args>self, comm=None</span>) <span class=label>override</span></span><div class=docline> Basic information about ourselves and our cluster </div></div><div class=fdetail id=fn_identity><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1432>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_identity>link</a></div><p>This method overrides <a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.core.html>core</a>.<a class=symbol href=distributed.core.Server.html>Server</a>.<a class=symbol href=distributed.core.Server.html#f_identity>identity</a>.</p></div></div></li><li><div class=fn><a id=f_new_task></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_new_task>new_task</a>(<span class=args>self, key, spec, state</span>) </span><div class=docline> Create a new task, and associated states </div></div><div class=fdetail id=fn_new_task><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2111>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_new_task>link</a></div></div></div></li><li><div class=fn><a id=f_reevaluate_occupancy></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_reevaluate_occupancy>reevaluate_occupancy</a>(<span class=args>self, worker_index=0</span>) </span><div class=docline> Periodically reassess task duration time </div></div><div class=fdetail id=fn_reevaluate_occupancy><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5326>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_reevaluate_occupancy>link</a></div><pre>The expected duration of a task can change over time.  Unfortunately we
don&#39;t have a good constant-time way to propagate the effects of these
changes out to the summaries that they affect, like the total expected
runtime of each of the workers, or what tasks are stealable.

In this coroutine we walk through all of the workers and re-align their
estimates with the current state of tasks.  We do this periodically
rather than at every transition, and we only do it if the scheduler
process isn&#39;t under load (using psutil.Process.cpu_percent()).  This
lets us avoid this fringe optimization when we have better things to
think about.</pre></div></div></li><li><div class=fn><a id=f_release_resources></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_release_resources>release_resources</a>(<span class=args>self, ts, ws</span>) </span></div><div class=fdetail id=fn_release_resources><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4995>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_release_resources>link</a></div></div></div></li><li><div class=fn><a id=f_release_worker_data></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_release_worker_data>release_worker_data</a>(<span class=args>self, comm=None, keys=None, worker=None</span>) </span></div><div class=fdetail id=fn_release_worker_data><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2770>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_release_worker_data>link</a></div></div></div></li><li><div class=fn><a id=f_remove_client></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_remove_client>remove_client</a>(<span class=args>self, client=None</span>) </span><div class=docline> Remove client from network </div></div><div class=fdetail id=fn_remove_client><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2654>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_remove_client>link</a></div></div></div></li><li><div class=fn><a id=f_remove_key></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_remove_key>remove_key</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_remove_key><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4637>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_remove_key>link</a></div></div></div></li><li><div class=fn><a id=f_remove_plugin></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_remove_plugin>remove_plugin</a>(<span class=args>self, plugin</span>) </span><div class=docline> Remove external plugin from scheduler </div></div><div class=fdetail id=fn_remove_plugin><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2851>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_remove_plugin>link</a></div></div></div></li><li><div class=fn><a id=f_remove_resources></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_remove_resources>remove_resources</a>(<span class=args>self, worker</span>) </span></div><div class=fdetail id=fn_remove_resources><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5014>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_remove_resources>link</a></div></div></div></li><li><div class=fn><a id=f_report></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_report>report</a>(<span class=args>self, msg, ts=None, client=None</span>) </span><div class=docline> Publish updates to all listening Queues and Comms </div></div><div class=fdetail id=fn_report><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2573>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_report>link</a></div><pre>If the message contains a key then we only send the message to those
comms that care about the key.</pre></div></div></li><li><div class=fn><a id=f_report_on_key></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_report_on_key>report_on_key</a>(<span class=args>self, key=None, ts=None, client=None</span>) </span></div><div class=fdetail id=fn_report_on_key><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3668>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_report_on_key>link</a></div></div></div></li><li><div class=fn><a id=f_reschedule></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_reschedule>reschedule</a>(<span class=args>self, key=None, worker=None</span>) </span><div class=docline> Reschedule a task </div></div><div class=fdetail id=fn_reschedule><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4882>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_reschedule>link</a></div><pre>Things may have shifted and this task may now be better suited to run
elsewhere</pre></div></div></li><li><div class=fn><a id=f_run_function></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_run_function>run_function</a>(<span class=args>self, stream, function, args=(), kwargs={}, wait=True</span>) </span><div class=docline> Run a function within this process </div></div><div class=fdetail id=fn_run_function><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3857>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_run_function>link</a></div><h3>See also</h3><pre>Client.run_on_scheduler:</pre></div></div></li><li><div class=fn><a id=f_send_task_to_worker></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_send_task_to_worker>send_task_to_worker</a>(<span class=args>self, worker, key</span>) </span><div class=docline> Send a single computational task to a worker </div></div><div class=fdetail id=fn_send_task_to_worker><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2686>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_send_task_to_worker>link</a></div></div></div></li><li><div class=fn><a id=f_set_metadata></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_set_metadata>set_metadata</a>(<span class=args>self, comm=None, keys=None, value=None</span>) </span></div><div class=fdetail id=fn_set_metadata><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3869>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_set_metadata>link</a></div></div></div></li><li><div class=fn><a id=f_start_ipython></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_start_ipython>start_ipython</a>(<span class=args>self, comm=None</span>) </span><div class=docline> Start an IPython kernel </div></div><div class=fdetail id=fn_start_ipython><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5068>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_start_ipython>link</a></div><pre>Returns Jupyter connection info dictionary.</pre></div></div></li><li><div class=fn><a id=f_start_task_metadata></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_start_task_metadata>start_task_metadata</a>(<span class=args>self, comm=None, name=None</span>) </span></div><div class=fdetail id=fn_start_task_metadata><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3906>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_start_task_metadata>link</a></div></div></div></li><li><div class=fn><a id=f_stimulus_cancel></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_stimulus_cancel>stimulus_cancel</a>(<span class=args>self, comm, keys=None, client=None, force=False</span>) </span><div class=docline> Stop execution on a list of keys </div></div><div class=fdetail id=fn_stimulus_cancel><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2365>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stimulus_cancel>link</a></div></div></div></li><li><div class=fn><a id=f_stimulus_missing_data></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_stimulus_missing_data>stimulus_missing_data</a>(<span class=args>self, cause=None, key=None, worker=None, ensure=True, **kwargs</span>) </span><div class=docline> Mark that certain keys have gone missing. Recover. </div></div><div class=fdetail id=fn_stimulus_missing_data><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2193>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stimulus_missing_data>link</a></div></div></div></li><li><div class=fn><a id=f_stimulus_retry></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_stimulus_retry>stimulus_retry</a>(<span class=args>self, comm=None, keys=None, client=None</span>) </span></div><div class=fdetail id=fn_stimulus_retry><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2224>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stimulus_retry>link</a></div></div></div></li><li><div class=fn><a id=f_stimulus_task_erred></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_stimulus_task_erred>stimulus_task_erred</a>(<span class=args>self, key=None, worker=None, exception=None, traceback=None, **kwargs</span>) </span><div class=docline> Mark that a task has erred on a particular worker </div></div><div class=fdetail id=fn_stimulus_task_erred><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2163>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stimulus_task_erred>link</a></div></div></div></li><li><div class=fn><a id=f_stimulus_task_finished></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_stimulus_task_finished>stimulus_task_finished</a>(<span class=args>self, key=None, worker=None, **kwargs</span>) </span><div class=docline> Mark that a task has finished execution on a particular worker </div></div><div class=fdetail id=fn_stimulus_task_finished><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2133>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stimulus_task_finished>link</a></div></div></div></li><li><div class=fn><a id=f_stop_task_metadata></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_stop_task_metadata>stop_task_metadata</a>(<span class=args>self, comm=None, name=None</span>) </span></div><div class=fdetail id=fn_stop_task_metadata><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3911>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_stop_task_metadata>link</a></div></div></div></li><li><div class=fn><a id=f_story></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_story>story</a>(<span class=args>self, *keys</span>) </span><div class=docline> Get all transitions that touch one of the input keys </div></div><div class=fdetail id=fn_story><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4873>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_story>link</a></div></div></div></li><li><div class=fn><a id=f_subscribe_worker_status></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_subscribe_worker_status>subscribe_worker_status</a>(<span class=args>self, comm=None</span>) </span></div><div class=fdetail id=fn_subscribe_worker_status><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3738>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_subscribe_worker_status>link</a></div></div></div></li><li><div class=fn><a id=f_transition></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_transition>transition</a>(<span class=args>self, key, finish, *args, **kwargs</span>) </span><div class=docline> Transition a key from its current state to the finish state </div></div><div class=fdetail id=fn_transition><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4763>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition>link</a></div><h3>Returns</h3><ul class=params><li> Dictionary of recommendations for future transitions </li></ul><h3>Examples</h3><pre>&gt;&gt;&gt; self.transition(&#39;x&#39;, &#39;waiting&#39;)
{&#39;x&#39;: &#39;processing&#39;}</pre><h3>See also</h3><pre>Scheduler.transitions: transitive version of this function</pre></div></div></li><li><div class=fn><a id=f_transition_erred_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_erred_released>transition_erred_released</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_erred_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4428>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_erred_released>link</a></div></div></div></li><li><div class=fn><a id=f_transition_memory_forgotten></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_memory_forgotten>transition_memory_forgotten</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_memory_forgotten><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4687>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_memory_forgotten>link</a></div></div></div></li><li><div class=fn><a id=f_transition_memory_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_memory_released>transition_memory_released</a>(<span class=args>self, key, safe=False</span>) </span></div><div class=fdetail id=fn_transition_memory_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4328>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_memory_released>link</a></div></div></div></li><li><div class=fn><a id=f_transition_no_worker_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_no_worker_released>transition_no_worker_released</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_no_worker_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4611>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_no_worker_released>link</a></div></div></div></li><li><div class=fn><a id=f_transition_no_worker_waiting></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_no_worker_waiting>transition_no_worker_waiting</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_no_worker_waiting><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4056>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_no_worker_waiting>link</a></div></div></div></li><li><div class=fn><a id=f_transition_processing_erred></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_processing_erred>transition_processing_erred</a>(<span class=args>self, key, cause=None, exception=None, traceback=None, **kwargs</span>) </span></div><div class=fdetail id=fn_transition_processing_erred><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4542>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_processing_erred>link</a></div></div></div></li><li><div class=fn><a id=f_transition_processing_memory></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_processing_memory>transition_processing_memory</a>(<span class=args>self, key, nbytes=None, type=None, typename=None, worker=None, ...</span>) </span></div><div class=fdetail id=fn_transition_processing_memory><div class=decl><div class=def><span class=kw>def</span> transition_processing_memory( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">key,</div><div class=args style="padding-left: 2em">nbytes=<i>None</i>,</div><div class=args style="padding-left: 2em">type=<i>None</i>,</div><div class=args style="padding-left: 2em">typename=<i>None</i>,</div><div class=args style="padding-left: 2em">worker=<i>None</i>,</div><div class=args style="padding-left: 2em">startstops=<i>None</i>,</div><div class=args style="padding-left: 2em">**kwargs,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4221>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_processing_memory>link</a></div></div></div></li><li><div class=fn><a id=f_transition_processing_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_processing_released>transition_processing_released</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_processing_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4498>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_processing_released>link</a></div></div></div></li><li><div class=fn><a id=f_transition_released_erred></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_released_erred>transition_released_erred</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_released_erred><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4387>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_released_erred>link</a></div></div></div></li><li><div class=fn><a id=f_transition_released_forgotten></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_released_forgotten>transition_released_forgotten</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_released_forgotten><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4727>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_released_forgotten>link</a></div></div></div></li><li><div class=fn><a id=f_transition_released_waiting></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_released_waiting>transition_released_waiting</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_released_waiting><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4005>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_released_waiting>link</a></div></div></div></li><li><div class=fn><a id=f_transition_waiting_memory></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_waiting_memory>transition_waiting_memory</a>(<span class=args>self, key, nbytes=None, worker=None, **kwargs</span>) </span></div><div class=fdetail id=fn_transition_waiting_memory><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4186>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_waiting_memory>link</a></div></div></div></li><li><div class=fn><a id=f_transition_waiting_processing></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_waiting_processing>transition_waiting_processing</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_waiting_processing><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4140>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_waiting_processing>link</a></div></div></div></li><li><div class=fn><a id=f_transition_waiting_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_transition_waiting_released>transition_waiting_released</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_transition_waiting_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4462>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transition_waiting_released>link</a></div></div></div></li><li><div class=fn><a id=f_transitions></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_transitions>transitions</a>(<span class=args>self, recommendations</span>) </span><div class=docline> Process transitions until none are left </div></div><div class=fdetail id=fn_transitions><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4855>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_transitions>link</a></div><pre>This includes feedback from previous transitions and continues until we
reach a steady state</pre></div></div></li><li><div class=fn><a id=f_update_data></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_update_data>update_data</a>(<span class=args>self, comm=None, who_has=None, nbytes=None, client=None, serializers=None</span>) </span><div class=docline> Learn that new data has entered the network from an external source </div></div><div class=fdetail id=fn_update_data><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3632>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_update_data>link</a></div><h3>See also</h3><pre>Scheduler.mark_key_in_memory</pre></div></div></li><li><div class=fn><a id=f_update_graph></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_update_graph>update_graph</a>(<span class=args>self, client=None, tasks=None, keys=None, dependencies=None, ...</span>) </span><div class=docline> Add new computations to the internal dask graph </div></div><div class=fdetail id=fn_update_graph><div class=decl><div class=def><span class=kw>def</span> update_graph( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">client=<i>None</i>,</div><div class=args style="padding-left: 2em">tasks=<i>None</i>,</div><div class=args style="padding-left: 2em">keys=<i>None</i>,</div><div class=args style="padding-left: 2em">dependencies=<i>None</i>,</div><div class=args style="padding-left: 2em">restrictions=<i>None</i>,</div><div class=args style="padding-left: 2em">priority=<i>None</i>,</div><div class=args style="padding-left: 2em">loose_restrictions=<i>None</i>,</div><div class=args style="padding-left: 2em">resources=<i>None</i>,</div><div class=args style="padding-left: 2em">submitting_task=<i>None</i>,</div><div class=args style="padding-left: 2em">retries=<i>None</i>,</div><div class=args style="padding-left: 2em">user_priority=<i>0</i>,</div><div class=args style="padding-left: 2em">actors=<i>None</i>,</div><div class=args style="padding-left: 2em">fifo_timeout=<i>0</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1876>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_update_graph>link</a></div><pre>This happens whenever the Client calls submit, map, get, or compute.</pre></div></div></li><li><div class=fn><a id=f_update_graph_hlg></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_update_graph_hlg>update_graph_hlg</a>(<span class=args>self, client=None, hlg=None, keys=None, dependencies=None, restrictions=None, ...</span>) </span></div><div class=fdetail id=fn_update_graph_hlg><div class=decl><div class=def><span class=kw>def</span> update_graph_hlg( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">client=<i>None</i>,</div><div class=args style="padding-left: 2em">hlg=<i>None</i>,</div><div class=args style="padding-left: 2em">keys=<i>None</i>,</div><div class=args style="padding-left: 2em">dependencies=<i>None</i>,</div><div class=args style="padding-left: 2em">restrictions=<i>None</i>,</div><div class=args style="padding-left: 2em">priority=<i>None</i>,</div><div class=args style="padding-left: 2em">loose_restrictions=<i>None</i>,</div><div class=args style="padding-left: 2em">resources=<i>None</i>,</div><div class=args style="padding-left: 2em">submitting_task=<i>None</i>,</div><div class=args style="padding-left: 2em">retries=<i>None</i>,</div><div class=args style="padding-left: 2em">user_priority=<i>0</i>,</div><div class=args style="padding-left: 2em">actors=<i>None</i>,</div><div class=args style="padding-left: 2em">fifo_timeout=<i>0</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-1824>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_update_graph_hlg>link</a></div></div></div></li><li><div class=fn><a id=f_valid_workers></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_valid_workers>valid_workers</a>(<span class=args>self, ts</span>) </span><div class=docline> Return set of currently valid workers for key </div></div><div class=fdetail id=fn_valid_workers><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-4941>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_valid_workers>link</a></div><pre>If all workers are valid then this returns ``True``.
This checks tracks the following state:

*  worker_restrictions
*  host_restrictions
*  resource_restrictions</pre></div></div></li><li><div class=fn><a id=f_validate_erred></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_erred>validate_erred</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_erred><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2498>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_erred>link</a></div></div></div></li><li><div class=fn><a id=f_validate_key></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_key>validate_key</a>(<span class=args>self, key, ts=None</span>) </span></div><div class=fdetail id=fn_validate_key><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2503>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_key>link</a></div></div></div></li><li><div class=fn><a id=f_validate_memory></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_memory>validate_memory</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_memory><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2478>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_memory>link</a></div></div></div></li><li><div class=fn><a id=f_validate_no_worker></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_no_worker>validate_no_worker</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_no_worker><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2488>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_no_worker>link</a></div></div></div></li><li><div class=fn><a id=f_validate_processing></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_processing>validate_processing</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_processing><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2467>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_processing>link</a></div></div></div></li><li><div class=fn><a id=f_validate_released></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_released>validate_released</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_released><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2446>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_released>link</a></div></div></div></li><li><div class=fn><a id=f_validate_state></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_state>validate_state</a>(<span class=args>self, allow_overlap=False</span>) </span></div><div class=fdetail id=fn_validate_state><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2527>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_state>link</a></div></div></div></li><li><div class=fn><a id=f_validate_waiting></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.Scheduler.html#f_validate_waiting>validate_waiting</a>(<span class=args>self, key</span>) </span></div><div class=fdetail id=fn_validate_waiting><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2456>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_validate_waiting>link</a></div></div></div></li><li><div class=fn><a id=f_worker_objective></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_worker_objective>worker_objective</a>(<span class=args>self, ts, ws</span>) </span><div class=docline> Objective function to determine which worker should get the task </div></div><div class=fdetail id=fn_worker_objective><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5081>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_worker_objective>link</a></div><pre>Minimize expected start time.  If a tie then break with data storage.</pre></div></div></li><li><div class=fn><a id=f_worker_send></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_worker_send>worker_send</a>(<span class=args>self, worker, msg</span>) </span><div class=docline> Send message to worker </div></div><div class=fdetail id=fn_worker_send><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-2855>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_worker_send>link</a></div><pre>This also handles connection failures by adding a callback to remove
the worker on the next cycle.</pre></div></div></li><li><div class=fn><a id=f_workers_list></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_workers_list>workers_list</a>(<span class=args>self, workers</span>) </span><div class=docline> List of qualifying workers </div></div><div class=fdetail id=fn_workers_list><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-5050>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_workers_list>link</a></div><pre>Takes a list of worker addresses or hostnames.
Returns a list of all worker addresses that match</pre></div></div></li><li><div class=fn><a id=f_workers_to_close></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.scheduler.Scheduler.html#f_workers_to_close>workers_to_close</a>(<span class=args>self, comm=None, memory_ratio=None, n=None, key=None, minimum=None, ...</span>) </span><div class=docline> Find workers that we can close with low cost </div></div><div class=fdetail id=fn_workers_to_close><div class=decl><div class=def><span class=kw>def</span> workers_to_close( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">comm=<i>None</i>,</div><div class=args style="padding-left: 2em">memory_ratio=<i>None</i>,</div><div class=args style="padding-left: 2em">n=<i>None</i>,</div><div class=args style="padding-left: 2em">key=<i>None</i>,</div><div class=args style="padding-left: 2em">minimum=<i>None</i>,</div><div class=args style="padding-left: 2em">target=<i>None</i>,</div><div class=args style="padding-left: 2em">attribute=<i>"address"</i>,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-3366>source</a> <a class=sourcelink href=distributed.scheduler.Scheduler.html#f_workers_to_close>link</a></div><pre>This returns a list of workers that are good candidates to retire.
These workers are not running anything and are storing
relatively little data relative to their peers.  If all workers are
idle then we still maintain enough workers to have enough RAM to store
our data, with a comfortable buffer.

This is for use with systems like ``distributed.deploy.adaptive``.</pre><h3>Parameters</h3><ul class=params><li><strong>memory_factor</strong> : Number <br><pre>Amount of extra space we want to have for our stored data.
Defaults two 2, or that we want to have twice as much memory as we
currently have data.</pre></li><li><strong>n</strong> : int <br><pre>Number of workers to close</pre></li><li><strong>minimum</strong> : int <br><pre>Minimum number of workers to keep around</pre></li><li><strong>key</strong> : Callable(WorkerState) <br><pre>An optional callable mapping a WorkerState object to a group
affiliation.  Groups will be closed together.  This is useful when
closing workers must be done collectively, such as by hostname.</pre></li><li><strong>target</strong> : int <br><pre>Target number of workers to have after we close</pre></li><li><strong>attribute</strong> : str <br><pre>The attribute of the WorkerState object to return, like &#34;address&#34;
or &#34;name&#34;.  Defaults to &#34;address&#34;.</pre></li></ul><h3>Returns</h3><ul class=params><li> list of worker addresses that are OK to close </li></ul><h3>Examples</h3><pre>&gt;&gt;&gt; scheduler.workers_to_close()
[&#39;tcp://192.168.0.1:1234&#39;, &#39;tcp://192.168.0.2:1234&#39;]

Group workers by hostname prior to closing

&gt;&gt;&gt; scheduler.workers_to_close(key=lambda ws: ws.host)
[&#39;tcp://192.168.0.1:1234&#39;, &#39;tcp://192.168.0.1:4567&#39;]

Remove two workers

&gt;&gt;&gt; scheduler.workers_to_close(n=2)

Keep enough workers to have twice as much memory as we we need.

&gt;&gt;&gt; scheduler.workers_to_close(memory_ratio=2)</pre><h3>See also</h3><pre>Scheduler.retire_workers</pre></div></div></li></ul><h2>Inherited methods</h3><ul class=deflst><li><div>Methods inherited from <a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.node.html>node</a>.<a class=symbol href=distributed.node.ServerNode.html>ServerNode</a>:</div><div><a class=symbol href=distributed.node.ServerNode.html#f_get_logs>get_logs</a>, <a class=symbol href=distributed.node.ServerNode.html#f_service_ports>service_ports</a>, <a class=symbol href=distributed.node.ServerNode.html#f_start_http_server>start_http_server</a>, <a class=symbol href=distributed.node.ServerNode.html#f_start_services>start_services</a>, <a class=symbol href=distributed.node.ServerNode.html#f_stop_services>stop_services</a>, <a class=symbol href=distributed.node.ServerNode.html#f_versions>versions</a></div><li><div>Methods inherited from <a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.core.html>core</a>.<a class=symbol href=distributed.core.Server.html>Server</a>:</div><div><a class=symbol href=distributed.core.Server.html#f___await__>__await__</a>, <a class=symbol href=distributed.core.Server.html#f_address>address</a>, <a class=symbol href=distributed.core.Server.html#f_close>close</a>, <a class=symbol href=distributed.core.Server.html#f_listen_address>listen_address</a>, <a class=symbol href=distributed.core.Server.html#f_listener>listener</a>, <a class=symbol href=distributed.core.Server.html#f_log_event>log_event</a>, <a class=symbol href=distributed.core.Server.html#f_port>port</a>, <a class=symbol href=distributed.core.Server.html#f_start_periodic_callbacks>start_periodic_callbacks</a>, <a class=symbol href=distributed.core.Server.html#f_status>status</a>, <a class=symbol href=distributed.core.Server.html#f_stop>stop</a></div></ul><h2>Reexports</h2><ul class=deflst><li> Imported in <a class=symbol href=distributed.utils_test.html>distributed.utils_test</a>. </li><li> Imported in <a class=symbol href=distributed.comm.tests.test_ucx.html>distributed.comm.tests.test_ucx</a>. </li><li> Imported in <a class=symbol href=distributed.cli.dask_scheduler.html>distributed.cli.dask_scheduler</a>. </li><li> Imported in <a class=symbol href=distributed.cli.tests.test_dask_worker.html>distributed.cli.tests.test_dask_worker</a>. </li><li> Imported in <a class=symbol href=distributed.cli.tests.test_dask_scheduler.html>distributed.cli.tests.test_dask_scheduler</a>. </li><li> Imported in <a class=symbol href=distributed.diagnostics.progress_stream.html>distributed.diagnostics.progress_stream</a>. </li><li> Imported in <a class=symbol href=distributed.diagnostics.tests.test_progressbar.html>distributed.diagnostics.tests.test_progressbar</a>. </li><li> Imported in <a class=symbol href=distributed.diagnostics.tests.test_scheduler_plugin.html>distributed.diagnostics.tests.test_scheduler_plugin</a>. </li><li> Imported in <a class=symbol href=distributed.deploy.spec.html>distributed.deploy.spec</a>. </li><li> Imported in <a class=symbol href=distributed.deploy.local.html>distributed.deploy.local</a>. </li><li> Imported in <a class=symbol href=distributed.deploy.ssh.html>distributed.deploy.ssh</a> as _Scheduler. </li><li> Imported in <a class=symbol href=distributed.tests.test_utils_test.html>distributed.tests.test_utils_test</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_tls_functional.html>distributed.tests.test_tls_functional</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_preload.html>distributed.tests.test_preload</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_nanny.html>distributed.tests.test_nanny</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_scheduler.html>distributed.tests.test_scheduler</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_client.html>distributed.tests.test_client</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker.html>distributed.tests.test_worker</a>. </li><li> Imported in <a class=symbol href=distributed.html>distributed</a>. </li></ul><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:05 </p></div></div></body></html>