<!DOCTYPE html><html><head><meta charset=utf-8><title>distributed.worker</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Distributed</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=distributed.html>&#9662; distributed</a> </li><li><ul><li><a href=distributed.actor.html>&#9656; actor</a> </li><li><a href=distributed.asyncio.html>&#9656; asyncio</a> </li><li><a href=distributed.batched.html>&#9656; batched</a> </li><li><a href=distributed.bokeh.html>&#9656; bokeh</a> </li><li><a href=distributed.cfexecutor.html>&#9656; cfexecutor</a> </li><li><a href=distributed.cli.html>&#9656; cli</a> </li><li><a href=distributed.client.html>&#9656; client</a> </li><li><a href=distributed.comm.html>&#9656; comm</a> </li><li><a href=distributed.compatibility.html>&#9656; compatibility</a> </li><li><a href=distributed.config.html>&#9656; config</a> </li><li><a href=distributed.core.html>&#9656; core</a> </li><li><a href=distributed.counter.html>&#9656; counter</a> </li><li><a href=distributed.dashboard.html>&#9656; dashboard</a> </li><li><a href=distributed.deploy.html>&#9656; deploy</a> </li><li><a href=distributed.diagnostics.html>&#9656; diagnostics</a> </li><li><a href=distributed.diskutils.html>&#9656; diskutils</a> </li><li><a href=distributed.event.html>&#9656; event</a> </li><li><a href=distributed.http.html>&#9656; http</a> </li><li><a href=distributed.lock.html>&#9656; lock</a> </li><li><a href=distributed.locket.html>&#9656; locket</a> </li><li><a href=distributed.metrics.html>&#9656; metrics</a> </li><li><a href=distributed.nanny.html>&#9656; nanny</a> </li><li><a href=distributed.node.html>&#9656; node</a> </li><li><a href=distributed.preloading.html>&#9656; preloading</a> </li><li><a href=distributed.process.html>&#9656; process</a> </li><li><a href=distributed.proctitle.html>&#9656; proctitle</a> </li><li><a href=distributed.profile.html>&#9656; profile</a> </li><li><a href=distributed.protocol.html>&#9656; protocol</a> </li><li><a href=distributed.publish.html>&#9656; publish</a> </li><li><a href=distributed.pubsub.html>&#9656; pubsub</a> </li><li><a href=distributed.pytest_resourceleaks.html>&#9656; pytest_resourceleaks</a> </li><li><a href=distributed.queues.html>&#9656; queues</a> </li><li><a href=distributed.recreate_exceptions.html>&#9656; recreate_exceptions</a> </li><li><a href=distributed.scheduler.html>&#9656; scheduler</a> </li><li><a href=distributed.security.html>&#9656; security</a> </li><li><a href=distributed.semaphore.html>&#9656; semaphore</a> </li><li><a href=distributed.sizeof.html>&#9656; sizeof</a> </li><li><a href=distributed.stealing.html>&#9656; stealing</a> </li><li><a href=distributed.system.html>&#9656; system</a> </li><li><a href=distributed.system_monitor.html>&#9656; system_monitor</a> </li><li><a href=distributed.tests.html>&#9656; tests</a> </li><li><a href=distributed.threadpoolexecutor.html>&#9656; threadpoolexecutor</a> </li><li><a href=distributed.utils.html>&#9656; utils</a> </li><li><a href=distributed.utils_comm.html>&#9656; utils_comm</a> </li><li><a href=distributed.utils_perf.html>&#9656; utils_perf</a> </li><li><a href=distributed.utils_test.html>&#9656; utils_test</a> </li><li><a href=distributed.variable.html>&#9656; variable</a> </li><li><a href=distributed.versions.html>&#9656; versions</a> </li><li><div class=select><a href=distributed.worker.html>&#9662; worker</a> </div></li><li><ul><li><a href=distributed.worker.Reschedule.html> <i>class</i> Reschedule</a> </li><li><a href=distributed.worker.TaskState.html> <i>class</i> TaskState</a> </li><li><a href=distributed.worker.Worker.html> <i>class</i> Worker</a> </li></ul></li><li><a href=distributed.worker_client.html>&#9656; worker_client</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Module worker</h1><div id=path><a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.worker.html>worker</a></div><a class=sourcelink href=source+distributed.worker.py.html>source</a> <a class=sourcelink href=distributed.worker.html>link</a><h2>Classes</h2><ul class=deflst><li> <div> <span class=def>class <a class=symbol href=distributed.worker.Reschedule.html>Reschedule</a></span> </div><div class=docline> Reschedule this task </div></li><li> <div> <span class=def>class <a class=symbol href=distributed.worker.TaskState.html>TaskState</a></span> </div><div class=docline> Holds volatile state relating to an individual Dask task </div></li><li> <div> <span class=def>class <a class=symbol href=distributed.worker.Worker.html>Worker</a></span> </div><div class=docline> Worker node in a Dask distributed cluster </div></li></ul><h2>Functions</h2><ul class=deflst><li><div class=fn><a id=f_apply_function></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_apply_function>apply_function</a>(<span class=args>function, args, kwargs, execution_state, key, active_threads, ...</span>) </span><div class=docline> Run a function, collect information </div></div><div class=fdetail id=fn_apply_function><div class=decl><div class=def><span class=kw>def</span> apply_function( <div class=args style="padding-left: 2em">function,</div><div class=args style="padding-left: 2em">args,</div><div class=args style="padding-left: 2em">kwargs,</div><div class=args style="padding-left: 2em">execution_state,</div><div class=args style="padding-left: 2em">key,</div><div class=args style="padding-left: 2em">active_threads,</div><div class=args style="padding-left: 2em">active_threads_lock,</div><div class=args style="padding-left: 2em">time_delay,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3369>source</a> <a class=sourcelink href=distributed.worker.html#f_apply_function>link</a></div><h3>Returns</h3><ul class=params><li> dictionary with status, result/error, timings, etc.. </li></ul></div></div></li><li><div class=fn><a id=f_apply_function_actor></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_apply_function_actor>apply_function_actor</a>(<span class=args>function, args, kwargs, execution_state, key, active_threads, ...</span>) </span><div class=docline> Run a function, collect information </div></div><div class=fdetail id=fn_apply_function_actor><div class=decl><div class=def><span class=kw>def</span> apply_function_actor( <div class=args style="padding-left: 2em">function,</div><div class=args style="padding-left: 2em">args,</div><div class=args style="padding-left: 2em">kwargs,</div><div class=args style="padding-left: 2em">execution_state,</div><div class=args style="padding-left: 2em">key,</div><div class=args style="padding-left: 2em">active_threads,</div><div class=args style="padding-left: 2em">active_threads_lock,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3416>source</a> <a class=sourcelink href=distributed.worker.html#f_apply_function_actor>link</a></div><h3>Returns</h3><ul class=params><li> dictionary with status, result/error, timings, etc.. </li></ul></div></div></li><li><div class=fn><a id=f_convert_args_to_str></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_convert_args_to_str>convert_args_to_str</a>(<span class=args>args, max_len=None</span>) </span><div class=docline> Convert args to a string, allowing for some arguments to raise exceptions during conversion and ignoring them. </div></div><div class=fdetail id=fn_convert_args_to_str><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3464>source</a> <a class=sourcelink href=distributed.worker.html#f_convert_args_to_str>link</a></div></div></div></li><li><div class=fn><a id=f_convert_kwargs_to_str></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_convert_kwargs_to_str>convert_kwargs_to_str</a>(<span class=args>kwargs, max_len=None</span>) </span><div class=docline> Convert kwargs to a string, allowing for some arguments to raise exceptions during conversion and ignoring them. </div></div><div class=fdetail id=fn_convert_kwargs_to_str><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3483>source</a> <a class=sourcelink href=distributed.worker.html#f_convert_kwargs_to_str>link</a></div></div></div></li><li><div class=fn><a id=f_dumps_function></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_dumps_function>dumps_function</a>(<span class=args>func</span>) </span><div class=docline> Dump a function to bytes, cache functions </div></div><div class=fdetail id=fn_dumps_function><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3298>source</a> <a class=sourcelink href=distributed.worker.html#f_dumps_function>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.diagnostics.eventstream.html>distributed.diagnostics.eventstream</a>. </li><li> Imported in <a class=symbol href=distributed.diagnostics.progress_stream.html>distributed.diagnostics.progress_stream</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_scheduler.html>distributed.tests.test_scheduler</a>. </li></ul></div></div></li><li><div class=fn><a id=f_dumps_task></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_dumps_task>dumps_task</a>(<span class=args>task</span>) </span><div class=docline> Serialize a dask task </div></div><div class=fdetail id=fn_dumps_task><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3313>source</a> <a class=sourcelink href=distributed.worker.html#f_dumps_task>link</a></div><pre>Returns a dict of bytestrings that can each be loaded with ``loads``</pre><h3>Examples</h3><pre>Either returns a task as a function, args, kwargs dict

&gt;&gt;&gt; from operator import add
&gt;&gt;&gt; dumps_task((add, 1))  # doctest: +SKIP
{&#39;function&#39;: b&#39;         _operatoradd.&#39;
 &#39;args&#39;: b&#39;   KK.&#39;}

Or as a single task blob if it can&#39;t easily decompose the result.  This
happens either if the task is highly nested, or if it isn&#39;t a task at all

&gt;&gt;&gt; dumps_task(1)  # doctest: +SKIP
{&#39;task&#39;: b&#39;       K.&#39;}</pre><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.diagnostics.tests.test_widgets.html>distributed.diagnostics.tests.test_widgets</a>. </li><li> Imported in <a class=symbol href=distributed.protocol.highlevelgraph.html>distributed.protocol.highlevelgraph</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_scheduler.html>distributed.tests.test_scheduler</a>. </li></ul></div></div></li><li><div class=fn><a id=f_execute_task></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_execute_task>execute_task</a>(<span class=args>task</span>) </span><div class=docline> Evaluate a nested task </div></div><div class=fdetail id=fn_execute_task><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3275>source</a> <a class=sourcelink href=distributed.worker.html#f_execute_task>link</a></div><pre>&gt;&gt;&gt; inc = lambda x: x + 1
&gt;&gt;&gt; execute_task((inc, 1))
2
&gt;&gt;&gt; execute_task((sum, [1, 2, (inc, 3)]))
7</pre></div></div></li><li><div class=fn><a id=f_get_client></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_get_client>get_client</a>(<span class=args>address=None, timeout=None, resolve_address=True</span>) </span><div class=docline> Get a client while within a task. </div></div><div class=fdetail id=fn_get_client><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3052>source</a> <a class=sourcelink href=distributed.worker.html#f_get_client>link</a></div><pre>This client connects to the same scheduler to which the worker is connected</pre><h3>Parameters</h3><ul class=params><li><strong>address</strong> : str <br><pre>The address of the scheduler to connect to. Defaults to the scheduler
the worker is connected to.</pre></li><li><strong>timeout</strong> : int or str <br><pre>Timeout (in seconds) for getting the Client. Defaults to the
``distributed.comm.timeouts.connect`` configuration value.</pre></li><li><strong>resolve_address</strong> : bool, default True <br><pre>Whether to resolve `address` to its canonical form.</pre></li></ul><h3>Returns</h3><ul class=params><li> Client </li></ul><h3>Examples</h3><pre>&gt;&gt;&gt; def f():
...     client = get_client(timeout=&#34;10s&#34;)
...     futures = client.map(lambda x: x + 1, range(10))  # spawn many tasks
...     results = client.gather(futures)
...     return sum(results)

&gt;&gt;&gt; future = client.submit(f)  # doctest: +SKIP
&gt;&gt;&gt; future.result()  # doctest: +SKIP
55</pre><h3>See also</h3><pre>get_worker
worker_client
secede</pre><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.client.html>distributed.client</a>. </li><li> Imported in <a class=symbol href=distributed.deploy.tests.test_local.html>distributed.deploy.tests.test_local</a>. </li><li> Imported in <a class=symbol href=distributed.html>distributed</a>. </li><li> Imported in <a class=symbol href=distributed.queues.html>distributed.queues</a>. </li><li> Imported in <a class=symbol href=distributed.semaphore.html>distributed.semaphore</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_client.html>distributed.tests.test_client</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_locks.html>distributed.tests.test_locks</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker.html>distributed.tests.test_worker</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker_client.html>distributed.tests.test_worker_client</a>. </li><li> Imported in <a class=symbol href=distributed.variable.html>distributed.variable</a>. </li><li> Imported in <a class=symbol href=distributed.worker_client.html>distributed.worker_client</a>. </li></ul></div></div></li><li><div class=fn><a id=f_get_msg_safe_str></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_get_msg_safe_str>get_msg_safe_str</a>(<span class=args>msg</span>) </span><div class=docline> Make a worker msg, which contains args and kwargs, safe to cast to str: allowing for some arguments to raise exceptions during conversion and ignoring them. </div></div><div class=fdetail id=fn_get_msg_safe_str><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3442>source</a> <a class=sourcelink href=distributed.worker.html#f_get_msg_safe_str>link</a></div></div></div></li><li><div class=fn><a id=f_get_worker></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_get_worker>get_worker</a>(<span class=args></span>) </span><div class=docline> Get the worker currently running this task </div></div><div class=fdetail id=fn_get_worker><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3025>source</a> <a class=sourcelink href=distributed.worker.html#f_get_worker>link</a></div><h3>Examples</h3><pre>&gt;&gt;&gt; def f():
...     worker = get_worker()  # The worker on which this task is running
...     return worker.address

&gt;&gt;&gt; future = client.submit(f)  # doctest: +SKIP
&gt;&gt;&gt; future.result()  # doctest: +SKIP
&#39;tcp://127.0.0.1:47373&#39;</pre><h3>See also</h3><pre>get_client
worker_client</pre><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.actor.html>distributed.actor</a>. </li><li> Imported in <a class=symbol href=distributed.client.html>distributed.client</a>. </li><li> Imported in <a class=symbol href=distributed.event.html>distributed.event</a>. </li><li> Imported in <a class=symbol href=distributed.html>distributed</a>. </li><li> Imported in <a class=symbol href=distributed.lock.html>distributed.lock</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_client.html>distributed.tests.test_client</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_pubsub.html>distributed.tests.test_pubsub</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker.html>distributed.tests.test_worker</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker_client.html>distributed.tests.test_worker_client</a>. </li><li> Imported in <a class=symbol href=distributed.worker_client.html>distributed.worker_client</a>. </li></ul></div></div></li><li><div class=fn><a id=f_loads_function></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_loads_function>loads_function</a>(<span class=args>bytes_object</span>) </span><div class=docline> Load a function from bytes, cache bytes </div></div><div class=fdetail id=fn_loads_function><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3246>source</a> <a class=sourcelink href=distributed.worker.html#f_loads_function>link</a></div></div></div></li><li><div class=fn><a id=f_parse_memory_limit></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol-no-doc" href=distributed.worker.html#f_parse_memory_limit>parse_memory_limit</a>(<span class=args>memory_limit, nthreads, total_cores=CPU_COUNT</span>) </span></div><div class=fdetail id=fn_parse_memory_limit><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3169>source</a> <a class=sourcelink href=distributed.worker.html#f_parse_memory_limit>link</a></div><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.deploy.local.html>distributed.deploy.local</a>. </li><li> Imported in <a class=symbol href=distributed.nanny.html>distributed.nanny</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_worker.html>distributed.tests.test_worker</a>. </li></ul></div></div></li><li><div class=fn><a id=f_secede></a><div class=fshort><span class=def><span class=ftoggle>&#9654;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_secede>secede</a>(<span class=args></span>) </span><div class=docline> Have this task secede from the worker&#39;s thread pool </div></div><div class=fdetail id=fn_secede><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3120>source</a> <a class=sourcelink href=distributed.worker.html#f_secede>link</a></div><pre>This opens up a new scheduling slot and a new thread for a new task. This
enables the client to schedule tasks on this node, which is
especially useful while waiting for other jobs to finish (e.g., with
``client.gather``).</pre><h3>Examples</h3><pre>&gt;&gt;&gt; def mytask(x):
...     # do some work
...     client = get_client()
...     futures = client.map(...)  # do some remote work
...     secede()  # while that work happens, remove ourself from the pool
...     return client.gather(futures)  # return gathered results</pre><h3>See also</h3><pre>get_client
get_worker</pre><h3>Reexports</h3><ul class=deflst2><li> Imported in <a class=symbol href=distributed.client.html>distributed.client</a>. </li><li> Imported in <a class=symbol href=distributed.html>distributed</a>. </li><li> Imported in <a class=symbol href=distributed.tests.test_client.html>distributed.tests.test_client</a>. </li></ul></div></div></li><li><div class=fn><a id=f_warn_dumps></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.worker.html#f_warn_dumps>warn_dumps</a>(<span class=args>obj, dumps=pickle.dumps, limit=1e6</span>) </span><div class=docline> Dump an object to bytes, warn if those bytes are large </div></div><div class=fdetail id=fn_warn_dumps><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3347>source</a> <a class=sourcelink href=distributed.worker.html#f_warn_dumps>link</a></div></div></div></li><li><div class=fn><a id=f_weight></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.worker.html#f_weight>weight</a>(<span class=args>k, v</span>) </span></div><div class=fdetail id=fn_weight><div class=idnt><a class=sourcelink href=source+distributed.worker.py.html#line-3503>source</a> <a class=sourcelink href=distributed.worker.html#f_weight>link</a></div></div></div></li></ul><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:05 </p></div></div></body></html>