<!DOCTYPE html><html><head><meta charset=utf-8><title>distributed.scheduler.TaskState</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=./assets/purecss/pure-min.css><link rel=stylesheet href=./assets/purecss/grids-responsive-min.css><link rel=stylesheet href=./assets/style.css><link rel=stylesheet href=./assets/pygments/default.css><link rel=stylesheet href=./assets/jquery/jquery-ui.min.css><script src=./assets/jquery/jquery-3.0.0.min.js></script><script src=./assets/jquery/jquery-ui.min.js></script><script src=nedoc.js></script></head><body><div id=layout class=pure-g><div class="sidebar pure-u-1 pure-u-md-1-4"><div class=header><h1 class=brand-title>Distributed</h1> 1.0 </div><div id=sbox><input id=search style="color: black;" placeholder="search ..."></div><div class=tree><ul><li><a href=distributed.html>&#9662; distributed</a> </li><li><ul><li><a href=distributed.actor.html>&#9656; actor</a> </li><li><a href=distributed.asyncio.html>&#9656; asyncio</a> </li><li><a href=distributed.batched.html>&#9656; batched</a> </li><li><a href=distributed.bokeh.html>&#9656; bokeh</a> </li><li><a href=distributed.cfexecutor.html>&#9656; cfexecutor</a> </li><li><a href=distributed.cli.html>&#9656; cli</a> </li><li><a href=distributed.client.html>&#9656; client</a> </li><li><a href=distributed.comm.html>&#9656; comm</a> </li><li><a href=distributed.compatibility.html>&#9656; compatibility</a> </li><li><a href=distributed.config.html>&#9656; config</a> </li><li><a href=distributed.core.html>&#9656; core</a> </li><li><a href=distributed.counter.html>&#9656; counter</a> </li><li><a href=distributed.dashboard.html>&#9656; dashboard</a> </li><li><a href=distributed.deploy.html>&#9656; deploy</a> </li><li><a href=distributed.diagnostics.html>&#9656; diagnostics</a> </li><li><a href=distributed.diskutils.html>&#9656; diskutils</a> </li><li><a href=distributed.event.html>&#9656; event</a> </li><li><a href=distributed.http.html>&#9656; http</a> </li><li><a href=distributed.lock.html>&#9656; lock</a> </li><li><a href=distributed.locket.html>&#9656; locket</a> </li><li><a href=distributed.metrics.html>&#9656; metrics</a> </li><li><a href=distributed.nanny.html>&#9656; nanny</a> </li><li><a href=distributed.node.html>&#9656; node</a> </li><li><a href=distributed.preloading.html>&#9656; preloading</a> </li><li><a href=distributed.process.html>&#9656; process</a> </li><li><a href=distributed.proctitle.html>&#9656; proctitle</a> </li><li><a href=distributed.profile.html>&#9656; profile</a> </li><li><a href=distributed.protocol.html>&#9656; protocol</a> </li><li><a href=distributed.publish.html>&#9656; publish</a> </li><li><a href=distributed.pubsub.html>&#9656; pubsub</a> </li><li><a href=distributed.pytest_resourceleaks.html>&#9656; pytest_resourceleaks</a> </li><li><a href=distributed.queues.html>&#9656; queues</a> </li><li><a href=distributed.recreate_exceptions.html>&#9656; recreate_exceptions</a> </li><li><a href=distributed.scheduler.html>&#9662; scheduler</a> </li><li><ul><li><a href=distributed.scheduler.ClientState.html> <i>class</i> ClientState</a> </li><li><a href=distributed.scheduler.CollectTaskMetaDataPlugin.html> <i>class</i> CollectTaskMetaDataPlugin</a> </li><li><a href=distributed.scheduler.KilledWorker.html> <i>class</i> KilledWorker</a> </li><li><a href=distributed.scheduler.Scheduler.html> <i>class</i> Scheduler</a> </li><li><a href=distributed.scheduler.TaskGroup.html> <i>class</i> TaskGroup</a> </li><li><a href=distributed.scheduler.TaskPrefix.html> <i>class</i> TaskPrefix</a> </li><li><div class=select><a href=distributed.scheduler.TaskState.html> <i>class</i> TaskState</a> </div></li><li><a href=distributed.scheduler.WorkerState.html> <i>class</i> WorkerState</a> </li><li><a href=distributed.scheduler.WorkerStatusPlugin.html> <i>class</i> WorkerStatusPlugin</a> </li></ul></li><li><a href=distributed.security.html>&#9656; security</a> </li><li><a href=distributed.semaphore.html>&#9656; semaphore</a> </li><li><a href=distributed.sizeof.html>&#9656; sizeof</a> </li><li><a href=distributed.stealing.html>&#9656; stealing</a> </li><li><a href=distributed.system.html>&#9656; system</a> </li><li><a href=distributed.system_monitor.html>&#9656; system_monitor</a> </li><li><a href=distributed.tests.html>&#9656; tests</a> </li><li><a href=distributed.threadpoolexecutor.html>&#9656; threadpoolexecutor</a> </li><li><a href=distributed.utils.html>&#9656; utils</a> </li><li><a href=distributed.utils_comm.html>&#9656; utils_comm</a> </li><li><a href=distributed.utils_perf.html>&#9656; utils_perf</a> </li><li><a href=distributed.utils_test.html>&#9656; utils_test</a> </li><li><a href=distributed.variable.html>&#9656; variable</a> </li><li><a href=distributed.versions.html>&#9656; versions</a> </li><li><a href=distributed.worker.html>&#9656; worker</a> </li><li><a href=distributed.worker_client.html>&#9656; worker_client</a> </li></ul></ul></div></div><div class="content pure-u-1 pure-u-md-3-4"><h1>Class TaskState</h1><div id=path><a class=symbol href=distributed.html>distributed</a>.<a class=symbol href=distributed.scheduler.html>scheduler</a>.<a class=symbol href=distributed.scheduler.TaskState.html>TaskState</a></div><p><div class=docline> A simple object holding information about a task. </div></p><h2>Declaration</h2><div class=decl><span class=kw>class</span> TaskState</div><a class=sourcelink href=source+distributed.scheduler.py.html#line-372>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html>link</a><h2>Documentation</h2><pre>.. attribute:: key: str

       The key is the unique identifier of a task, generally formed
       from the name of the function, followed by a hash of the function
       and arguments, like ``&#39;inc-ab31c010444977004d656610d2d421ec&#39;``.

    .. attribute:: prefix: TaskPrefix

       The broad class of tasks to which this task belongs like &#34;inc&#34; or
       &#34;read_csv&#34;

    .. attribute:: run_spec: object

       A specification of how to run the task.  The type and meaning of this
       value is opaque to the scheduler, as it is only interpreted by the
       worker to which the task is sent for executing.

       As a special case, this attribute may also be ``None``, in which case
       the task is &#34;pure data&#34; (such as, for example, a piece of data loaded
       in the scheduler using :meth:`Client.scatter`).  A &#34;pure data&#34; task
       cannot be computed again if its value is lost.

    .. attribute:: priority: tuple

       The priority provides each task with a relative ranking which is used
       to break ties when many tasks are being considered for execution.

       This ranking is generally a 2-item tuple.  The first (and dominant)
       item corresponds to when it was submitted.  Generally, earlier tasks
       take precedence.  The second item is determined by the client, and is
       a way to prioritize tasks within a large graph that may be important,
       such as if they are on the critical path, or good to run in order to
       release many dependencies.  This is explained further in
       :doc:`Scheduling Policy &lt;scheduling-policies&gt;`.

    .. attribute:: state: str

       This task&#39;s current state.  Valid states include ``released``,
       ``waiting``, ``no-worker``, ``processing``, ``memory``, ``erred``
       and ``forgotten``.  If it is ``forgotten``, the task isn&#39;t stored
       in the ``tasks`` dictionary anymore and will probably disappear
       soon from memory.

    .. attribute:: dependencies: {TaskState}

       The set of tasks this task depends on for proper execution.  Only
       tasks still alive are listed in this set.  If, for whatever reason,
       this task also depends on a forgotten task, the
       :attr:`has_lost_dependencies` flag is set.

       A task can only be executed once all its dependencies have already
       been successfully executed and have their result stored on at least
       one worker.  This is tracked by progressively draining the
       :attr:`waiting_on` set.

    .. attribute:: dependents: {TaskState}

       The set of tasks which depend on this task.  Only tasks still alive
       are listed in this set.

       This is the reverse mapping of :attr:`dependencies`.

    .. attribute:: has_lost_dependencies: bool

       Whether any of the dependencies of this task has been forgotten.
       For memory consumption reasons, forgotten tasks are not kept in
       memory even though they may have dependent tasks.  When a task is
       forgotten, therefore, each of its dependents has their
       :attr:`has_lost_dependencies` attribute set to ``True``.

       If :attr:`has_lost_dependencies` is true, this task cannot go
       into the &#34;processing&#34; state anymore.

    .. attribute:: waiting_on: {TaskState}

       The set of tasks this task is waiting on *before* it can be executed.
       This is always a subset of :attr:`dependencies`.  Each time one of the
       dependencies has finished processing, it is removed from the
       :attr:`waiting_on` set.

       Once :attr:`waiting_on` becomes empty, this task can move from the
       &#34;waiting&#34; state to the &#34;processing&#34; state (unless one of the
       dependencies errored out, in which case this task is instead
       marked &#34;erred&#34;).

    .. attribute:: waiters: {TaskState}

       The set of tasks which need this task to remain alive.  This is always
       a subset of :attr:`dependents`.  Each time one of the dependents
       has finished processing, it is removed from the :attr:`waiters`
       set.

       Once both :attr:`waiters` and :attr:`who_wants` become empty, this
       task can be released (if it has a non-empty :attr:`run_spec`) or
       forgotten (otherwise) by the scheduler, and by any workers
       in :attr:`who_has`.

       .. note:: Counter-intuitively, :attr:`waiting_on` and
          :attr:`waiters` are not reverse mappings of each other.

    .. attribute:: who_wants: {ClientState}

       The set of clients who want this task&#39;s result to remain alive.
       This is the reverse mapping of :attr:`ClientState.wants_what`.

       When a client submits a graph to the scheduler it also specifies
       which output tasks it desires, such that their results are not released
       from memory.

       Once a task has finished executing (i.e. moves into the &#34;memory&#34;
       or &#34;erred&#34; state), the clients in :attr:`who_wants` are notified.

       Once both :attr:`waiters` and :attr:`who_wants` become empty, this
       task can be released (if it has a non-empty :attr:`run_spec`) or
       forgotten (otherwise) by the scheduler, and by any workers
       in :attr:`who_has`.

    .. attribute:: who_has: {WorkerState}

       The set of workers who have this task&#39;s result in memory.
       It is non-empty iff the task is in the &#34;memory&#34; state.  There can be
       more than one worker in this set if, for example, :meth:`Client.scatter`
       or :meth:`Client.replicate` was used.

       This is the reverse mapping of :attr:`WorkerState.has_what`.

    .. attribute:: processing_on: WorkerState (or None)

       If this task is in the &#34;processing&#34; state, which worker is currently
       processing it.  Otherwise this is ``None``.

       This attribute is kept in sync with :attr:`WorkerState.processing`.

    .. attribute:: retries: int

       The number of times this task can automatically be retried in case
       of failure.  If a task fails executing (the worker returns with
       an error), its :attr:`retries` attribute is checked.  If it is
       equal to 0, the task is marked &#34;erred&#34;.  If it is greater than 0,
       the :attr:`retries` attribute is decremented and execution is
       attempted again.

    .. attribute:: nbytes: int (or None)

       The number of bytes, as determined by ``sizeof``, of the result
       of a finished task.  This number is used for diagnostics and to
       help prioritize work.

    .. attribute:: type: str

       The type of the object as a string.  Only present for tasks that have
       been computed.

    .. attribute:: exception: object

       If this task failed executing, the exception object is stored here.
       Otherwise this is ``None``.

    .. attribute:: traceback: object

       If this task failed executing, the traceback object is stored here.
       Otherwise this is ``None``.

    .. attribute:: exception_blame: TaskState (or None)

       If this task or one of its dependencies failed executing, the
       failed task is stored here (possibly itself).  Otherwise this
       is ``None``.

    .. attribute:: suspicious: int

       The number of times this task has been involved in a worker death.

       Some tasks may cause workers to die (such as calling ``os._exit(0)``).
       When a worker dies, all of the tasks on that worker are reassigned
       to others.  This combination of behaviors can cause a bad task to
       catastrophically destroy all workers on the cluster, one after
       another.  Whenever a worker dies, we mark each task currently
       processing on that worker (as recorded by
       :attr:`WorkerState.processing`) as suspicious.

       If a task is involved in three deaths (or some other fixed constant)
       then we mark the task as ``erred``.

    .. attribute:: host_restrictions: {hostnames}

       A set of hostnames where this task can be run (or ``None`` if empty).
       Usually this is empty unless the task has been specifically restricted
       to only run on certain hosts.  A hostname may correspond to one or
       several connected workers.

    .. attribute:: worker_restrictions: {worker addresses}

       A set of complete worker addresses where this can be run (or ``None``
       if empty).  Usually this is empty unless the task has been specifically
       restricted to only run on certain workers.

       Note this is tracking worker addresses, not worker states, since
       the specific workers may not be connected at this time.

    .. attribute:: resource_restrictions: {resource: quantity}

       Resources required by this task, such as ``{&#39;gpu&#39;: 1}`` or
       ``{&#39;memory&#39;: 1e9}`` (or ``None`` if empty).  These are user-defined
       names and are matched against the contents of each
       :attr:`WorkerState.resources` dictionary.

    .. attribute:: loose_restrictions: bool

       If ``False``, each of :attr:`host_restrictions`,
       :attr:`worker_restrictions` and :attr:`resource_restrictions` is
       a hard constraint: if no worker is available satisfying those
       restrictions, the task cannot go into the &#34;processing&#34; state and
       will instead go into the &#34;no-worker&#34; state.

       If ``True``, the above restrictions are mere preferences: if no worker
       is available satisfying those restrictions, the task can still go
       into the &#34;processing&#34; state and be sent for execution to another
       connected worker.

    .. attribute: metadata: dict

       Metadata related to task.

    .. attribute: actor: bool

       Whether or not this task is an Actor.

    .. attribute: group: TaskGroup

:      The group of tasks to which this one belongs.</pre><h2>Methods</h2><ul class=deflst><li><div class=fn><a id=f___init__></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f___init__>__init__</a>(<span class=args>self, key, run_spec</span>) </span></div><div class=fdetail id=fn___init__><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-656>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f___init__>link</a></div></div></div></li><li><div class=fn><a id=f___repr__></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f___repr__>__repr__</a>(<span class=args>self</span>) </span></div><div class=fdetail id=fn___repr__><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-715>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f___repr__>link</a></div></div></div></li><li><div class=fn><a id=f_add_dependency></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol" href=distributed.scheduler.TaskState.html#f_add_dependency>add_dependency</a>(<span class=args>self, other: TaskState</span>) </span><div class=docline> Add another task as a dependency of this task </div></div><div class=fdetail id=fn_add_dependency><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-696>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_add_dependency>link</a></div></div></div></li><li><div class=fn><a id=f_get_nbytes></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_get_nbytes>get_nbytes</a>(<span class=args>self</span>) -&gt; int </span></div><div class=fdetail id=fn_get_nbytes><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-702>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_get_nbytes>link</a></div></div></div></li><li><div class=fn><a id=f_prefix_key></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_prefix_key>prefix_key</a>(<span class=args>self</span>) <span class=label>@property</span></span></div><div class=fdetail id=fn_prefix_key><div class=decl><div class=def><i> @property<br></i><span class=kw>def</span> prefix_key(<span class=args><span class=kw>self</span></span>) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-687>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_prefix_key>link</a></div></div></div></li><li><div class=fn><a id=f_set_nbytes></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_set_nbytes>set_nbytes</a>(<span class=args>self, nbytes: int</span>) </span></div><div class=fdetail id=fn_set_nbytes><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-706>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_set_nbytes>link</a></div></div></div></li><li><div class=fn><a id=f_state></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_state>state</a>(<span class=args>self</span>) -&gt; str <span class=label>@property</span></span></div><div class=fdetail id=fn_state><div class=decl><div class=def><i> @property<br></i><span class=kw>def</span> state(<span class=args><span class=kw>self</span></span>) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-683>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_state>link</a></div></div></div></li><li><div class=fn><a id=f_state></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_state>state</a>(<span class=args>self, value: str</span>) <span class=label>@state.setter</span></span></div><div class=fdetail id=fn_state><div class=decl><div class=def><i> @state.setter<br></i><span class=kw>def</span> state( <div class=args style="padding-left: 2em"><span class=kw>self</span>,</div><div class=args style="padding-left: 2em">value: str,</div> ) </div></div><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-691>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_state>link</a></div></div></div></li><li><div class=fn><a id=f_validate></a><div class=fshort><span class=def><span class=ftoggle-empty>&#9655;</span> def <a class="fexpand symbol-no-doc" href=distributed.scheduler.TaskState.html#f_validate>validate</a>(<span class=args>self</span>) </span></div><div class=fdetail id=fn_validate><div class=idnt><a class=sourcelink href=source+distributed.scheduler.py.html#line-718>source</a> <a class=sourcelink href=distributed.scheduler.TaskState.html#f_validate>link</a></div></div></div></li></ul><p class=footer> Generated by <a href=https://github.com/spirali/nedoc>nedoc</a> v0.9 at 2020-12-29 14:05 </p></div></div></body></html>